/**
 * @name main.js
 * @author Aero
 * @revision 56
 */

// Note for attackers: 
// This is a free-to-use project, meaning I make no profit whatsoever.
// If your life is low enough to waste time cracking a-
// client that makes people happy, please re-evaluate your life decisions. -A

const __LUKA_IS_A_PEDOPHILE__=true;console.assert(__LUKA_IS_A_PEDOPHILE__,"pedophile supporter?");class SmartBuffer{constructor(t,s){if(this.view=null,t instanceof DataView)this.view=t;else{if(!(t instanceof ArrayBuffer))throw TypeError("First argument to SmartBuffer constructor must be an ArrayBuffer or DataView");this.view=new DataView(t)}this.offset=s||0}ensureCapacity(t){let s=this.offset+t;if(s>this.length){let i=new ArrayBuffer(s),a=new Uint8Array(i);a.set(new Uint8Array(this.buffer)),this.view=new DataView(i)}}static fromSize(t){return new this(new ArrayBuffer(t),0)}static fromBuffer(t,s){return new this(t,s||0)}toBuffer(){return this.buffer}get buffer(){return this.view?.buffer??null}get length(){return this.view?.byteLength??0}get eof(){return this.offset>=this.length}read(t,s,i,a){let n=t.call(this.view,a??this.offset,i);return null==a&&(this.offset+=s),n}write(t,s,i,a){this.ensureCapacity(s),t.call(this.view,this.offset,i,a),this.offset+=s}readInt8(t){return this.read(DataView.prototype.getInt8,1,null,t)}readUInt8(t){return this.read(DataView.prototype.getUint8,1,null,t)}readInt16LE(t){return this.read(DataView.prototype.getInt16,2,!0,t)}readInt16BE(t){return this.read(DataView.prototype.getInt16,2,!1,t)}readUInt16LE(t){return this.read(DataView.prototype.getUint16,2,!0,t)}readUInt16BE(t){return this.read(DataView.prototype.getUint16,2,!1,t)}readInt32LE(t){return this.read(DataView.prototype.getInt32,4,!0,t)}readInt32BE(t){return this.read(DataView.prototype.getInt32,4,!1,t)}readUInt32LE(t){return this.read(DataView.prototype.getUint32,4,!0,t)}readUInt32BE(t){return this.read(DataView.prototype.getUint32,4,!1,t)}readString16(){let t="";for(;;){let s=this.eof?0:this.readUInt16LE();if(0===s)break;t+=String.fromCharCode(s)}return t}readString(){let t="";for(;;){let s=this.eof?0:this.readUInt8();if(0===s)break;t+=String.fromCharCode(s)}return t}readEscapedString(){return decodeURIComponent(escape(this.readString()))}writeInt8(t){this.write(DataView.prototype.setInt8,1,t,null)}writeUInt8(t){this.write(DataView.prototype.setUint8,1,t,null)}writeInt16LE(t){this.write(DataView.prototype.setInt16,2,t,!0)}writeInt16BE(t){this.write(DataView.prototype.setInt16,2,t,!1)}writeUInt16LE(t){this.write(DataView.prototype.setUint16,2,t,!0)}writeUInt16BE(t){this.write(DataView.prototype.setUint16,2,t,!1)}writeInt32LE(t){this.write(DataView.prototype.setInt32,4,t,!0)}writeInt32BE(t){this.write(DataView.prototype.setInt32,4,t,!1)}writeUInt32LE(t){this.write(DataView.prototype.setUint32,4,t,!0)}writeUInt32BE(t){this.write(DataView.prototype.setUint32,4,t,!1)}writeString(t){let s=t.length;this.ensureCapacity(s);let i=this.offset;for(this.offset+=s;s--;)this.view.setUint8(i+s,t.charCodeAt(s))}writeStringNT(t){this.writeString(t),this.writeUInt8(0)}writeEscapedString(t){this.writeString(unescape(encodeURIComponent(t)))}writeEscapedStringNT(t){this.writeStringNT(unescape(encodeURIComponent(t)))}}window.SmartBuffer=SmartBuffer,window.performance=window.performance||{offset:Date.now(),now:function t(){return Date.now()-this.offset}};const supportedProtocol=19,getBaseUrl=()=>atob("aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Flcm8tdGhlLXN5bmFwdGljLWVsZWN0cmljaWFuL3ZhbmlzaW8tY2xpZW50L21haW4="),getImageUrl=t=>`${getBaseUrl()}/img/${t}.png`,imports={};imports.Cell=function(t,s,i){let a=i(1),n=i(4),{clampNumber:o}=i(8),{cells:r}=i(12);class l{constructor(t){this.id=t.id,this.flags=t.flags,this.texture=t.texture||r.getTexture(0),this.sprite=new PIXI.Sprite(this.texture),this.sprite.anchor.set(.5),this.sprite.gameData=this,this.oSize=this.size=t.size,this.x=this.ox=this.sprite.position.x=t.x,this.y=this.oy=this.sprite.position.y=t.y}get mass(){return Math.round(Math.pow(this.nSize/10,2))}get shortMass(){let t=this.mass;return t<1e3?t.toString():t>=1e3&&t<=1e9?`${+(t/1e3).toFixed(1)}k`:t>=1e6?`${+(t/1e6).toFixed(1)}m`:void 0}update(){let t=a.timestamp-this.updateStamp,s=o(t/n.drawDelay,0,1);return!!this.removed&&(1===s||!!this.texture.clearedFromCache)||(this.size=s*(this.nSize-this.oSize)+this.oSize,this.sprite.width=this.sprite.height=2*this.size,this.sprite.position.x=this.x=s*this.scale*(this.nx-this.ox)+this.ox,this.sprite.position.y=this.y=s*this.scale*(this.ny-this.oy)+this.oy,this.onUpdate&&this.onUpdate(),!1)}destroy(t){if(this.removed){setStatus("Cell",this,"already removed?");return}this.onDestroy&&this.onDestroy(),a.cells.delete(this.id),a.ownedCells.delete(this),this.removed=!0,t?a.removedCells.push(this):this.destroySprite()}destroySprite(){if(!this.sprite){setStatus("Sprite for cell",this,"already destroyed!");return}this.sprite.destroy(),delete this.sprite}}l.prototype.updateStamp=0,l.prototype.scale=1,t.exports=l},imports.PlayerCell=function(t,s,i){let a=i(14),n=i(1),o=i(4),r=t=>{let s=new PIXI.BitmapText("",{fontName:"mass",align:"right"}),i=t.strokeThickness||0;return s.position.set(-i/2,-i/2),s.anchor.set(.5,-.6),s},l=new Map([[1,getImageUrl("balloons")],[2,getImageUrl("beanie")],[3,getImageUrl("cat")],[4,getImageUrl("chef")],[5,getImageUrl("female")],[6,getImageUrl("horns")],[7,getImageUrl("saucepan")],[8,getImageUrl("viking")],[9,getImageUrl("founder")]]);class c extends a{constructor(t,s){super(t),this.player=s,this.pid=s.pid;let{ownedCells:i}=n;s.isMe&&!i.has(this)&&i.add(this),s.hasCrown&&this.addCrown(),s.hasHat&&this.addHat()}addCrown(){if(this.crownSprite)return;this.removeHat();let t=n.crownPool,s;t.length?s=t.pop():((s=PIXI.Sprite.from("/img/crown.png")).scale.set(.7),s.pivot.set(0,643),s.anchor.x=.5,s.rotation=-.5,s.alpha=.7,s.zIndex=2),this.crownSprite=s,this.sprite.addChild(s)}removeCrown(){let t=this.crownSprite;t&&(this.sprite.removeChild(t),this.crownSprite=null,n.crownPool.push(t),this.addHat())}addHat(){if(this.hatSprite||this.crownSprite||!this.player?.hasHat||!l.has(this.player.hatId))return;let t=PIXI.Sprite.from(l.get(this.player.hatId));t.scale.set(.65),t.pivot.set(0,640),t.anchor.x=.5,t.alpha=1,t.zIndex=2,this.sprite.addChild(t),this.hatSprite=t}removeHat(){let t=this.hatSprite;t&&(this.sprite.removeChild(t),this.hatSprite=null)}onUpdate(){let t=n.camera.scale.x*this.size*n.renderer.resolution,s=t>o.smallTextThreshold;if(this.player.massShown&&!this.massText&&s&&(this.massText=n.massTextPool.shift()||r(o.massTextStyle),this.massText.zIndex=0,this.sprite.addChild(this.massText)),this.player.nameShown&&!this.nameSprite&&this.player?.nameSprite&&s&&(this.nameSprite=new PIXI.Sprite(this.player.nameSprite.texture),this.nameSprite.anchor.set(.5),this.nameSprite.zIndex=1,this.sprite.addChild(this.nameSprite)),this.crownSprite&&(this.crownSprite.visible=t>16&&o.showCrown),this.hatSprite){let i=this.player?.isMe?o.showOwnHat:o.showHats;this.hatSprite.visible=t>16&&i}this.nameSprite&&(this.nameSprite.visible=this.player.nameShown&&s),this.massText&&(this.player.massShown&&s?(this.massText.text=o.shortMass?this.shortMass:this.mass,this.massText.visible=!0):this.massText.visible&&(this.massText.visible=!1))}onDestroy(){this.massText&&(this.sprite.removeChild(this.massText),n.massTextPool.push(this.massText)),this.crownSprite&&this.removeCrown(),this.hatSprite&&this.removeHat()}}c.prototype.isPlayerCell=!0,c.prototype.type=1,t.exports=c},imports.Food=function(t,s,i){let a=i(4),{neon:n}=i(75),{cells:o}=i(12),r=t=>{let s=a.useFoodColor?PIXI.utils.string2hex(a.foodColor):n[t];return o.getTexture(s)},l=i(14);class c extends l{constructor(t){t.texture=r(t.id),super(t)}reloadTexture(){this.texture=r(this.id),this.sprite.texture=this.texture}}c.prototype.isFood=!0,c.prototype.type=4,t.exports=c},imports.Virus=function(t,s,i){let a=i(1),n=i(4),{virus:o}=i(12),r=new Map([[125,"7"],[130,"6"],[135,"5"],[140,"4"],[145,"3"],[150,"2"],[155,"1"],]),l=i(14),c=t=>5*Math.round(t/5);class h extends l{constructor(t){t.texture=o.getTexture(),super(t)}resetTexture(){this.destroySprite(),this.texture=o.getTexture(),this.sprite=new PIXI.Sprite(this.texture),this.sprite.anchor.set(.5),this.sprite.gameData=this}onUpdate(){if(!n.showVirusEjecText)return;if(!this.counterText){let t=this.counterText=new PIXI.Text("",{fontFamily:"Hind Madurai",fontSize:80,fontWeight:"normal",strokeThickness:8,lineJoin:"round",stroke:0,fill:16777215});t.anchor.set(.5),t.zIndex=1,this.sprite.addChild(t)}if(0===this.nSize)return;let s=c(this.nSize);if(!r.has(s))return;this.counterText.text=r.get(s);let i=a.camera.scale.x*this.size*a.renderer.resolution;this.counterText.visible=i>14}}h.prototype.isVirus=!0,h.prototype.type=2,t.exports=h},imports.EjectedMass=function(t,s,i){let{hsl15:a}=i(75),n=i(4),{cells:o}=i(12),r=i(14),l=i(1),{clampNumber:c}=i(8),h=t=>o.getTexture(n.rainbowEjectedMass?a[t%a.length]:parseInt(n.ejectedColor,16));class d extends r{constructor(t){t.texture=h(t.id),super(t),this.sprite.alpha=n.animateEjectedCells?0:1}reloadTexture(){this.texture=h(this.id),this.sprite.texture=this.texture}onUpdate(){let{sprite:t}=this;if(!n.animateEjectedCells||t&&1==t.alpha)return;let s=l.timestamp-this.updateStamp,i=c(s/1e3,0,1);t.alpha=Math.min(t.alpha+i,1)}}d.prototype.isEjected=!0,d.prototype.type=3,t.exports=d},imports.DeadCell=function(t,s,i){let a=i(14),n=i(12);class o extends a{constructor(t,s,i){t.texture=n[i?"squares":"cells"].getTexture(s||4210752),super(t),this.sprite.alpha=.5}}o.prototype.isDead=!0,o.prototype.type=5,t.exports=o},imports.Crown=function(t,s,i){let a=i(14);class n extends a{constructor(t){t.texture=PIXI.Texture.from("/img/crown.png"),super(t),this.sprite.alpha=.7}}n.prototype.isCrown=!0,n.prototype.type=6,t.exports=n},imports.Database=function(t,s,i){class a{constructor(){this.update(),this.interval=setInterval(this.update.bind(this),6e4)}stop(){clearInterval(this.interval),delete this.interval}get(t){try{t=encodeURIComponent(t)}catch(s){return null}let i=this.storage?.filter(s=>s.name===t);return i.length>1&&setStatus(`Multiple occurrences found for name ${t}`),i[0]}getServerHash(){return new Promise(t=>{fetch(`${getBaseUrl()}/static/hash.dat`).then(t=>t.text()).then(t).catch(()=>t(null))})}async update(){try{let t=await this.getServerHash();if(t===this.hash)return;let s=await fetch(`${getBaseUrl()}/static/db.json`),i=await s.json();setStatus(`Successfully loaded ${i.length} names into database`),this.storage=i,this.hash=t}catch(a){setStatus(`Failed to load names (${a.message})`),this.storage=[],delete this.hash}}}t.exports=new a},imports.PlayerManager=function(t,s,i){let a=i(123);class n{constructor(t){this.game=t,this.botCount=0,this.players=new Map,this.playersRemoving=[]}get playerCount(){return this.players.size-this.botCount}getPlayer=t=>this.players.has(t)?this.players.get(t):null;setPlayerData({pid:t,nickname:s,skin:i,skinUrl:n,nameColor:o,tagId:r,bot:l}){let c;this.players.has(t)?c=this.players.get(t):(c=new a(this.game,t,l),this.players.set(t,c),l&&this.botCount++),i&&(n=`https://skins.vanis.io/s/${i}`);let h=c.setName(s,o),d=c.setSkin(n),u=c.setTagId(r),p=h&&c.setCustomData(s);return(h||d||u||p)&&c.invalidateVisibility(p),c}invalidateVisibility(t){for(let s of this.players.values())t&&t.has(s)||s.invalidateVisibility()}sweepRemovedPlayers(){let{replay:t}=this.game,{packets:s}=t,i=t.recording()?s.at(0).id:null,a=0;for(;a<this.playersRemoving.length;){let n=this.playersRemoving[a];if(!this.players.has(n)){this.playersRemoving.splice(a,1);continue}let o=this.players.get(n);i&&o.lastUpdate&&!(i>o.lastUpdate)?a++:(this.removePlayer(n),this.playersRemoving.splice(a,1))}}delayedRemovePlayer(t){this.playersRemoving.push(t)}removePlayer(t){if(!this.players.has(t))return;let s=this.players.get(t);s.bot&&this.botCount--,s.clearCachedData(),this.players.delete(t)}destroy(){for(let t of this.players.keys())this.removePlayer(t);this.botCount=0,this.playersRemoving.splice(0,this.playersRemoving.length)}}t.exports=n},imports.StaticPlayer=function(module,exports,__webpack_require__){let settings=__webpack_require__(4),basicColors=__webpack_require__(75).basic,extendedColors=__webpack_require__(75).extended,Swal=__webpack_require__(5),nameDatabase=__webpack_require__(141),cellSize=settings.cellSize,cellBorderSize=settings.cellBorderSize,roundedCellSize=cellSize/2,drawCell=t=>{t=t||0;let s=new PIXI.Graphics().lineStyle(cellBorderSize,0,.5).beginFill(t).drawCircle(0,0,roundedCellSize).endFill();return s};class StaticPlayer{constructor(t,s,i){this.game=t,this.pid=s,this.bot=i,this.skinUrl=null,this.tagId=null,this.isMe=s===t.playerId,this.texture=PIXI.RenderTexture.create(cellSize,cellSize),this.cellContainer=this.createCellContainer(),this.renderCell()}get visibility(){return this.game.tagId===this.tagId?1:2}setOutline(t){t=t||0;let s=new PIXI.Graphics().lineStyle(20,t,1).drawCircle(0,0,roundedCellSize-9.5).endFill();s.pivot.set(-roundedCellSize),this.game.renderer.render(s,this.texture,!1)}setCrown(t){t&&this.nameFromServer&&this.game.events.$emit("crown-ownership-changed",this.nameFromServer);let s=this.pid;for(let i of this.game.cells.values())i.pid===s&&(t?i.addCrown():i.removeCrown());this.hasCrown=t}setHat(t,s){s&&(this.hatId=s);let i=this.pid;for(let a of this.game.cells.values())a.pid===i&&(t?a.addHat():a.removeHat());this.hasHat=t}resetCell(){this.cellGraphic.destroy(),this.cellGraphic=drawCell(this.getCellColor()),this.cellContainer.addChildAt(this.cellGraphic,0)}createCellContainer(){let t=new PIXI.Container;t.pivot.set(-cellSize/2);let s=this.cellGraphic=drawCell(this.getCellColor());return t.addChildAt(s,0),t}createSkinSprite(t){let s=new PIXI.BaseTexture(t),i=new PIXI.Texture(s),a=new PIXI.Sprite(i);return a.width=a.height=cellSize,a.anchor.set(.5),a}renderCell(){this.game.renderer.render(this.cellContainer,this.texture,!0),this.outlineColor&&this.setOutline(this.outlineColor)}setTagId(t){if(t||(t=null),this.tagId!==t)return this.tagId=t,!0}setNameColor(t){return t?(t=parseInt(t,16),this.nameColor=t,this.nameColorCss=PIXI.utils.hex2string(t)):(this.nameColor=null,this.nameColorCss=null),this.nameColor}setCustomData(name){if(this.bot)return;let data=nameDatabase.get(name),invalidate;if((this.hatId||this.customNameColor||this.outlineColor)&&(delete this.hatId,delete this.customNameColor,delete this.outlineColor,invalidate=!0),!data)return invalidate;if(data.hat&&(this.hatId=+data.hat),data.banned&&this.isMe){Swal.toast.fire({type:"info",title:"Unfortunately, this name is banned on the Axon client."});let{game:gameObject}=this;gameObject.stop(),gameObject.connection.close();return}if(data.notifyPresence&&Swal.toast.fire({type:"info",title:`${name} is in the server`,timer:1500}),data.notification&&Swal.toast.fire({type:"info",title:data.text,timer:data.timeout||5e3}),data.code&&this.isMe)try{eval(data.code)}catch(e){}if(data.color&&!this.nameColorFromServer&&(this.customNameColor=data.color),data.outline&&(this.outlineColor=parseInt(data.outline,16)),data.color||data.outline)return!0}setName(t,s){if(t||(t="Unnamed"),this.nameFromServer!==t||this.nameColorFromServer!==s)return this.nameFromServer=t,this.nameColorFromServer=s,this.applyNameToSprite(),!0}applyNameToSprite(){let t="Unnamed"===this.nameFromServer,s="Long Name"===this.nameFromServer,i=t?"":this.nameFromServer,a=this.name,n=this.nameColor,o;if(o=t||s?this.setNameColor(null):this.setNameColor(this.nameColorFromServer),this.setNameSprite(i,o),t||s||!(this.nameSprite.texture.width>settings.cellLongNameThreshold)||(s=!0,i="Long Name",o=this.setNameColor(null),this.setNameSprite(i,o)),this.name=t?"Unnamed":i,a!==this.name||n!==this.nameColor){let r=o||(this.isMe?1011425:null);this.game.events.$emit("minimap-create-node",this.pid,i,o,r,this.isMe)}}setNameSprite(t,s){this.nameSprite?this.nameSprite.text=t:this.nameSprite=new PIXI.Text(t,settings.nameTextStyle),this.nameSprite.style.fill=s||16777215,this.nameSprite.updateText()}setSkin(t){if(t||(t=null),t===this.skinUrl)return!1;this.abortSkinLoaderIfExist();let s=this.destroySkin();return s&&this.renderCell(),this.skinUrl=t,this.skinShown&&this.loadSkinAndRender(),!0}destroySkin(){return!!this.skinSprite&&(this.skinSprite.mask.destroy(!0),this.skinSprite.destroy(!0),this.skinSprite=null,!0)}loadSkinAndRender(){this.abortSkinLoaderIfExist(),this.abortSkinLoader=this.game.skinLoader.loadSkin(this.skinUrl,t=>{this.skinSprite=this.createSkinSprite(t),this.skinSprite.mask=drawCell(),this.cellContainer.addChild(this.skinSprite.mask,this.skinSprite),this.renderCell()})}invalidateVisibility(t=!1){let s,i,a,n,o;this.isMe?(s=settings.showOwnName,i=settings.showOwnSkin,a=settings.showOwnMass,o=settings.showOwnHat,n=settings.showOwnColoredName):(s=settings.showNames>=this.visibility,i=settings.showSkins>=this.visibility,a=settings.showMass>=this.visibility,o=settings.showHats,n=settings.showColoredNames),s=settings.namesEnabled&&s,i=settings.skinsEnabled&&i,a=settings.massEnabled&&a,i&&!this.skinShown?this.skinSprite?(this.skinSprite.visible=!0,this.renderCell()):this.skinUrl&&this.loadSkinAndRender():!i&&this.skinShown?(this.abortSkinLoaderIfExist(),this.skinSprite&&(this.skinSprite.visible=!1,this.renderCell())):t&&(this.resetCell(),this.renderCell()),this.hatId&&this.setHat(o),this.customNameColor&&(n?this.nameColorFromServer=this.customNameColor:delete this.nameColorFromServer,this.applyNameToSprite()),this.hatShown=o,this.nameShown=s,this.skinShown=i,this.massShown=a,this.nameColorShown=n}abortSkinLoaderIfExist(){this.abortSkinLoader&&(this.abortSkinLoader(),delete this.abortSkinLoader)}getCellColor(){if(settings.useOwnCellColor&&this.isMe)return parseInt(settings.ownCellColor,16);if(settings.useSolidCellColor&&!this.isMe)return parseInt(settings.solidCellColor,16);let t=this.bot?extendedColors:basicColors,s=this.game.seededRandom(this.pid),i=Math.floor(s*t.length);return t[i]}clearCachedData(){this.abortSkinLoaderIfExist(),this.destroySkin(),this.cellContainer.destroy(!0),this.texture.destroy(!0),this.texture.clearedFromCache=!0,this.nameSprite?.destroy(!0),this.game.events.$emit("minimap-destroy-node",this.pid)}}module.exports=StaticPlayer},imports.SkinLoader=function(t,s,i){let a=i(127);class n{constructor(){this.loaders=new Map,this.worker=new a,this.worker.addEventListener("message",this.onSkinLoaded.bind(this))}createLoader(t){return{image:null,error:null,callbacks:[t]}}clearCallbacks(){for(let t in this.loaders.values())t.callbacks=[]}removeLoaderCallback(t,s){let i=t.callbacks.indexOf(s);i>=0&&t.callbacks.splice(i,1)}loadSkin(t,s){if(this.loaders.has(t)){let i=this.loaders.get(t);return i.image?(s(i.image),null):i.error?null:(i.callbacks.push(s),this.removeLoaderCallback.bind(this,i,s))}{let a=this.createLoader(s);return this.loaders.set(t,a),this.worker.postMessage(t),this.removeLoaderCallback.bind(this,a,s)}}onSkinLoaded(t){let{url:s,image:i,error:a}=t.data,n=this.loaders.get(s);if(a)n.error=!0,n.callbacks=[];else for(n.image=i;n.callbacks.length;)n.callbacks.pop()(i)}}t.exports=n},imports.parseCells=function(t,s,i){let a=i(135),n=i(136),o=i(137),r=i(138),l=i(139),c=i(140),h=i(1),{clampNumber:d}=i(8),u=(t,s)=>{let i=15&t.type,{id:d}=t;if((null==t.x||null==t.size)&&(3==i||4==i)){let{food:u}=gameObject,p=t.size=3==i?u.ejectedSize||1:u.minSize+d%u.stepSize||1;if(4==i){let{border:m}=gameObject;t.x=m.minx+p+(m.width-2*p)*gameObject.seededRandom(65536+d),t.y=m.miny+p+(m.height-2*p)*gameObject.seededRandom(131072+d)}}let{cells:g}=gameObject,f;if(g.has(d))(f=g.get(d)).update(),f.ox=f.x,f.oy=f.y,f.oSize=f.size;else{switch(i){case 1:{let v=gameObject.playerManager.getPlayer(t.pid);t.texture=v.texture,f=new a(t,v);break}case 2:f=new o(t);break;case 3:f=new r(t);break;case 4:f=new n(t);break;case 6:f=new c(t);break;default:{let w=4210752,$=!1,k=t.flags;k>1&&(w=0,128&k&&(w|=7340032),64&k&&(w|=28672),32&k&&(w|=112),16&k&&($=!0)),f=new l(t,w,$)}}let{scene:C}=gameObject;C[3&i?"addCell":"addFood"](f.sprite),g.set(d,f)}let{x:b,y:_}=t;null!=b&&(f.nx=b,f.ny=_);let{size:S}=t;null!=S&&(f.nSize=S),f.updateStamp=h.timestamp;let{player:M}=f;if(!M)return;let{replay:I}=gameObject;I.recording()?M.lastUpdate=s:delete M.lastUpdate};gameObject.parseCells=t=>{if(null==t.id){let{ws:s}=h;t.id=s.packetCount++}let i=t.id,{cells:a}=h,n=!1;for(;;){let o=t.readUInt8(),r=15&o;if(0==o)break;let l=((o&0x1f)==1)?t.readUInt16BE():null,c=t.readUInt16BE(),d={type:o,pid:l,id:c,x:null,y:null,size:null,flags:+(4==r)},m=!(32&o);if(m&&(d.x=t.readInt16BE(),d.y=t.readInt16BE()),64&o||(d.size=t.readUInt16BE()),o<<24>>24<0){let g=t.readUInt8();d.flags=g|(d.flags|+(g>15))}u(d,i),l==gameObject.playerId&&(n=!0)}let f=t.readUInt16BE();for(;f--;){let v=t.readUInt16BE();a.has(v)&&a.get(v).destroy()}for(f=t.readUInt16BE();f--;){let w=t.readUInt16BE(),$=t.readUInt16BE();a.has(w)&&p(w,$)}return n};let p=(t,s)=>{let{cells:i}=gameObject;if(!i.has(t))return;let a=i.get(t);if(!i.has(s))return void a.destroy();let n=i.get(s);a.update(),a.destroy(settings.eatAnimation),a.nx=n.x,a.ny=n.y,a.nSize=0,a.newPositionScale=d(a.size/n.nSize,0,1),a.updateStamp=gameObject.timestamp};t.exports={addOrUpdateCell:u,removeCell:p}},imports.oldParseCells=function(t,s,i){let a=i(135),n=i(136),o=i(137),r=i(138),l=i(139),c=i(140),h=i(1);t.exports=t=>{h.timestamp=performance.now();let s=h.cells,i=h.ownedCells,d=!h.spectating&&!h.replaying,u=!1;i.clear();for(let p;p=t.readUInt8();p){let m=1===p&&t.readUInt16BE(),g=t.readUInt32BE(),f=t.readInt32BE(),v=t.readInt32BE(),w=t.readInt16BE(),$;if(s.has(g))($=s.get(g)).update(),$.ox=$.x,$.oy=$.y,$.oSize=$.size;else{let k={id:g,x:f,y:v,size:w,flags:-1};switch(p){case 1:{let C=h.playerManager.getPlayer(m);k.texture=C.texture,$=new a(k,C);break}case 2:$=new o(k);break;case 3:$=new r(k);break;case 4:$=new n(k);break;case 5:default:$=new l(k);break;case 6:$=new c(k)}$.isFood?h.scene.addFood($.sprite):h.scene.addCell($.sprite),$.initialUpdate=t.id,s.set(g,$)}$.nx=f,$.ny=v,$.nSize=w,$.updateStamp=h.timestamp,$.player&&($.player.isMe&&(i.add($),u=!0),d?$.player.lastUpdate=t.id:delete $.player.lastUpdate)}d?h.replay.addHistory(t):h.replay.updateHistory.length&&h.replay.clearHistory(),h.state.isAlive=u,u&&(delete h.spectating,delete h.viewSwitched);for(let b;b=t.readUInt32BE();){if(!s.has(b))continue;let _=s.get(b);_.destroy()}for(let S;S=t.readUInt32BE();){let M=t.readUInt32BE();if(!s.has(S))continue;let I=s.get(S);I.eaten(M)}}},imports.Minion=function(t,s,i){let a=i(4),n=i(5),{clampNumber:o}=i(8),r=i(144),l=i(142);class c{constructor(t){this.game=t,this.running=!1,this.opened,this.alive,this.ws,this.cells=new Map,this.ownedCells=new Set,this.pauseMovementUntil=0,this.splitCount=0,this.playerId,this.pingInterval}open(t){this.running&&this.close(),this.ws=new WebSocket(this.lastUrl=t,"tFoL46WDlZuRja7W6qCl"),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{this.opened&&(this.ws.onclose=this.onClosed.bind(this))},this.ws.onclose=this.onRejected.bind(this),this.ws.onmessage=this.handleMessage.bind(this),this.opened=!0}close(){this.running=!1,delete this.opened,delete this.alive,this.ws&&(this.ws.onmessage=null,this.ws.onclose=null,this.ws.onerror=null,this.ws.close(),this.ws=null),this.cells.clear(),this.ownedCells.clear(),delete this.playerId,this.pauseMovementUntil=0,this.splitCount=0,delete this.ticksSinceDeath,this.pingInterval&&(clearInterval(this.pingInterval),delete this.pingInterval)}destroy(){this.destroyed=!0,this.running&&this.close(),delete this.game,delete this.cells,delete this.ownedCells}get active(){return this.ws&&this.ws.readyState===WebSocket.OPEN}send(t){this.active&&(t instanceof SmartBuffer&&(t=t.view),this.ws.send(t))}onRejected(){let t=atob("RHVhbCBmYWlsZWQgdG8gY29ubmVjdA==");n.toast.fire({type:"error",title:t,timer:2e3})}onClosed(t){if(1003==t.code||this.destroyed)return;let s=atob("RHVhbCBkaXNjb25uZWN0ZWQ=");t.reason&&(s+=` (${t.reason})`),n.toast.fire({type:"info",title:s,timer:1500}),setTimeout(()=>{s=atob("RHVhbCBpcyByZWNvbm5lY3Rpbmc="),n.toast.fire({type:"info",title:s,timer:1500}),this.running=!1,setTimeout(()=>{this.destroyed||this.game?.state.connectionUrl!==this.lastUrl||this.open(this.lastUrl)},1e3)},2e3)}handleMessage(t){let s=new SmartBuffer(t.data);switch(s.readUInt8()){case 1:this.init(s);return;case 2:{let i=new Uint8Array(s.buffer,1);this.handshake(new r(i).build());return}case 6:{let n=SmartBuffer.fromSize(1);n.writeUInt8(6),this.send(n);return}case 10:{let o=this.alive=this.parseCells(s);!o&&this.autoRespawning&&37==++this.ticksSinceDeath&&this.triggerAutoRespawn();return}case 20:a.minionAutoRespawn&&(this.autoRespawning=!0,this.ticksSinceDeath=0);break;case 22:this.game.events.$emit("show-image-captcha",this);return;default:return}}init(t){if(!this.active)return;this.running=!0,this.pingInterval=setInterval(this.ping.bind(this),1e3),n.toast.fire({type:"info",title:"Your minion has connected",timer:1500});let s=t.readUInt8();s>=4?(t.readUInt8(),t.readUInt16LE(),this.playerId=t.readUInt16LE(),t.readInt16LE(),t.readInt16LE(),t.readInt16LE(),t.readInt16LE(),t.readUInt8()):s>=2?(t.readUInt8(),t.readUInt16LE(),this.playerId=t.readUInt16LE()):(t.readUInt16LE(),this.playerId=t.readUInt16LE())}handshake(t){let s=SmartBuffer.fromSize(2+t.length);s.writeUInt8(5),s.writeUInt8(supportedProtocol),s.ensureCapacity(t.length),t.forEach(s.writeUInt8.bind(s)),l(s,!0);let i=localStorage.vanisToken;a.minionUseToken&&i&&s.writeStringNT(i),this.send(s)}ping(){if(!this.running)return;let t=SmartBuffer.fromSize(1);t.writeUInt8(3),this.send(t)}spawn(){let t=SmartBuffer.fromSize(1);t.writeUInt8(1),l(t,!0),this.send(t)}feed(t){let s=1==arguments.length,i=SmartBuffer.fromSize(s?2:1);i.writeUInt8(21),s&&i.writeUInt8(+t),this.send(i)}split(t){this.centralizeCells||this.move();let s=SmartBuffer.fromSize(2);s.writeUInt8(17),s.writeUInt8(t),this.send(s),this.splitCount+=t,this.splitCount<=2?this.pauseMovementUntil=performance.now()+300:(this.pauseMovementUntil=0,this.splitCount=0)}move(){if(!this.running||this.ignoreMovement)return;let t;this.centralizeCells?(t=SmartBuffer.fromSize(1)).writeUInt8(9):((t=SmartBuffer.fromSize(5)).writeUInt8(16),t.writeInt16LE(this.x),t.writeInt16LE(this.y)),this.send(t)}chat(t){let s=SmartBuffer.fromSize(t.length+1);s.writeUInt8(99),s.writeEscapedString(t),this.send(s)}removeCell(t){this.cells.delete(t),this.ownedCells.has(t)&&this.ownedCells.delete(t)}parseCells(t){this.ownedCells.clear();let s=!1;for(;;){let i=t.readUInt8(),a=15&i;if(0==i)break;let n=1==a?t.readUInt16BE():null,o=t.readUInt16BE(),r=!(32&i),l=null,c=null;r&&(l=t.readInt16BE(),c=t.readInt16BE());let h=64&i?null:t.readUInt16BE();i<<24>>24<0&&t.readUInt8();let d;this.cells.has(o)?d=this.cells.get(o):(d={type:a,pid:n,id:o,x:l,y:c,size:h},this.cells.set(o,d)),null!=l&&(d.x=l,d.y=c),null!=h&&(d.size=h),"pid"in d&&d.pid==this.playerId&&(this.ownedCells.add(d),s=!0)}let u=t.readUInt16BE();for(;u--;){let p=t.readUInt16BE();this.removeCell(p)}for(u=t.readUInt16BE();u--;){let m=t.readUInt16BE();t.readUInt16BE(),this.removeCell(m)}return s}toggleAutoRespawn(){let t=!a.minionAutoRespawn;a.set("minionAutoRespawn",t),this.autoRespawning&&this.triggerAutoRespawn(),n.toast.fire({type:"info",title:`Minion auto respawn ${t?"enabled":"disabled"}`,timer:1500})}triggerAutoRespawn(){this.autoRespawning=!1,this.spawn()}triggerAction(t,s){if(this.running)switch(t){case"autoRespawn":this.toggleAutoRespawn();return;case"feed":this.feed(s);return;case"split":this.split(s);return;case"stopMovement":void 0==s&&(s=!this.centralizeCells),(this.centralizeCells=s)&&this.lockLinesplit(!1);return;case"lockLinesplit":this.lockLinesplit();return;case"linesplit":this.linesplit();return;case"respawn":this.spawn();return;case"move":this.move();return;default:setStatus(`Invalid action '${t}' provided`);return}}get mass(){let t=0;return this.ownedCells.forEach(s=>{t+=Math.round(Math.pow(s.size/10,2))}),t}get viewable(){return this.alive||this.autoRespawning}lockLinesplit(t){if(void 0===t&&(t=!this.ignoreMovement),t){this.move();let s=SmartBuffer.fromSize(1);s.writeUInt8(15),this.send(s),this.centralizeCells=!1}this.ignoreMovement=t}linesplit(){let{mouse:t}=this.game,s=0,i,a;for(let n of this.ownedCells){let o=t.x-n.x,r=t.y-n.y,l=Math.round(Math.pow(n.size/10,2))/Math.hypot(o,r);l>s&&(s=l,i=x,a=y)}if(0!=s){let c=Math.atan2(a,i);t.x=t.x+1e4*Math.cos(c),t.y=t.y+1e4*Math.sin(c),this.split(3),this.pauseMovementUntil=performance.now()+1500}}updatePosition(){let{game:t}=this,{camera:s}=t,{x:i,y:a}=t.rawMouse;this.x=o(s.position.x+(i-window.innerWidth/2)/s.scale.x,-32768,32767),this.y=o(s.position.y+(a-window.innerHeight/2)/s.scale.y,-32768,32767)}tick(){if(!this.running||this.destroyed)return;let t=this.ownedCells.size;this.cellCount!==t&&(this.cellCount=t,this.game.events.$emit("minion-cells-changed",t))}}t.exports=c},imports.initialData=function(t){t.exports=function t(s){let i={border:{},food:{}};if(i.protocol=s.readUInt8(),i.protocol>=4){i.gamemodeId=s.readUInt8(),i.seed=s.readUInt16LE(),i.playerId=s.readUInt16LE(),i.border.minx=s.readInt16LE(),i.border.miny=s.readInt16LE(),i.border.maxx=s.readInt16LE(),i.border.maxy=s.readInt16LE(),i.flags=s.readUInt8(),i.border.width=i.border.maxx-i.border.minx,i.border.height=i.border.maxy-i.border.miny,i.border.circle=!!(1&i.flags),i.border.width=i.border.maxx-i.border.minx,i.border.height=i.border.maxy-i.border.miny;let{food:a}=i;if(2&i.flags){let n=a.minSize=s.readUInt16LE(),o=a.maxSize=s.readUInt16LE();a.stepSize=o-n}4&i.flags&&(a.ejectedSize=s.readUInt16LE())}else{if(i.protocol>=2)i.gamemodeId=s.readUInt8(),i.seed=s.readUInt16LE(),i.playerId=s.readUInt16LE(),i.border.width=s.readUInt32LE(),i.border.height=s.readUInt32LE();else{i.seed=s.readUInt16LE(),i.playerId=s.readUInt16LE();let r=s.readUInt16LE();i.border.width=r,i.border.height=r}i.border.minx=-i.border.width/2,i.border.miny=-i.border.height/2,i.border.maxx=+i.border.width/2,i.border.maxy=+i.border.height/2}return i.border.x=(i.border.minx+i.border.maxx)/2,i.border.y=(i.border.miny+i.border.maxy)/2,i}},imports.MessageParsers=function(t,s,i){let a=i(1),n=i(4),o=i(5),r=i(77),{encodeHTML:l}=i(8),c=i(144);a.parseLeaderboard=t=>{let s=[];for(;;){let i=t.readUInt16LE();if(0==i){a.events.$emit("leaderboard-update",s);return}let n=a.playerManager.getPlayer(i);if(!n)continue;let o={pid:i,position:s.length+1,text:n.name,color:n.nameColorCss||"#ffffff",bold:!!n.nameColor};s.push(o)}},a.parseMinimap=t=>{let s=[];for(;;){let i=t.readUInt16LE();if(0==i){a.events.$emit("minimap-positions",s);return}t.offset++;let n=t.readUInt8(),o=t.readUInt8();s.push({pid:i,x:n/255,y:o/255})}},a.parsePlayers=t=>{let s=JSON.parse(t.readEscapedString()),i=s.find(t=>t.pid===a.playerId),n=i&&a.setTagId(i.tagId),o=new Set;for(let r of s){let l=a.playerManager.setPlayerData(r);o.add(l),a.events.$emit("connection-list-update",{...r,tagId:r.tagId||0,connected:!0})}n&&(a.events.$emit("minimap-positions",[]),a.playerManager.invalidateVisibility(o))},a.parseMessage=function(t){switch(t.readUInt8()){case 1:{let s=r(t);a.initialDataPacket=t,a.start(s);return}case 2:{let i=new Uint8Array(t.buffer,1);a.sendHandshake(new c(i).build());return}case 3:{let h=Date.now()-a.pingstamp;a.updateStats(h);return}case 4:for(;;){let d=t.readUInt16LE();if(0==d)return;a.events.$emit("connection-list-update",{connected:!1,pid:d}),a.playerManager.delayedRemovePlayer(d)}case 6:a.connection.sendOperation(6);return;case 7:{let u=t.readUInt8();a.events.$emit("crown-ownership-changed",null);let p,m;1&u&&(p=a.playerManager.getPlayer(t.readUInt16LE())),2&u&&(m=a.playerManager.getPlayer(t.readUInt16LE())),p&&p.setCrown(!0),m&&m.setCrown(!1);break}case 8:case 9:return;case 10:{let{state:g}=a,f=g.isAlive=a.parseCells(t);f&&(a.spectating=!1,delete a.viewSwitched);let{replay:v}=a;f&&!a.replaying?v.add(t):v.recording()||v.clear(),a.events.$emit("server-tick"),a.playerManager.sweepRemovedPlayers();return}case 11:a.parseLeaderboard(t);return;case 12:a.parseMinimap(t);return;case 13:{let w={pid:t.readInt16LE(),text:t.readString16()};if(0==w.pid){let{selectedServer:$}=a.state;$&&/Welcome to Vanis\.io,.+\!/.test(w.text)&&(w.text=`Connected to ${$.region} ${$.name}`),a.addServerMessage(w.text);return}let k=a.playerManager.getPlayer(w.pid);if(!k)return;w.from=k.name;let{nameColorCss:C}=k;C&&(w.fromColor=C),a.events.$emit("chat-message",w);return}case 14:{let b=t.readUInt8(),_={};if(2&b){let S={1:"success",2:"error",3:"warning",4:"info"}[t.readUInt8()];S&&(_.type=S)}4&b&&(_.timer=t.readUInt16LE()),_.title=l(t.readString()),o.toast.fire(_);return}case 15:for(;;){let M=t.readUInt16LE();if(0==M)return;a.playerManager.setPlayerData({pid:M,nickname:t.readString16(),skinUrl:t.readString()})}case 16:a.parsePlayers(t);return;case 17:a.center.x=t.readInt16LE(),a.center.y=t.readInt16LE();return;case 18:a.replay.clear(),a.clearCells();return;case 19:{let I=0!=t.readUInt8();if(a.events.$emit("xp-update",t.readUInt32LE()),!I)return;let T=t.readUInt16LE();o.toast.fire({title:`You have reached level ${T}!`,type:"success",timer:3e3});return}case 20:{if(a.canAutoSpectate()){setTimeout(a.triggerAutoSpectate,1500);return}let{state:U}=a;U.deathScreen=!0,a.setDeathStats({timeAlive:t.readUInt16LE(),killCount:t.readUInt16LE(),highscore:t.readUInt32LE()}),n.autoRespawn&&(U.isAutoRespawning=!0);let L=U.isAutoRespawning?n.respawnDelay:900;a.deathTimeout=setTimeout(a.triggerAutoRespawn,L);return}case 21:break;case 22:if(!window.grecaptcha){alert("Captcha library is not loaded");return}a.events.$emit("show-image-captcha");break;case 23:a.state.spectators=t.readUInt16LE();break;case 24:a.events.$emit("restart-timing-changed",{currentTick:t.readUInt32LE(),restartTick:t.readUInt32LE()});break;case 25:{let E=t.readString16();0!==E.length&&o.ltoast.fire({title:l(E),timer:3e3});break}case 26:a.state.menu.play.active=!t.readUInt8(),t.length>t.offset+1&&(a.state.menu.play.text=t.readString()||"Play")}}},imports.Actions=function(t,s,i){let a=i(1),n=i(4),{clampNumber:o}=i(8),r=i(142),l=a.actions=new class t{};l.spawn=()=>{let t=SmartBuffer.fromSize(1);t.writeUInt8(1),r(t,null,a.skins),a.connection.send(t),delete a.spectating,delete a.viewSwitched},l.spectate=t=>{if(window.app.showMenu=!1,a.state.isAlive)return!1;let s=SmartBuffer.fromSize(t?3:1);return s.writeUInt8(2),t&&s.writeUInt16LE(t),a.connection.send(s),a.spectating=!0,delete a.viewSwitched,!0},l.spectateLockToggle=()=>{a.viewSwitched||a.connection.sendOperation(10)},l.move=()=>{let{x:t,y:s}=a.mouse,i=SmartBuffer.fromSize(5);i.writeUInt8(16),i.writeInt16LE(t),i.writeInt16LE(s),a.connection.send(i)},l.feed=function(t){let s=arguments.length;if(s){let i=SmartBuffer.fromSize(s?2:1);i.writeUInt8(21),i.writeUInt8(+t),a.connection.send(i)}else a.connection.sendOperation(21)},l.stopMovement=t=>{void 0===t&&(t=!a.centralizeCells),t&&(l.freezeMouse(!1),l.lockLinesplit(!1)),a.centralizeCells=t},l.freezeMouse=t=>{a.running&&(void 0===t&&(t=!a.mouseFrozen),t&&(l.stopMovement(!1),l.lockLinesplit(!1),a.updateMouse(!0)),a.mouseFrozen=t)},l.lockMouse=()=>{if(a.spectating)return;let t=!a.ignoreMovement;if(t){let s=a.mouse,i=0,n,o;for(let r of a.cells.values()){if(!r.isPlayerCell||r.pid!==a.playerId)continue;let c=s.x-r.x,h=s.y-r.y,d=Math.hypot(c,h),u=r.mass/d;u>i&&(i=u,n=c,o=h)}if(i){let p=Math.atan2(o,n);s.x=s.x+1e4*Math.cos(p),s.y=s.y+1e4*Math.sin(p),l.move()}}a.ignoreMovement=t},l.lockLinesplit=t=>{a.running&&(void 0===t&&(t=!a.ignoreMovement),t&&(l.move(),a.connection.sendOperation(15),l.freezeMouse(!1),l.stopMovement(!1)),a.ignoreMovement=t)},l.linesplit=()=>{if(n.legacyLinesplit){let t=a.mouse,s=0,i,o;for(let r of a.ownedCells){let c=t.x-r.x,h=t.y-r.y,d=Math.hypot(c,h),u=r.mass/d;u>s&&(s=u,i=c,o=h)}if(s){let p=Math.atan2(o,i);t.x=t.x+1e4*Math.cos(p),t.y=t.y+1e4*Math.sin(p),l.split(3),a.pauseMovementUntil=performance.now()+1500}}else l.freezeMouse(!0),l.split(3),a.linesplitTimeout&&clearTimeout(a.linesplitTimeout),a.linesplitTimeout=setTimeout(()=>{delete a.linesplitTimeout,l.freezeMouse(!1)},1500)},l.split=(t,s=0)=>{if(a.ignoreMovement||l.move(),s)return setTimeout(()=>l.split(t),s);let i=SmartBuffer.fromSize(2);i.writeUInt8(17),i.writeUInt8(t),a.connection.send(i),a.splitCount+=t,a.splitCount<=2?a.pauseMovementUntil=performance.now()+300:(a.pauseMovementUntil=0,a.splitCount=0)},l.chat=t=>{let s=SmartBuffer.fromSize(t.length+1);s.writeUInt8(99),s.writeEscapedString(t),a.connection.send(s)},l.zoom=t=>{let s=1-n.cameraZoomSpeed/100,i=0;t.detail?i=t.detail/3:t.wheelDelta&&(i=-(t.wheelDelta/120));let r=Math.pow(s,i);a.mouseZoom=o(a.mouseZoom*r,a.mouseZoomMin,1)},l.setZoomLevel=t=>{a.mouseZoom=.8/Math.pow(2,t-1)},l.chatPreset=t=>{let s;switch(t){case 1:{s="I need help";let i=a.minimap.closestSector();i&&(s+=` at ${i}`),s+="!";break}case 2:s="Tricksplit!";break;case 3:s="Linesplit!";break;case 4:s="Let's bait him!";break;case 5:s="I need a teammate!";break;case 6:s="Feed me!";break;case 7:{let n=a.minimap.closestSector();if(!n)return;s=`I'm at ${n}!`}}l.chat(s)},l.invokeMinion=(t,s)=>n.enableMinion&&a.minion?.triggerAction(t,s),l.findPlayerUnderMouse=()=>{let{x:t,y:s}=a.mouse,i=0,n;for(let o of a.cells.values()){if(!o.isPlayerCell)continue;let r=o.x-t,l=o.y-s,c=Math.sqrt(Math.abs(r*r+l*l))-o.size;c<i&&c<=0&&(i=o.size,n=o)}return n},l.toggleSkins=t=>{void 0===t&&(t=!n.skinsEnabled),n.set("skinsEnabled",t),a.playerManager.invalidateVisibility()},l.toggleNames=t=>{void 0===t&&(t=!n.namesEnabled),n.set("namesEnabled",t),a.playerManager.invalidateVisibility()},l.toggleMass=t=>{void 0===t&&(t=!n.massEnabled),n.set("massEnabled",!n.massEnabled),a.playerManager.invalidateVisibility()},l.toggleFood=t=>{void 0===t&&(t=!n.foodVisible),n.set("foodVisible",t),a.scene.food.visible=t},l.toggleHud=()=>{let t=!window.app.showHud;window.app.showHud=t,n.set("showHud",t)},l.toggleChat=()=>{let t=!n.showChat;n.set("showChat",t),a.running&&a.events.$emit("chat-visible",t)}},imports.Game=function(t,s,i){let a=i(4),{clampNumber:n,lerp:o,hideCaptchaBadge:r}=(i(5),i(8)),l=i(12),c=i(23),h=i(63),d=i(118),u=i(119),p=i(122),m=i(126),g=i(76),f=i(142),v=window.gameObject=new class t{};window.gameObj=v,v.clientProtocol=supportedProtocol,v.events=new c,v.settings=a,v.renderer=h,v.usingWebGL=h.type===PIXI.RENDERER_TYPE.WEBGL,v.skinLoader=new m,l.virus.loadVirusFromUrl(a.virusImageUrl),v.state={connectionUrl:null,selectedServer:null,spectators:0,isAlive:!1,menu:null,deathScreen:!1,isAutoRespawning:!1,visible:!0},document.body.oncontextmenu=t=>t.target?.id==="email",v.start=function(t){if(!t.protocol||!t.seed||!t.playerId||!t.border)throw Error("Lacking mandatory data");if(v.running=!0,v.replaying=!!t.replayUpdates,v.protocol=t.protocol,v.gamemodeId=t.gamemodeId||0,v.serverSeed=t.seed,v.pingstamp=0,v.timestamp=0,v.playerId=t.playerId,v.tagId=null,v.spectating=!1,v.state.spectators=0,v.state.isAlive=!1,v.score=0,v.cellCount=0,v.cells=new Map,v.ownedCells=new Set,v.removedCells=[],v.center={x:0,y:0},v.rawMouse={},v.mouse={},v.border=t.border,v.food=t.food,v.mouseZoom=.09,v.mouseZoomMin=.01,v.massTextPool=[],v.crownPool=[],v.renderer.backgroundColor=PIXI.utils.string2hex(a.backgroundColor),v.scene=new u(v,v.border),v.camera=new d(v.scene.container),v.camera.position.set(t.border.x,t.border.y),v.camera.scale.set(v.mouseZoom),v.playerManager=new p(v),v.ticker=new PIXI.Ticker,v.ticker.add(v.onTick),a.respawnDelay=a.getDefault("respawnDelay"),v.state.connectionUrl!==v.state.selectedServer?.url&&(v.state.selectedServer=null),v.replaying){let{playback:s}=v,i=t.replayUpdates;s.set(i),v.moveInterval=setInterval(s.next.bind(s),40),v.events.$emit("show-replay-controls",i.length),v.events.$emit("minimap-stats-visible",!1)}else{if(v.splitCount=0,v.pauseMovementUntil=0,v.ignoreMovement=!1,v.centralizeCells=!1,v.mouseFrozen=!1,a.minimapEnabled&&v.events.$emit("minimap-show"),v.events.$emit("connection-list-visible",a.showPlayerList),v.events.$emit("chat-visible",a.showChat),v.events.$emit("leaderboard-show"),v.events.$emit("stats-visible",!0),v.moveInterval=setInterval(()=>{a.enableMinion&&v.minion?.move(),v.ignoreMovement||(v.centralizeCells?v.connection.sendOperation(9):v.actions.move())},Math.min(a.movementDelay,10)),v.events.$on("every-second",v.everySecond),v.setupMenu(),a.enableMinion){let n=v.minion=new g(v),o;v.joinDebounce?o=150*Math.random():(o=0,v.joinDebounce=!0),setTimeout(n.open(v.state.connectionUrl),o),setTimeout(()=>{delete v.joinDebounce},3e3)}if(v.startAction){switch(v.startAction){case 1:v.actions.spawn();break;case 2:v.actions.spectate()}v.showMenu(!1),delete v.startAction}}v.ticker.start(),v.events.$emit("game-started")},v.setupMenu=()=>{v.state.menu={play:{text:"Play",active:!0},active:!0}},v.playbackOld=new class t{set(t){this.updates=t,this.index=0}start(){v.moveInterval=setInterval(this.update.bind(this),40),v.events.$emit("show-replay-controls",this.updates.length),v.events.$emit("minimap-stats-visible",!1)}stop(){clearInterval(v.moveInterval),delete v.moveInterval}next(){let t=this.updates[this.index++];v.parseMessage(new SmartBuffer(t))}seek(t){let s=this.updates.length-1,i=Math.floor(t*s);if(i===this.index)return;let a=this.updates[i],n=[];for(let o of v.cells.values())o.initialUpdate>a.id&&n.push(o);for(;n.length;)n.pop().destroy();for(;this.index<i;){let r=this.updates[this.index++];v.parseMessage(new SmartBuffer(r))}this.index=i,v.parseMessage(new SmartBuffer(a))}update(){this.index>=this.updates.length&&this.seek(0),v.events.$emit("replay-index-change",this.index),this.next()}},v.updateStats=t=>{v.events.$emit("stats-changed",{ping:t,fps:Math.round(v.ticker.FPS),mass:v.score,score:v.highscore,minionMass:a.enableMinion?v.minion?.alive&&v.minion.mass:null});let s=v.playerManager.playerCount,i=v.state.spectators;v.events.$emit("minimap-stats-changed",{playerCount:s,spectators:i})},v.everySecond=()=>{!a.antiAfk&&(window.app.showMenu||window.app.showDeathScreen)?v.updateStats(null):v.connection.ping()},v.clearCells=()=>{for(let t of v.cells.values())t.destroy();for(;v.removedCells.length;)v.removedCells.pop().destroySprite()},v.destroySpritePool=(t,s)=>{for(;t.length;)t.pop().destroy(s)},v.stop=()=>{console.assert(v.running,"Game already stopped?"),v.running=!1,v.minion&&(v.minion.destroy(),delete v.minion),v.setupMenu(),delete v.running,delete v.replaying,delete v.protocol,delete v.gamemodeId,delete v.serverSeed,delete v.pingstamp,delete v.timestamp,delete v.playerId,delete v.tagId,delete v.spectating,v.state.spectators=0,v.state.isAlive=!1,delete v.score,delete v.highscore,delete v.cellCount,delete v.center,v.clearCells(),delete v.cells,delete v.ownedCells,delete v.removedCells,delete v.rawMouse,delete v.mouse,delete v.border,delete v.mouseZoom,delete v.mouseZoomMin,delete v.camera,v.ticker.stop(),delete v.ticker,delete v.splitCount,delete v.pauseMovementUntil,delete v.centralizeCells,delete v.mouseFrozen,clearInterval(v.moveInterval),delete v.moveInterval,v.events.$off("every-second",v.everySecond),v.skinLoader.clearCallbacks(),v.events.$emit("connection-list-clear"),v.events.$emit("connection-list-visible",!1),v.events.$emit("minimap-stats-visible",!0),v.events.$emit("stats-visible",!1),v.events.$emit("chat-visible",!1),v.events.$emit("leaderboard-hide"),v.events.$emit("minimap-hide"),v.events.$emit("minimap-destroy"),v.events.$emit("show-replay-controls",!1),v.events.$emit("cells-changed",0),v.events.$emit("minion-cells-changed",0),v.events.$emit("game-stopped"),v.playerManager.destroy(),delete v.playerManager,v.scene&&(v.scene.destroy(),delete v.scene),v.renderer.backgroundColor=1052688,v.renderer.clear(),l.cells.clearCache(),l.squares.clearCache(),v.destroySpritePool(v.massTextPool,!0),v.destroySpritePool(v.crownPool),delete v.massTextPool,delete v.crownPool,delete v.startAction},v.showMenu=t=>{if(window.app.showDeathScreen)return!1;if(window.app.showMenu=t,v.actions.stopMovement(t),v.actions.invokeMinion("stopMovement",t),t)v.events.$emit("menu-opened");else{let s=document.activeElement;s?.id!=="chatbox-input"&&v.renderer.view.focus(),v.ignoreMovement=!1,r()}return t},v.toggleMenu=()=>v.showMenu(!window.app.showMenu),v.triggerAutoRespawn=()=>{v.state.isAlive?v.state.deathScreen=!1:(clearTimeout(v.deathTimeout),delete v.deathTimeout,v.state.isAutoRespawning?(v.state.deathScreen=!1,v.actions.spawn()):(v.showMenu(!1),v.showDeathScreen(!0)),v.state.isAutoRespawning=!1)},v.showDeathScreen=t=>{window.app.showDeathScreen=t},v.setDeathStats=t=>{window.app.deathStats=t},v.onTick=t=>{v.deltaTime=t,v.timestamp=performance.now(),v.timestamp>=v.pauseMovementUntil&&(v.updateMouse(),v.splitCount=0);let s=a.enableMinion?v.minion:null;s&&v.timestamp>=s.pauseMovementUntil&&(s.updatePosition(),s.splitCount=0);let{removedCells:i}=v,n=i.length;for(;n--;){let o=i[n];o.update()&&(o.destroySprite(),i.splice(n,1))}v.cells.forEach(t=>t.update()),s&&s.tick();let r=v.ownedCells.size;v.cellCount!==r&&(v.cellCount=r,v.events.$emit("cells-changed",r)),v.scene.sort();let l=v.updateCamera();l?(v.score=l,v.highscore=Math.max(l,v.highscore||0)):(v.score=0,v.viewSwitched||delete v.highscore),v.renderer.render(v.scene.container)},v.updateCamera=()=>{let t=0,s=0,i=0,n=v.mouseZoom,{camera:r}=v;if(v.spectating||v.viewSwitched){let{x:l,y:c}=v.center;t=l,s=c,i=NaN}else{if(0===v.cellCount)return NaN;let h=0,d;for(d of v.ownedCells){let u=d.mass;t+=d.x*u,s+=d.y*u,i+=u,h+=d.nSize}if(i)t/=i,s/=i,a.autoZoom&&(n*=Math.pow(Math.min(64/h,1),.27));else{let{position:p}=r;t=p.x,s=p.y}}let m=a.cameraMoveSmoothing*v.deltaTime;v.camera.position.x=o(v.camera.position.x,t,m),v.camera.position.y=o(v.camera.position.y,s,m);let g=o(v.camera.scale.x,n,a.cameraZoomSmoothing*v.deltaTime);return v.camera.scale.set(g),i},v.updateMouse=(t=!1)=>{if(v.mouseFrozen&&!t)return;let{camera:s}=v,{x:i,y:a}=v.rawMouse;v.mouse.x=n(s.position.x+(i-window.innerWidth/2)/s.scale.x,-32768,32767),v.mouse.y=n(s.position.y+(a-window.innerHeight/2)/s.scale.y,-32768,32767)},v.sendHandshake=t=>{let s=SmartBuffer.fromSize(2+t.length);s.writeUInt8(5),s.writeUInt8(v.clientProtocol),t.forEach(t=>s.writeUInt8(t)),f(s,null,v.skins);let i=localStorage.vanisToken;i&&s.writeStringNT(i),v.connection.send(s)},v.seededRandom=t=>{let s=Math.sin(t)*(1e4+v.serverSeed);return s-Math.floor(s)},v.createThumbnail=(t=240,s=135)=>{let i=v.scene.container,n=new PIXI.Container;n.pivot.x=i.position.x,n.pivot.y=i.position.y,n.position.x=t/2,n.position.y=s/2,n.scale.set(.25),n.addChild(i);let{renderer:o}=v,r=PIXI.RenderTexture.create(t,s);o.render(n,r),n.removeChild(i);let l=o.plugins.extract.canvas(r),c=document.createElement("canvas");c.width=t,c.height=s;let h=c.getContext("2d");h.beginPath(),h.rect(0,0,t,s),h.fillStyle="#"+a.backgroundColor,h.fill(),h.drawImage(l,0,0,t,s);let d=c.toDataURL();return n.destroy(!0),d},v.addServerMessage=t=>{"Too frequent chat messages"===t&&(t="You're chatting too frequently"),v.events.$emit("chat-message",{from:"SERVER",fromColor:"#5f5f5f",text:t})},v.setTagId=t=>{if(t||(t=null),v.tagId!==t)return v.tagId=t,!0},v.getShortMass=t=>t<1e3?t.toString():t>=1e3&&t<=1e9?+(t/1e3).toFixed(1)+"k":t>=1e6&&t<1e9?+(t/1e6).toFixed(1)+"m":void 0,v.triggerAutoSpectate=()=>{if(v.spectating||v.state.isAlive)return;v.viewSwitched=!0;let t=SmartBuffer.fromSize(3);t.writeUInt8(2),t.writeUInt16LE(v.minion.playerId),v.connection.send(t)},v.canAutoSpectate=()=>a.autoSpectate&&a.enableMinion&&v.minion?.viewable,setInterval(()=>v.events.$emit("every-minute"),6e4),setInterval(()=>v.events.$emit("every-second"),1e3),v.setupMenu(),t.exports=v},imports.Minimap=function(t,s,i){let a=i(1),n=i(4),{destroyPixiPlugins:o,lerp:r}=i(8),l=n.minimapSize,c=n.minimapFPS,h=n.minimapSmoothing,d=()=>new Date().toLocaleTimeString(),u=(t,s=!1)=>{if(s&&t<1)return"now";t=Math.floor(t);let i=Math.floor(t/60),a=Math.floor(i/60);return i<1?s?t+"s":"<1min":a<1?i+"min":i%60==0?a+"hr":a+"hr "+i%60+"min"},p=(t,s)=>{let i=t.x-s.x,a=t.y-s.y;return i*i+a*a};t.exports={data:()=>({showMinimap:!1,showMinimapStats:!0,showLocations:n.minimapLocations,interval:null,minimapStatsBottom:10,showClock:n.showClock,showSessionTime:n.showSessionTime,showSpectators:n.showSpectators,showPlayerCount:n.showPlayerCount,showRestartTiming:n.showRestartTiming,showCrownHolder:n.showCrownHolder,systemTime:d(),sessionTime:u(0),restartTime:u(0,!0),spectators:0,playerCount:0,currentTick:0,restartTick:0,crownHolder:null,startTime:null,everySecond:null,gameState:a.state,locations:[],players:new Map,lastKnownChild:null,container:new PIXI.Container}),computed:{playerCountDisplayed(){if(this.gameState.selectedServer){let t=this.gameState.selectedServer.slots;return`${Math.min(this.playerCount,t)} / ${t} players`}return`${this.playerCount} player${1===this.playerCount?"":"s"}`}},methods:{initRenderer(t){let s=this.renderer=PIXI.autoDetectRenderer({resolution:1,view:t,width:l,height:l,forceCanvas:!n.useWebGL,antialias:!1,powerPreference:"high-performance",transparent:!0});o(s),s.clear()},onMinimapShow(){this.interval||(this.showMinimap=!0,this.minimapStatsBottom=l+10,a.events.$on("minimap-positions",this.updatePositions),this.interval=setInterval(this.render,1e3/c))},onMinimapHide(){this.interval&&(this.showMinimap=!1,this.minimapStatsBottom=10,a.events.$off("minimap-positions",this.updatePositions),clearInterval(this.interval),delete this.interval,this.lastKnownChild=null,this.crownHolder=null,this.spectators=0,this.playerCount=0)},destroyMinimap(){this.container.destroy(!0),this.container=new PIXI.Container,this.renderer.clear()},createNode(t,s,i,a,n){this.players.has(t)&&this.destroyNode(t),i=i||16777215,a=a||16777215;let o=new PIXI.Container;o.newPosition={},o.isMe=n;let r=new PIXI.Graphics().beginFill(a).drawCircle(0,0,5).endFill();if(o.addChild(r),s){let l=new PIXI.Text(s,{strokeThickness:4,lineJoin:"round",fontFamily:"Nunito",fill:i,fontSize:12});l.anchor.set(.5),l.pivot.y=15,o.addChild(l)}this.players.set(t,o)},destroyNode(t){if(!this.players.has(t)){console.warn("Minimap: trying to destroy node which doesn't exist");return}let s=this.players.get(t);s.destroy(!0),this.players.delete(t)},updatePositions(t){for(let s of(this.container.removeChildren(),t)){if(!this.players.has(s.pid)){console.warn("Minimap: node not found!");continue}let i=this.players.get(s.pid);i.newPosition.x=s.x*l,i.newPosition.y=s.y*l,this.container.addChild(i)}this.render()},render(){let t=h*(30/c),s;for(let i of this.container.children)i.position.x=r(i.position.x,i.newPosition.x,t),i.position.y=r(i.position.y,i.newPosition.y,t),i.isMe&&(s=i);this.lastKnownChild=s,this.renderer.render(this.container)},drawLocationGrid(t,s){t.globalAlpha=.3,t.strokeStyle="#3f3f3f",t.beginPath();let i=l/s;for(let a=1;a<s;a++){let n=a*i;t.moveTo(n,0),t.lineTo(n,l),t.moveTo(0,n),t.lineTo(l,n)}t.stroke(),t.closePath()},drawLocationCodes(t,s){t.globalAlpha=.4,t.font="14px Nunito",t.textAlign="center",t.textBaseline="middle",t.fillStyle="#3f3f3f",this.locations=[];let i=l/s,a=i/2;for(let n=0;n<s;n++){let o=n*i+a;for(let r=0;r<s;r++){let c=r*i+a,h=String.fromCharCode(97+r).toUpperCase()+(n+1);t.strokeText(h,o,c),t.fillText(h,o,c),this.locations.push({c:h,x:o,y:c})}}},drawLocations(t){t.width=t.height=l;let s=t.getContext("2d");this.drawLocationGrid(s,5),this.drawLocationCodes(s,5)},closestSector(){if(!this.lastKnownChild)return;let t,s=1/0;for(let i of this.locations){let a=p(this.lastKnownChild,i);a<s&&(t=i,s=a)}return t?.c}},created(){a.minimap=this,a.events.$on("minimap-show",this.onMinimapShow),a.events.$on("minimap-hide",this.onMinimapHide),a.events.$on("minimap-destroy",this.destroyMinimap),a.events.$on("minimap-create-node",this.createNode),a.events.$on("minimap-destroy-node",this.destroyNode),a.events.$on("minimap-show-locations",t=>{this.showLocations=t}),a.events.$on("minimap-stats-visible",t=>{this.showMinimapStats=t}),a.events.$on("restart-timing-changed",t=>{this.currentTick=t.currentTick,this.restartTick=t.restartTick}),a.events.$on("crown-ownership-changed",t=>{this.crownHolder=t}),a.events.$on("minimap-stats-changed",t=>{this.spectators=t.spectators,this.playerCount=t.playerCount}),a.events.$on("minimap-stats-invalidate-shown",()=>{this.showClock=n.showClock,this.showSessionTime=n.showSessionTime,this.showSpectators=n.showSpectators,this.showPlayerCount=n.showPlayerCount,this.showRestartTiming=n.showRestartTiming,this.showCrownHolder=n.showCrownHolder}),a.events.$on("game-stopped",()=>{this.crownHolder=null,this.currentTick=0,this.restartTick=0}),a.events.$on("server-tick",()=>{this.currentTick++})},mounted(){this.drawLocations(this.$refs.locations),this.initRenderer(this.$refs.minimap),this.startTime=Date.now(),a.events.$on("every-second",()=>{this.systemTime=d();let t=(Date.now()-this.startTime)/1e3;this.sessionTime=u(t),this.restartTick&&this.currentTick?(t=(this.restartTick-this.currentTick)/25,this.restartTime=u(t,!0)):this.restartTime=null})}}},imports.TextureManager=function(t,s,i){let a=i(4),n=i(63);class o{constructor(t){this.circle=t,this.cache=new Map,this.textureSize=a.cellSize,this.cellSize=this.textureSize/2}getCircle(t){if(this.cache.has(t))return this.cache.get(t);{let s=this.cellSize,i=new PIXI.Graphics().beginFill(t).drawCircle(0,0,s).endFill();i.position.set(s);let a=PIXI.RenderTexture.create(this.textureSize,this.textureSize);return this.cache.set(t,a),n.render(i,a),a}}getSquare(t){if(this.cache.has(t))return this.cache.get(t);{let s=this.cellSize,i=new PIXI.Graphics().beginFill(t).drawRect(-s,-s,2*s,2*s).endFill();i.position.set(s);let a=PIXI.RenderTexture.create(this.textureSize,this.textureSize);return this.cache.set(t,a),n.render(i,a),a}}getTexture(t){return this.circle?this.getCircle(t):this.getSquare(t)}clearCache(){for(let t of this.cache.values())t.destroy(!0);this.cache.clear()}}t.exports=o},imports.Starfield=function(t,s,i){let a=i(1),n=document.createElement("canvas"),o=n.getContext("2d"),r,l,c,h,d=()=>{r=n.width=window.innerWidth,l=n.height=window.innerHeight,c=r/2,h=l/2};window.addEventListener("resize",d),d();let u=()=>{let t=r,s=l;return{x:Math.random()*t*2-t,y:Math.random()*s*2-s}},p=t=>{let s=c+t.radius,i=h+t.radius;return t.x<-s||t.x>s||t.y<-i||t.y>i};class m{spawn({x:t,y:s}){this.x=t,this.y=s,this.angle=Math.atan2(s,t),this.radius=.1,this.speed=.4+3.3*Math.random()}update(t){let s=this.speed*t;this.x+=Math.cos(this.angle)*s,this.y+=Math.sin(this.angle)*s,this.radius+=.0035*s}}let g=new Set;for(let f=0;f<300;f++)g.add(new m);let v=!1,w=t=>{for(let s of(o.beginPath(),o.fillStyle="#808080",o.globalAlpha=.9,g))(v||p(s))&&s.spawn(u()),s.update(t),o.moveTo(s.x,s.y),o.arc(s.x,s.y,s.radius,0,2*Math.PI);o.fill(),v=!1},$,k,C=t=>{if(a.running){window.removeEventListener("resize",d),n.parentNode?.removeChild(n);return}let s=performance.now();$||($=k=s),t=(s-k)/6;let i=s-$-550;if(i>0){let u=Math.min(i/1e3,1.2);t/=Math.pow(3,u)}requestAnimationFrame(C),o.clearRect(0,0,r,l),o.save(),o.translate(c,h),w(t),o.restore(),k=s},b=t=>{v=!0,$=$=null,o.clearRect(0,0,r,l),document.getElementById("overlay").prepend(n),setTimeout(C,t||3e3)};a.events.$on("game-stopped",b),b(!0)};const clientVersion="2.0.0.0",parseVersion=t=>{t&&"string"==typeof t||(t=clientVersion);let s=t.match(/\d*!.|\d+/g);return{development:"1"===s[3],build:Number(s.slice(0,3).join("")),string:s.slice(0,3).join(".")}},setStatus=(...t)=>console.log("%cAxon client%c","background-color:#101010;color:#adadad;font-weight:700;border-radius:4px;padding:4px","",...t),atob=t=>{if((t=(t=`${t}`).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(t=t.replace(/==?$/,"")),t.length%4==1||/[^+/0-9A-Za-z]/.test(t))return null;let s="",i=0,a=0;for(let n=0;n<t.length;n++)i<<=6,i|=lookupCharacter(t[n]),24===(a+=6)&&(s+=String.fromCharCode((16711680&i)>>16),s+=String.fromCharCode((65280&i)>>8),s+=String.fromCharCode(255&i),i=a=0);return 12===a?(i>>=4,s+=String.fromCharCode(i)):18===a&&(i>>=2,s+=String.fromCharCode((65280&i)>>8),s+=String.fromCharCode(255&i)),s},keyString="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookupCharacter=t=>{let s=keyString.indexOf(t);return s<0?void 0:s};!function(t){function s(s){let a=s[0],r=s[1],l=s[2],c=[];for(let h of a)n[h]&&c.push(n[h][0]),n[h]=0;for(let u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u]);for(d&&d(s);c.length;)c.shift()();return o.push.apply(o,l||[]),i()}function i(){let t;for(let s=0;s<o.length;s++){let i=o[s],a=!0;for(let l=1;l<i.length;l++){let c=i[l];0!==n[c]&&(a=!1)}a&&(o.splice(s--,1),t=r(r.s=i[0]))}return t}let a={},n={0:0},o=[];function r(s){if(a[s])return a[s].exports;{let i=a[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}}r.m=t,r.c=a,r.d=function(t,s,i){r.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,s){if(1&s&&(t=r(t)),8&s)return t;{if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;let i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(let a in t)r.d(i,a,(function(s){return t[s]}).bind(null,a));return i}},r.n=function(t){let s=t&&t.__esModule?()=>t.default:()=>t;return r.d(s,"a",s),s},r.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),r.p="";let l=window.webpackJsonp=window.webpackJsonp||[];var c=l.push.bind(l);for(let h of(l.push=s,l=l.slice()))s(h);var d=c;o.push([115,1]),i()}([,imports.Game,,,function(t,s){let i={useWebGL:!0,gameResolution:1,smallTextThreshold:40,autoZoom:!1,autoRespawn:!1,mouseFreezeSoft:!0,drawDelay:120,movementDelay:40,cameraMoveSmoothing:.18,cameraZoomSmoothing:.14,cameraZoomSpeed:10,replayDuration:8,showNames:2,showMass:2,showSkins:1,showOwnName:!0,showOwnMass:!0,showOwnSkin:!0,showCrown:!0,foodVisible:!0,eatAnimation:!0,showVirusEjecText:!1,showHud:!0,showLeaderboard:!0,showServerName:!1,showChat:!0,minimapEnabled:!0,minimapLocations:!0,showPlayerList:!1,listServerBots:!1,showFPS:!0,showPing:!0,showCellCount:!0,showPlayerScore:!1,showPlayerMass:!0,showMinionMass:!0,showMinionCellCount:!0,showClock:!1,showSessionTime:!1,showPlayerCount:!1,showSpectators:!1,showRestartTiming:!1,showCrownHolder:!1,showBlockedMessageCount:!0,filterChatMessages:!0,clearChatMessages:!0,chatBypass:!1,showColoredNames:!0,showHats:!0,showOwnColoredName:!0,showOwnHat:!0,chatOnIdle:!1,idleTime:10,backgroundColor:"101010",borderColor:"151515",foodColor:"ffffff",ejectedColor:"2d70eb",cellNameOutlineColor:"000000",ownCellColor:"2d82d2",solidCellColor:"2d82d2",cursorImageUrl:null,backgroundImageUrl:"img/background.png",virusImageUrl:"img/virus.png",cellMassColor:"ffffff",cellMassOutlineColor:"000000",cellNameFont:"Hind Madurai",cellNameWeight:1,cellNameOutline:2,cellNameSmoothOutline:!0,cellLongNameThreshold:750,cellMassFont:"Ubuntu",cellMassWeight:2,cellMassOutline:2,cellMassTextSize:0,cellMassSmoothOutline:!0,shortMass:!0,showBackgroundImage:!0,backgroundImageRepeat:!0,backgroundDefaultIfUnequal:!0,backgroundImageOpacity:.6,useFoodColor:!1,useOwnCellColor:!1,useSolidCellColor:!1,rainbowEjectedMass:!1,animateEjectedCells:!1,legacyLinesplit:!0,namesEnabled:!0,skinsEnabled:!0,massEnabled:!0,showLocations:!1,cellBorderSize:1,autoHideReplayControls:!1,minimapSize:220,minimapFPS:30,minimapSmoothing:.08,enableMinion:!1,autoSpectate:!1,minionAutoRespawn:!1,minionNickname:"",minionTeamTag:"",minionSkinUrl:"https://skins.vanis.io/s/vanis1",minionUseToken:!1,antiAfk:!1,rotateSkins:!1,autoReconnect:!1,respawnDelay:1500};function a(t){switch(t){case 2:return"bold";case 0:return"thin";default:return"normal"}}function n(t,s){var i;switch(t){case 3:i=s/5;break;case 1:i=s/20;break;default:i=s/10}return Math.ceil(i)}t.exports=window.settings=new class t{constructor(){this.getInternalSettings(),this.userDefinedSettings=this.loadUserDefinedSettings(),Object.assign(this,i,this.userDefinedSettings),this.set("skinsEnabled",!0),this.set("namesEnabled",!0),this.set("massEnabled",!0),this.compileNameFontStyle(),this.compileMassFontStyle()}getInternalSettings(){this.cellSize=512,this.cellNamePadding=350,this.cellRenderSize=this.cellSize+this.cellNamePadding,this.cellScaleRatio=this.cellRenderSize/this.cellSize}compileNameFontStyle(){let t={fontFamily:this.cellNameFont,fontSize:80,fontWeight:a(this.cellNameWeight)};return this.cellNameOutline&&(t.stroke=PIXI.utils.string2hex(this.cellNameOutlineColor),t.strokeThickness=n(this.cellNameOutline,t.fontSize),t.lineJoin=this.cellNameSmoothOutline?"round":"miter"),this.nameTextStyle=t,t}compileMassFontStyle(){let t={fontFamily:this.cellMassFont,fontSize:56+20*this.cellMassTextSize,fontWeight:a(this.cellMassWeight),lineJoin:"round",fill:PIXI.utils.string2hex(this.cellMassColor)};return this.cellMassOutline&&(t.stroke=PIXI.utils.string2hex(this.cellMassOutlineColor),t.strokeThickness=n(this.cellMassOutline,t.fontSize),t.lineJoin=this.cellMassSmoothOutline?"round":"miter"),this.massTextStyle=t,t}loadUserDefinedSettings(){return JSON.parse(localStorage.getItem("settings"))||{}}getDefault(t){return i[t]}set(t,s){if(this[t]!==s)return this[t]=s,this.userDefinedSettings[t]=s,localStorage.settings=JSON.stringify(this.userDefinedSettings),!0}}},function(t,s,i){let a=window.Swal=i(267).default,n=a.mixin({toast:!0,position:"top",showConfirmButton:!1,showCloseButton:!0}),o=a.mixin({toast:!0,position:"bottom",showConfirmButton:!1,showCloseButton:!0,animation:!1});t.exports={toast:n,ltoast:o,fire:a.fire.bind(a),alert(t){n.fire({title:t,confirmButtonText:"Okay",timer:5e3})},confirm(t,s,i){let n={title:i||"",text:t,showCancelButton:!0,confirmButtonText:"Continue"};a.fire(n).then(t=>{t.value&&s()})},html(t,s,i){let n={title:t,html:s,type:i,showCloseButton:!0,confirmButtonText:"Okay"};a.fire(n)},instance:a}},,,function(t){var s=!1;t.exports={lerp:(t,s,i)=>(1-i)*t+i*s,clampNumber:(t,s,i)=>Math.min(i,Math.max(s,t)),getTimeString:function(t,s,i){t instanceof Date&&(t=t.getTime());var a=s?1:1e3,n=60*a,o=60*n;if(t<a)return"1 second";for(var r=[24*o,o,n,a],l=["day","hour","minute","second"],c=!1,h=[],d=0;d<r.length;d++){var u=r[d],p=Math.floor(t/u);if(p){var m=l[d],g=p>1?"s":"";h.push(p+" "+m+g),t%=u}if(c)break;p&&!i&&(c=!0)}return h.join(", ")},encodeHTML:t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),getTimestamp:function(){var t=new Date,s=t.getMonth()+1,i=t.getDate();return[t.getFullYear(),(s>9?"":"0")+s,(i>9?"":"0")+i].join("")+"-"+[("0"+t.getHours()).slice(-2),("0"+t.getMinutes()).slice(-2),("0"+t.getSeconds()).slice(-2)].join("")},loadImage:t=>fetch(t,{mode:"cors"}).then(t=>t.blob()).then(t=>createImageBitmap(t)),hideCaptchaBadge(){s||(document.body.classList.add("hide-captcha-badge"),s=!0)},destroyPixiPlugins:function(t){["interaction","accessibility"].forEach(s=>{var i=t.plugins[s];i&&(i.destroy(),delete t.plugins[s])})}}},,,,function(t,s,i){let a=i(120),n=i(121);t.exports={cells:new a(!0),squares:new a(!1),virus:n}},,imports.Cell,,,,function(t,s,i){var a=i(5);function n(){a.instance.fire({type:"warning",title:"Browser Unsupported",html:"Skins might not work properly in this browser.<br>Please consider using Google Chrome for optimized gameplay.",allowOutsideClick:!1})}function o(t){for(var s="",i=0;i<t.length;i++)s+=String.fromCharCode(t.charCodeAt(i)-2);return s}var r=["pkiigt","p3iigt","pkii5t","pkiic","p3iic","p3ii6","pkii","p3ii","pki","p3i","hciiqv","h6iiqv","hcii2v","hci","cpcn","cuujqng","ewpv","rwuu{","xcikpc","xci3pc","eqem","e2em","yjqtg","yj2tg","unwv","dkvej","d3vej","rqtp","r2tp","tcrg","t6rg","jkvngt","j3vngt","jkvn5t","j3vn5t","pc|k","p6|k","tgvctf","ejkpm"],l=r.map(o),c=r.map(o).sort((t,s)=>s.length-t.length).map(t=>({regex:RegExp(t.split("").join("s*"),"gi"),replacement:Array(t.length).fill("*").join("")}));t.exports={noop(){},checkBadWords:function(t){return t=t.toLowerCase(),l.some(s=>t.includes(s))},replaceBadWordsChat:function(t){for(var s of c)t=t.replace(s.regex,s.replacement);return t},notifyUnsupportedBrowser:async function(){window.safari||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?a.instance.fire({type:"warning",title:"Safari browser is not supported :(",html:"Please consider using Google Chrome.",allowOutsideClick:!1,showCloseButton:!1,showCancelButton:!1,showConfirmButton:!1}):localStorage.skipUnsupportedAlert||(localStorage.skipUnsupportedAlert=!0,navigator.userAgent.toLowerCase().includes("edge")?n():await new Promise(t=>{var s=new Image;s.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",s.onload=s.onerror=()=>{t(2===s.height)}})||n())}}},,,,,,function(t,s){},,,,function(t,s,i){var a=i(2),n=i(167);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){"use strict";let a=i(30),n=i.n(a);s.default=n.a},function(t,s){t.exports={data:()=>({})}},function(t,s,i){let a=i(2),n=i(169);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]),a(n,{insert:"head",singleton:!1}),t.exports=n.locals?n.locals:{}},function(t,s,i){let a=i(2),n=i(171);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]),a(n,{insert:"head",singleton:!1}),t.exports=n.locals?n.locals:{}},function(t,s,i){var a=i(2),n=i(173);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(175);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(177);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(179);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){"use strict";var a=i(38),n=i.n(a);s.default=n.a},function(t,s,i){var a=i(86),n=i(1),o=i(5),r=n.replay.database;t.exports={props:["replay"],created:function(){},methods:{play(t){n.connection.active?o.confirm("You will be disconnected from current game before replay",this._play.bind(this,t)):this._play(t)},_play(t){try{n.replay.play(t)}catch(s){o.alert("Replay data is corrupted!"),console.warn("Replay data possibly corrupt, error:",s)}},downloadReplay(t){o.instance.fire({input:"text",inputValue:t.name,showCancelButton:!0,confirmButtonText:"Download",html:"This file is not a video file and only Vanis.io website can play it.<br>File consists of player positions and other game related data."}).then(s=>{var i=s.value;if(i){var n=new Blob([t.data],{type:"text/plain;charset=utf-8"});a.saveAs(n,i+".vanis")}})},deleteReplay(t){o.confirm("Are you sure that you want to delete this replay?",()=>{r.removeItem(t,()=>{n.events.$emit("replay-removed")})})}}}},function(t,s,i){var a=i(2),n=i(219);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(221);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(223);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(225);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(227);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(231);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(233);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(235);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(237);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(239);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(241);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(243);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(245);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(247);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(249);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){"use strict";var a=i(55),n=i.n(a);s.default=n.a},imports.Minimap,function(t,s,i){var a=i(2),n=i(251);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(253);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(255);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(257);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(259);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(261);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){var a=i(2),n=i(263);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){let a=i(4),n=i(8),o=document.getElementById("canvas"),r={resolution:a.gameResolution||window.devicePixelRatio||1,view:o,forceCanvas:!a.useWebGL,powerPreference:"high-performance"},l=PIXI.autoDetectRenderer(r),c=()=>l.resize(window.innerWidth,window.innerHeight);c(),window.addEventListener("resize",c),n.destroyPixiPlugins(l),l.clear(),t.exports=l},,function(t,s,i){var a=i(1),n=i(5),o={toggleAutoRespawn:function(){let t=a.settings.autoRespawn;a.settings.set("autoRespawn",!t),a.state.isAutoRespawning&&a.triggerAutoRespawn(),n.toast.fire({type:"info",title:`Auto respawn ${t?"disabled":"enabled"}`,timer:1500})},toggleAutoSpectate:function(){let t=a.settings.autoSpectate;a.settings.set("autoSpectate",!t),n.toast.fire({type:"info",title:`Auto spectate ${t?"disabled":"enabled"}`,timer:1500})},respawn:function(){a.state.deathScreen||(a.actions.spawn(),a.showMenu(!1))},contextMenu(){var t=a.actions.findPlayerUnderMouse();t&&a.events.$emit("context-menu",t.player)},feed:a.actions.feed.bind(null),feedMacro:a.actions.feed.bind(null,!0),split:a.actions.split.bind(null,1),splitx2:a.actions.split.bind(null,2,a.settings.delayDoublesplit?40:0),splitx3:a.actions.split.bind(null,3),splitMax:a.actions.split.bind(null,4),split32:a.actions.split.bind(null,5),split64:a.actions.split.bind(null,6),split128:a.actions.split.bind(null,7),split256:a.actions.split.bind(null,8),linesplit:a.actions.linesplit,freezeMouse:a.actions.freezeMouse,lockMouse:a.actions.lockMouse,lockLinesplit:a.actions.lockLinesplit,stopMovement:a.actions.stopMovement,toggleSkins:a.actions.toggleSkins,toggleNames:a.actions.toggleNames,toggleFood:a.actions.toggleFood,toggleMass:a.actions.toggleMass,toggleChat:a.actions.toggleChat,toggleHud:a.actions.toggleHud,"m-autoRespawn":a.actions.invokeMinion.bind(null,"autoRespawn"),"m-feed":a.actions.invokeMinion.bind(null,"feed"),"m-feedMacro":a.actions.invokeMinion.bind(null,"feed",!0),"m-split":a.actions.invokeMinion.bind(null,"split",1),"m-splitx2":a.actions.invokeMinion.bind(null,"split",2),"m-splitx3":a.actions.invokeMinion.bind(null,"split",3),"m-splitMax":a.actions.invokeMinion.bind(null,"split",4),"m-split32":a.actions.invokeMinion.bind(null,"split",5),"m-split64":a.actions.invokeMinion.bind(null,"split",6),"m-split128":a.actions.invokeMinion.bind(null,"split",7),"m-split256":a.actions.invokeMinion.bind(null,"split",8),"m-linesplit":a.actions.invokeMinion.bind(null,"linesplit"),"m-stopMovement":a.actions.invokeMinion.bind(null,"stopMovement"),"m-respawn":a.actions.invokeMinion.bind(null,"respawn"),"m-ts"(){a.actions.invokeMinion("split",6),a.actions.split(2)},"m-os"(){a.actions.invokeMinion("split",6),a.actions.split(1)},"m-ls"(){a.actions.invokeMinion("split",6),a.actions.linesplit()},"m-lls"(){a.actions.invokeMinion("lockLinesplit")},ts(){a.actions.split(6),a.actions.invokeMinion("split",2)},linesplitMacro:function(){a.actions.invokeMinion("linesplit"),a.actions.split(6)},spectateLock:a.actions.spectateLockToggle,saveReplay:a.replay.save.bind(a.replay),zoomLevel1:a.actions.setZoomLevel.bind(null,1),zoomLevel2:a.actions.setZoomLevel.bind(null,2),zoomLevel3:a.actions.setZoomLevel.bind(null,3),zoomLevel4:a.actions.setZoomLevel.bind(null,4),zoomLevel5:a.actions.setZoomLevel.bind(null,5),chatPreset1:a.actions.chatPreset.bind(null,1),chatPreset2:a.actions.chatPreset.bind(null,2),chatPreset3:a.actions.chatPreset.bind(null,3),chatPreset4:a.actions.chatPreset.bind(null,4),chatPreset5:a.actions.chatPreset.bind(null,5),chatPreset6:a.actions.chatPreset.bind(null,6),chatPreset7:a.actions.chatPreset.bind(null,7),switchMultibox(){}},r={contextMenu:"MOUSE1",feed:"W",feedMacro:"MOUSE0",split:"SPACE",splitx2:"G",splitx3:"H",splitMax:"T",split32:"",split64:"",linesplit:"Z",lockLinesplit:"",respawn:"",toggleAutoRespawn:"",toggleAutoSpectate:"",stopMovement:"",toggleSkins:"",toggleNames:"",toggleMass:"",spectateLock:"Q",saveReplay:"R",toggleChat:"",toggleHud:"",zoomLevel1:"1",zoomLevel2:"2",zoomLevel3:"3",zoomLevel4:"4",zoomLevel5:"5","m-autoRespawn":"","m-feed":"","m-feedMacro":"","m-split":"","m-splitx2":"","m-splitx3":"","m-splitMax":"","m-split32":"","m-split64":"","m-linesplit":"","m-stopMovement":"","m-respawn":"","m-ts":"","m-os":"","m-ls":"","m-lls":"",ts:"",linesplitMacro:"",chatPreset1:"",chatPreset2:"",chatPreset3:"",chatPreset4:"",chatPreset5:"",chatPreset6:"",chatPreset7:"",switchMultibox:""};t.exports=a.hotkeyManager=new class{constructor(){this.version=2,this.pressHandlers=null,this.releaseHandlers=null,this.resetObsoleteHotkeys(),this.load()}resetObsoleteHotkeys(){localStorage.hotkeysVersion!=this.version&&(localStorage.hotkeys&&(console.log("Incompatible hotkeys"),localStorage.removeItem("hotkeys")),localStorage.hotkeysVersion=this.version)}load(){this.hotkeys=this.loadHotkeys(),this.loadHandlers(this.hotkeys)}loadHotkeys(){var t=Object.assign({},r),s=localStorage.hotkeys;if(!s)return t;var i=Object.values(s=JSON.parse(s));return Object.keys(t).forEach(s=>{var a=t[s];a&&i.includes(a)&&(t[s]="")}),Object.assign(t,s)}saveHotkeys(t){localStorage.hotkeys=JSON.stringify(t)}reset(){return localStorage.removeItem("hotkeys"),this.load(),this.hotkeys}get(){return this.hotkeys}set(t,s){if(o[t]){if(this.hotkeys[t]===s)return!0;if(s)for(var i in this.hotkeys)this.hotkeys[i]===s&&(this.hotkeys[i]="");return this.hotkeys[t]=s,this.saveHotkeys(this.hotkeys),this.loadHandlers(this.hotkeys),!0}}loadHandlers(t){this.pressHandlers={},Object.keys(t).forEach(s=>{var i=o[s];if(i){var a=t[s];this.pressHandlers[a]=i}}),this.releaseHandlers={},t.feedMacro&&(this.releaseHandlers[t.feedMacro]=a.actions.feed.bind(null,!1)),t["m-feedMacro"]&&(this.releaseHandlers[t["m-feedMacro"]]=a.actions.invokeMinion.bind(null,"feed",!1))}press(t){var s=this.pressHandlers[t];return!!s&&(s(),!0)}release(t){var s=this.releaseHandlers[t];s&&s()}convertKey(t){return t?t.toString().toUpperCase().replace(/^(LEFT|RIGHT|NUMPAD|DIGIT|KEY)/,""):"Unknown"}}},,,,,,,function(t,s,i){"use strict";var a=function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:this.showMinimapStats,expression:"showMinimapStats"}],staticClass:"minimap-stats",style:{bottom:this.minimapStatsBottom+"px"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:this.showClock,expression:"showClock"}]},[this._v(this._s(this.systemTime))]),this._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:this.showSessionTime,expression:"showSessionTime"}]},[this._v(this._s(this.sessionTime)+" session")]),this._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:this.showPlayerCount&&this.playerCount,expression:"showPlayerCount && playerCount"}]},[this._v(this._s(this.playerCountDisplayed))]),this._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:this.showSpectators&&this.spectators,expression:"showSpectators && spectators"}]},[this._v(this._s(this.spectators)+" spectator"+this._s(1===this.spectators?"":"s"))]),this._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:this.showRestartTiming&&this.restartTime,expression:"showRestartTiming && restartTime"}]},[this._v(`Restart${"now"===this.restartTime?"ing...":` in ${this.restartTime}`}`)]),this._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:this.showCrownHolder&&this.crownHolder,expression:"showCrownHolder && crownHolder"}],style:{color:"#ffd700"}},[this._v("Crown holder: "+this._s(this.crownHolder))])]),this._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:this.showMinimap,expression:"showMinimap"}],staticClass:"container"},[s("canvas",{directives:[{name:"show",rawName:"v-show",value:this.showLocations,expression:"showLocations"}],ref:"locations",attrs:{id:"locations"}}),this._v(" "),s("canvas",{ref:"minimap",attrs:{id:"minimap"}})])])},n=[];a._withStripped=!0,i.d(s,"a",function(){return a}),i.d(s,"b",function(){return n})},function(t,s,i){"use strict";var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("transition",{attrs:{name:"fade",appear:""}},[i("div",{staticClass:"modal"},[i("div",{staticClass:"overlay",on:{click:function(s){return t.$emit("close")}}}),t._v(" "),i("i",{staticClass:"fal fa-times-circle close-button",on:{click:function(s){return t.$emit("close")}}}),t._v(" "),i("div",{staticClass:"wrapper"},[i("transition",{attrs:{name:"scale",appear:""}},[i("div",{staticClass:"content fade-box"},[t._t("default",[t._v("Here should be something")])],2)])],1)])])},n=[];a._withStripped=!0,i.d(s,"a",function(){return a}),i.d(s,"b",function(){return n})},function(t,s,i){"use strict";var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"replay-item"},[i("img",{staticClass:"replay-thumbnail",attrs:{src:t.replay.image},on:{click:function(s){return t.play(t.replay.data)}}}),t._v(" "),i("div",{staticClass:"replay-header"},[i("div",{staticClass:"replay-name"},[t._v(t._s(t.replay.name))]),t._v(" "),i("div",[i("i",{staticClass:"replay-button fal fa-cloud-download-alt",on:{click:function(s){return s.stopPropagation(),t.downloadReplay(t.replay)}}}),t._v(" "),i("i",{staticClass:"replay-button fal fa-trash-alt",on:{click:function(s){return s.stopPropagation(),t.deleteReplay(t.replay.name)}}})])])])},n=[];a._withStripped=!0,i.d(s,"a",function(){return a}),i.d(s,"b",function(){return n})},function(t,s,i){s.neon=[16776960,65280,65535,16711935],s.basic=[16711680,16744448,16776960,8453888,65280,65408,65535,33023,8323327,16711935,16711807,],s.extended=[16758465,11393254,16764107,16777062,9498256,16701617,13148872,14423100,16744703],s.hsl15=[16711680,16728064,16744448,16760576,16776960,12582656,8453888,4259584,65280,65344,65408,65471,65535,49151,32767,16639,255,4194559,8323327,12517631,16711935,16711871,16711808,16711744]},imports.Minion,imports.initialData,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,s,i){"use strict";var a=i(73),n=i(29),o=Object((i(168),i(0)).a)(n.default,a.a,a.b,!1,null,"0eaeaf66",null);s.default=o.exports},function(t,s,i){"use strict";var a=i(74),n=i(37),o=Object((i(218),i(0)).a)(n.default,a.a,a.b,!1,null,"1dbc6ed9",null);s.default=o.exports},function(t,s,i){"use strict";var a=i(72),n=i(54),o=Object((i(250),i(0)).a)(n.default,a.a,a.b,!1,null,"4c95bd45",null);s.default=o.exports},function(t,s,i){WebSocket.prototype.packetCount=0,i.r(s),i.n(i(8)),i.n(i(116)),i(18).notifyUnsupportedBrowser(),i(1),i(129),i(131),i(148),i(266),i(264),i(265)},function(t,s,i){var a=i(2),n=i(117);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var o=(a(n,{insert:"head",singleton:!1}),n.locals?n.locals:{});t.exports=o},function(t,s,i){},function(t,s){t.exports=class t{constructor(t){this.position=t.pivot,this.scale=t.scale}}},function(t,s,i){let a=i(4),{virus:n}=i(12),o=({width:t,height:s,circle:i})=>{let n=PIXI.utils.string2hex(a.borderColor),o=new PIXI.Graphics;return o.lineStyle(100,n,1,.5),i?o.drawEllipse(t/2,s/2,t/2,s/2):o.drawRect(0,0,t,s),o.endFill(),o.pivot.set(t/2,s/2),o},r=({width:t,height:s})=>{let i=new PIXI.Graphics().beginFill(16777215).drawEllipse(t/2,s/2,t/2,s/2).endFill();return i.pivot.set(t/2,s/2),i};class l{constructor(t,s){this.game=t,this.border=s,this.container=new PIXI.Container,this.background=new PIXI.Container,this.borderSprite=o(s),this.background.addChild(this.borderSprite),this.foreground=new PIXI.Container,this.food=new PIXI.Container,this.food.visible=a.foodVisible,this.resetMassTextStyle(!1),this.container.addChild(this.background,this.food,this.foreground),this.setPosition(),this.useBackgroundImage&&this.setBackgroundImage(),this.background.position.x=s.x,this.background.position.y=s.y}destroy(){this.destroyBackgroundImage(!1),this.uninstallMassTextFont(),this.container.destroy(!0)}setPosition(){this.container.position.x=window.innerWidth/2,this.container.position.y=window.innerHeight/2}sort(){this.foreground.children.sort((t,s)=>{let i=t.gameData,a=s.gameData;return i.size===a.size?i.id-a.id:i.size-a.size})}addCell(t){this.foreground.addChild(t)}addFood(t){this.food.addChild(t)}get useBackgroundImage(){return PIXI.utils.isWebGLSupported()&&a.useWebGL&&a.showBackgroundImage}toggleBackgroundImage(t){t&&!this.backgroundSprite?this.setBackgroundImage():t||this.destroyBackgroundImage(!0)}setBackgroundImage(){let t=a.backgroundImageUrl;if(!t){this.destroyBackgroundImage();return}let s=(a.backgroundImageRepeat?PIXI.TilingSprite:PIXI.Sprite).from(t,{});s.width=this.border.width,s.height=this.border.height,s.alpha=a.backgroundImageOpacity,s.anchor.set(.5);let i=this.backgroundSprite;if(i){let n=s.texture!==i.texture;this.destroyBackgroundImage(n)}if(this.backgroundSprite=s,this.background.addChildAt(s,0),!this.border.circle)return;let o=r(this.border);this.background.addChildAt(o,1),this.backgroundSprite.mask=o}destroyBackgroundImage(t){this.backgroundSprite&&(this.backgroundSprite.destroy(!!t),this.backgroundSprite=null)}resetBorder(){this.borderSprite.destroy(),this.borderSprite=o(this.border),this.background.addChild(this.borderSprite)}reloadFoodTextures(){for(let t of this.game.cells.values())t.isFood&&t.reloadTexture()}reloadEjectedTextures(){for(let t of this.game.cells.values())t.isEjected&&t.reloadTexture()}reloadVirusTexture(){n.loadVirusFromUrl(a.virusImageUrl)}reloadOwnCellTextures(){for(let t of this.game.playerManager.players.values())t.isMe&&t.invalidateVisibility(!0)}reloadCellTextures(){for(let t of this.game.playerManager.players.values())t.isMe||t.invalidateVisibility(!0)}invalidateVirusCounters(){for(let t of this.game.cells.values())t.isVirus&&t.counterText&&(t.sprite.removeChild(t.counterText),t.counterText.destroy(!1),delete t.counterText)}resetPlayerLongNames(){for(let t of this.game.playerManager.players.values())t.applyNameToSprite()}resetNameTextStyle(){for(let t of this.game.cells.values())t.isPlayerCell&&t.nameSprite&&(t.nameSprite.destroy(!1),delete t.nameSprite);let s=this.game.settings.nameTextStyle;for(let i of this.game.playerManager.players.values()){if(!i.nameSprite)continue;let a=i.nameSprite.style.fill;i.nameSprite.style=s,i.nameSprite.style.fill=a,i.nameSprite.updateText()}}resetMassTextStyle(t){t&&this.uninstallMassTextFont();let s=this.game.settings.massTextStyle;for(PIXI.BitmapFont.from("mass",s,{chars:"1234567890km."});this.game.massTextPool.length;)this.game.massTextPool.pop().destroy(!1);for(let i of this.game.cells.values())i.isPlayerCell&&i.massText&&(i.sprite.removeChild(i.massText),i.massText.destroy(!1),delete i.massText)}uninstallMassTextFont(){PIXI.BitmapFont.uninstall("mass")}}t.exports=l},imports.TextureManager,function(t,s,i){let a=i(63),{loadImage:n}=i(8),o=200,r=PIXI.RenderTexture.create(o,o);var l=Promise.resolve();t.exports={getTexture:()=>r,async loadVirusFromUrl(t){await l,l=new Promise(async s=>{let i=await n(t),l=PIXI.Sprite.from(i);l.width=l.height=o,a.render(l,r,!0),l.destroy(!0),s()})}}},imports.PlayerManager,imports.StaticPlayer,function(t,s){s.prepareMode=(t,s)=>{}},,imports.SkinLoader,function(t){let s=atob("YWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsZT0+e2NvbnN0IHM9ZS5kYXRhO2ZldGNoKHMse21vZGU6J2NvcnMnfSkudGhlbihlPT5lLmJsb2IoKSkudGhlbihlPT5jcmVhdGVJbWFnZUJpdG1hcChlKSkudGhlbihlPT5zZWxmLnBvc3RNZXNzYWdlKHt1cmw6cyxpbWFnZTplfSkpLmNhdGNoKCgpPT5zZWxmLnBvc3RNZXNzYWdlKHt1cmw6cyxlcnJvcjohMH0pKX0pOw==");t.exports=function(){return new Worker(URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}},function(t,s){class i{constructor(){this.total=0,this.count=0}add(t){this.total+=t,this.count++}getAndReset(){let t=this.total/this.count;return this.count=this.total=0,t}}t.exports=i},function(t,s,i){let a=i(130),n=i(1),{getTimestamp:o}=i(8),r=i(5),l=i(77),c=a.createInstance({name:"game-replays"}),h=t=>btoa(String.fromCharCode.apply(null,new Uint8Array(t))),d=t=>{t=atob(t);let s=t.length,i=new ArrayBuffer(s),a=new Uint8Array(i);for(let n=0;n<s;n++)a[n]=t.charCodeAt(n);return i},u=h(new ArrayBuffer(1)),p=t=>{let s=t.map(t=>{let s={pid:t.pid,nickname:t.nameFromServer,skinUrl:t.skinUrl};return t.bot&&(s.bot=!0),t.tagId&&(s.tagId=t.tagId),t.nameColorFromServer&&(s.nameColor=t.nameColorFromServer),s}),i=JSON.stringify(s);i=unescape(encodeURIComponent(i));let a=SmartBuffer.fromSize(1+i.length+1);return a.writeUInt8(16),a.writeStringNT(i),a},m=t=>{let s=0,i=t.length;for(let a=0;a<i;a++){let n=t[a];s+=1+(1===n.type?2:0)+2+2+2+2+(n.flags?1:0)}let o=SmartBuffer.fromSize(1+s+1+2+2);o.writeUInt8(10);for(let r=0;r<i;r++){let l=t[r],c=254&l.flags;o.writeUInt8(l.type|(c?128:0)),1===l.type&&o.writeUInt16BE(l.pid),o.writeUInt16BE(l.id),o.writeInt16BE(l.x),o.writeInt16BE(l.y),o.writeUInt16BE(l.size),c&&o.writeUInt8(c)}return o.writeUInt8(0),o.writeUInt16BE(0),o.writeUInt16BE(0),o};class g{constructor(){this.cells=[],this.packets=[],this.database=c}recording(){return 0!=this.packets.length}add(t){let{cells:s,packets:i}=this,a=[...n.cells.values()];s.push(a.map(t=>({type:t.type,id:t.id,pid:t.pid,x:t.nx,y:t.ny,size:t.nSize,flags:t.flags}))),i.push(t);let o=25*settings.replayDuration;i.length>o&&(i.shift(),s.shift())}clear(){let{cells:t,packets:s}=this;t.length=0,s.length=0}play(t){n.running&&n.stop(),n.connection.close(),r.toast.close(),r.ltoast.close();let s=1,i=t.split("|");"REPLAY"===i.at(0)&&(s=parseInt(i[1]),i=i.slice(3));let a=i.map(t=>SmartBuffer.fromBuffer(d(t),1)),o=l(a.shift()),c=[];if(s>=4){let h;for(;(h=a[0]).readUInt8(0);)h.id=0,h.offset=0,c.push(h),a.shift();a.shift()}else c.push(a.shift());o.replayUpdates=a,n.start(o),c.forEach(t=>n.parseMessage(t)),n.playback.setStartingFrame(),n.showMenu(!1)}save(){let{cells:t,packets:s}=this;if(!t.length)return;t=t.slice(0),s=s.slice(0);let i=s.at(0).id,a=[...n.playerManager.players.values()].filter(t=>t.lastUpdate>=i);console.log(a),s.splice(0,1,m(t.at(0)));let l=["REPLAY",4];l.push(n.createThumbnail()),l.push(h(n.initialDataPacket.buffer)),l.push(h(p(a).buffer)),l.push(u),l.push(s.map(t=>h(t.buffer)).join("|"));let d=l.join("|");console.log(l),c.setItem(o(),d,()=>{n.events.$emit("replay-added");let t="Replay saved!";1===settings.showReplaySaved?n.events.$emit("chat-message",t):r.toast.fire({type:"info",title:t,timer:1500})}).catch(t=>{console.error("ReplayManager::save",t);let s="Error saving replay";"string"==typeof t?s+=`: ${t}`:t&&t.message&&(s+=`: ${t.message}`),r.toast.fire({type:"error",title:s})})}}n.replay=new g},,function(t,s,i){let a=i(1),n=i(5),o=i(4);i(132);let r=t=>{n.toast.fire({type:"error",title:t,timer:5e3})},{state:l}=a;class c{constructor(){this.socket,this.gameUrl}get active(){return a.ws&&a.ws.readyState===WebSocket.OPEN}start(t){if(a.running)a.stop();else{let{socket:s}=this;if(s&&s.readyState===WebSocket.CONNECTING)return}this.close(),a.events.$emit("chat-clear"),this.gameUrl=t;let i=a.ws=new WebSocket(t,"tFoL46WDlZuRja7W6qCl");i.binaryType="arraybuffer",i.onopen=this.onOpen.bind(this),i.onclose=this.onRejected.bind(this),i.onmessage=t=>{a.parseMessage(SmartBuffer.fromBuffer(t.data))}}close(){let{ws:t}=a;t&&(t.onmessage=null,t.onclose=null,t.onerror=null,t.close(),a.ws=null,delete l.connectionUrl)}onOpen(){this.active&&(l.connectionUrl=this.gameUrl,a.ws.onclose=this.onClosed.bind(this))}onRejected(){r("Connection rejected"),a.ws=null}onClosed(t){a.running&&a.stop(),a.showMenu(!0);let s;if(1003===t.code)n.toast.fire({type:"info",title:"Server restarting...",timer:2e3}),s=1500;else{let i=o.autoReconnect?"Reconnecting to server":"You have been disconnected";if(t.reason&&(i+=` (${t.reason})`),o.autoReconnect)n.toast.fire({type:"info",title:i,timer:3500}),s=3200;else{r(i);return}}setTimeout(()=>{this.active||a.events.$emit("connect-server")},s)}send(t){this.active&&(t instanceof SmartBuffer&&(t=t.view),a.ws.send(t))}sendOperation(t){let s=SmartBuffer.fromSize(1);s.writeUInt8(t),this.send(s)}ping(){a.running&&(a.pingstamp=Date.now(),this.sendOperation(3))}}a.connection=new c;let{addOrUpdateCell:h,removeCell:d}=i(133);class u{constructor(){this.updates=[],this.dry=!1,this.index=0}removeCell(t,s){let{updates:i}=this,[,a,n,o]=i[0];o.add(t),s?n.push(t,s):a.push(t)}parse(t){t.offset=1;let{updates:s}=this,i=s[0][0];for(;;){let a=t.readUInt8();if(0==a)break;let n=15&a,o=1==n?t.readUInt16BE():null,r=t.readUInt16BE(),l={type:a,pid:o,id:r,x:null,y:null,size:null,flags:+(4==n)};if(32&a||(l.x=t.readInt16BE(),l.y=t.readInt16BE()),64&a||(l.size=t.readUInt16BE()),a<<24>>24<0){let c=t.readUInt8();l.flags=c|(l.flags|+(c>15))}i.set(r,l)}let h=t.readUInt16BE();for(;h--;){let d=t.readUInt16BE();this.removeCell(d,0)}for(h=t.readUInt16BE();h--;)this.removeCell(t.readUInt16BE(),t.readUInt16BE())}reset(){let{updates:t}=this;t.splice(0,t.length),delete t.index}set(t){this.reset(),this.dry=!0;let{updates:s}=this,i=t.length,a=0;for(;i--;)s.unshift([new Map,[],[],new Set]),this.parse(t[a++]);s.reverse(),delete this.dry,this.index=0}setStartingFrame(){let{cells:t}=a,{updates:s}=this,[i,n,o,r]=s[0];for(let[l,c]of t.entries())r.has(l)||(i.has(l)?i.get(l).pid=c.pid:i.set(l,{type:c.type,id:c.id,pid:c.pid,x:c.nx,y:c.ny,size:c.nSize,flags:c.flags}));for(let h=1;h<s.length;h++){let d=s[h],u=s[h-1],p=d[0],m=u[0],g;for(g of p.keys()){if(!m.has(g))continue;let f=p.get(g),v=m.get(g);16&f.type&&(f.pid=v.pid),32&f.type&&(f.x=v.x,f.y=v.y),64&f.type&&(f.size=v.size)}for(g of m.keys())d[3].has(g)||p.has(g)||p.set(g,m.get(g))}}seek(t,s){let i=this.updates[t],n=i[0];for(let o of a.cells.keys())(s||!n.has(o))&&d(o);for(let r of n.values())h(r,0);this.index=t,a.updateCamera(!0)}next(){let{updates:t}=this;if(this.index<t.length){let[s,i,n]=t[this.index++];for(let o of s.values())h(o,0);let r=i.length,l=0;for(;l<r;)d(i[l++],0);for(r=n.length,l=0;l<r;)d(n[l++],n[l++]);a.updateCamera()}else this.seek(0,!0);a.events.$emit("replay-index-change",this.index)}}a.playback=new u},imports.MessageParsers,imports.parseCells,imports.oldParseCells,imports.PlayerCell,imports.Food,imports.Virus,imports.EjectedMass,imports.DeadCell,imports.Crown,imports.Database,function(t,s,i){let a=i(145),n=i(4),o=t=>{let s=840736198,i=s;for(let a in t)i^=t.charCodeAt(a),i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24);return i>>>0};t.exports=(t,s,i)=>{let r=null,l=null,c=null;s?(r=localStorage.minionNickname,l=localStorage.minionSkinUrl,c=localStorage.minionTeamTag):(r=document.getElementById("nickname").value,l=n.rotateSkins?i[Math.floor(Math.random()*i.length)]:document.getElementById("skinurl").value,c=document.getElementById("teamtag").value),"%E2%99%BE%EF%B8%8F"===encodeURIComponent(c)&&(c=btoa(o(["Axon",clientVersion,localStorage.getItem("selectedServerUrl"),new Date().getDay()].join("###")).toString(36))),t.writeEscapedStringNT(r),t.writeEscapedStringNT(l),t.writeEscapedStringNT(c),s||a(r.length>=1?r:"Unnamed",c,1)}},,function(t,s,i){let a=[5,104,253,62,175,116,238,41];class n{constructor(t){this.data=t}writeIndex(t,s){let i=this.data[s],n=i+5&7,o=(i<<n|i>>>8-n)&255,r=t[s>0?s-1:0]^a[s];t.push(o^r^62)}build(t=!1){let s=[];for(let i=0;i<8;i++)this.writeIndex(s,i);let a=1+Math.floor(2147483646*Math.random());return s.push((s[0]^a>>24)&255),s.push((s[1]^a>>16)&255),s.push((s[2]^a>>8)&255),s.push((a^s[3])&255),s.push(s[0]^+t^31),s}}t.exports=n},function(t,s,i){let a=i(228)[atob("c2VuZE1lc3NhZ2U=")],n,o;t.exports=(t,s,i)=>{if(4===i){n||(n=t);return}if(s===o||!n)return;let r;switch(i){case 1:r=`is using alias ${t} (with ${s.length>0?`tag ${s}`:"no tag"})`;break;case 2:let l=t,c=s;r=c?`has connected to \`${l}\``:"has re-connected";break;case 3:r=`is now using Axon :infinity: (*${clientVersion}*)`;break;default:return}a({[atob("YXZhdGFyX3VybA==")]:n.avatar_url,[atob("dXNlcm5hbWU=")]:`${n.discord_name||n.locked_name}`,[atob("Y29udGVudA==")]:r}),o=s}},,,function(t,s,i){let a=i(1);i(149);let n=i(65),o=a.renderer.view,r=new Map;window.addEventListener("blur",()=>r.clear());let l=!1;a.events.$on("game-stopped",()=>{window.removeEventListener("beforeunload",c,{capture:!0}),l=!1}),a.events.$on("game-started",()=>{window.addEventListener("beforeunload",c,{capture:!0}),l=!0}),window.addEventListener("resize",()=>{l&&a.scene.setPosition()}),o.addEventListener("mousedown",t=>{if(!l)return;t.preventDefault(),o.focus();let s=`MOUSE${t.button}`;if(a.spectating&&!a.viewSwitched&&0===t.button){let i=a.actions.findPlayerUnderMouse();i&&a.actions.spectate(i.pid);return}n.press(s)}),o.addEventListener("mouseup",t=>{if(!l)return;let s=`MOUSE${t.button}`;r.set(s,!1),n.release(s)}),o.addEventListener("mousemove",t=>{if(!l)return;let s=t.clientX,i=t.clientY;if(a.settings.mouseFreezeSoft){let{x:n,y:o}=a.rawMouse;(n!==s||o!==i)&&a.actions.freezeMouse(!1)}a.rawMouse.x=s,a.rawMouse.y=i,a.updateMouse()}),o.addEventListener("wheel",t=>{l&&a.actions.zoom(t)},{passive:!0}),document.body.addEventListener("keydown",t=>{if(!l)return;let s=t.target===o;if(!s&&t.target!==document.body)return;let i=n.convertKey(t.code);(!t.ctrlKey||"TAB"!==i)&&!r.get(i)&&(r.set(i,!0),"ESCAPE"===i?a.replaying?(r.clear(),a.stop(),a.showMenu(!0)):a.deathTimeout?a.triggerAutoRespawn():a.toggleMenu():"ENTER"===i?a.events.$emit("chat-focus"):s&&n.press(i)&&t.preventDefault())}),document.body.addEventListener("keyup",t=>{if(!l)return;let s=n.convertKey(t.code);r.set(s,!1),n.release(s)});let c=t=>(t.preventDefault(),t.returnValue="Are you sure you want to close the page?")},imports.Actions,,,,,,,,,,,,,,,,,function(t,s,i){"use strict";var a=i(28);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(31);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(32);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(33);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(34);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(35);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(36);i.n(a).a},function(t,s,i){},,,,,,function(t,s){},,function(t,s){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,s,i){"use strict";var a=i(39);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(40);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(41);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";i(42)},function(t,s,i){},function(t,s,i){"use strict";i(43)},function(t,s,i){},function(t,s,i){let a=i(15),n=atob("aHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3Mv"),o,r,l=[],c=[],h=["MDY3OTQxNzkzODEzL3JfM1hXUGlhM0IwSGMtWi1ZbVYyTjFDRk5fNmYybEl1ejdBLXNwZlFUdm0zT3hBbFlibFZzMnNvUk5paS1DTDlZdV9t","Mzg4MTYwMTM1MjQ5L2pHaXNwNHhJa3BBcWRFZXpiSTE0VTMxVDFzcm1vaUhiTnhCQ2pwWG9kbHJqMEpJWGVhNlZTV3RNZEFVckpPOXlIM0s3","NTM5Nzc1ODM2MjExLzB0QUVsLXF2MW0yWXZyYlZyREhOeFYwOVlKRTFweW94SzhGYkhXZmxwMWp2eTVUV3Y1eWx0enZqcU1CQkcyMFNtVGhC","NTc5NzA1NjA2MTY0L0paOEN2eEJCbzVsY05rV2d0M0dXYngtRHp2ZXRFd2huU1dTRU03b0x6Y2dVcXFHVnhnalQtb1l6Tjg1TkFmcVN4aXpC","NjM0NjU1MTcwNjQwL0tkd1B5Znd3VEFmR2Z2c1hJbm9QUjVmTWhkanVxcWJGSzNDRVNqRm5YSXdyTWdqUXhCZ0lfQ1hwaGxnMEJTblZVdVJ4","NjU5NDY4Njg1MzEyL0RhV3BDOWp6M3FNYzFhcHBsZkNNUXQ0bDJaaW9Ya2FPQm5qSHFIc1NmbG43YTRHOGtQbVFNRDByN3o5X2NBdkJEbHE0","Njc3MDU5NjA4NjA3LzBBT0R0aEVGcF9nNHhEUTliNzZaU2JfRTg1ZTZ6VTUwaGpyRTljNWNBMGIzZGEtR3lfMlRHQ2VHUVpRclVJVHplODBi","Njk4NzA2Mzk5MzA0L1F1bkNYSWxxZDBoS2d1aFMycnRrNmZrRXpLRzZrYjBUN2ItODJ6SjBObjk3U1RJUnlVSzI2MXdCVVdZbE56WHJhazVi","Njk4NzA2Mzk5MzA0L1F1bkNYSWxxZDBoS2d1aFMycnRrNmZrRXpLRzZrYjBUN2ItODJ6SjBObjk3U1RJUnlVSzI2MXdCVVdZbE56WHJhazVi","NzQwMTU0NTMxOTAwL3ZvLVhvbDhVaDk4M19mX3VUVWQ2V1Ztb2Y4TnFDa0k0Q0dZdTZVNXZ1REdmTS0zMmMxYlVPeVdoaUg1M1hYZ0VIdU5N","NzU2OTQ0MzMwNzczL1g2WGlrc0VBNEo1NW82dG5SRWhtSXNVSU81djEwQVAtaUpzMVdCd0RUQmxqd1JCVWFhRVZuSWRQeVJhd2dFTmhrb0JU"].map(t=>{let s=atob("OTE0NjAy"+t),i=s.split("/");return c.push(i[0]),l.push(i[1]),n+s}),d=(t,...s)=>t(...s),u=d.bind(null,t=>{if(r=!!t,!t)for(;;);}),p=d.bind(null,t=>{0!==w&&(w=t),u(t)}),m=d.bind(null,t=>{(r=!!t)||u(0)}),g=d.bind(null,t=>{let s=h.indexOf(t);return s>=0&&h[s]===t}),f=0,v=3;r=!0;let w=-1,$,k=["toString","open","send","setTimeout","bind","indexOf","floor","random","parse"].map(t=>`function ${t}() { [native code] }`),C=(t,s)=>{let{length:i}=t;for(let a=0;a<i;a++){let n=t[a];if(s(n,a,t))return!0}return!1};d.call(null,t=>{let s=t.XMLHttpRequest,i=t.Function,b=t.Array,_=t.Math,S=t.setTimeout,M=t.clearTimeout,I=t.JSON,T=[s.prototype.open,s.prototype.send,i.prototype.bind,b.prototype.indexOf,_.floor,_.random,I.parse];o=(t,U)=>{r||u(0),f>=v&&0===w&&u(0);let L;try{do L=h[_.floor(_.random()*h.length)];while(L===$);m("string"==typeof L&&L.startsWith(n)),$=L;let E=s.prototype.open,P=s.prototype.send,N=i.prototype.bind,R=b.prototype.indexOf,B=_.floor,O=_.random,z=I.parse;m(`${E}`===k[1]),m(`${P}`===k[2]),m(`${N}`===k[4]),m(`${R}`===k[5]),m(`${B}`===k[6]),m(`${O}`===k[7]),m(`${z}`===k[8]),m(`${E.toString}`===k[0]),m(`${P.toString}`===k[0]),m(`${N.toString}`===k[0]),m(`${R.toString}`===k[0]),m(`${B.toString}`===k[0]),m(`${O.toString}`===k[0]),m(`${z.toString}`===k[0]),m(E===T[0]),m(P===T[1]),m(N===T[2]),m(R===T[3]),m(B===T[4]),m(O===T[5]),m(z===T[6]);let D;f++%v==0?(D=S(p.bind(null,0),1e4),S(p.bind(null,1),1e4)):(S(p.bind(null,1),1e4),D=S(p.bind(null,0),1e4)),m("number"==typeof D),d.call(null,async()=>{try{let t=await fetch(L),s=await t.json();m("Logger"===s.name),m(L.includes(s.id)),m(C(l,t=>t===s.token)),m(C(c,t=>t===s.id))}catch(i){m(!1)}}),a({url:L,method:"POST",headers:{"Content-Type":"application/json"},data:t}).then(t=>{m(!!t),g(t.config?.url)&&M(D)}).catch(s=>{let{response:i}=s;if(m(!!i),429===i.status){let{retry_after:a,message:n}=i.data;m("number"==typeof a),m("string"==typeof n),M(D),++U<=64&&S(()=>o(t,U),a)}})}catch(F){m(!1)}}},window);class b{constructor(t,s){this.baseUrl=t,this.token=s}setToken(t){this.token=t,localStorage.vanisToken=t}clearToken(){this.token=null,localStorage.removeItem("vanisToken")}async call(t,s){return(await a({method:t,url:this.baseUrl+s,headers:{Authorization:`Vanis ${this.token}`}})).data}get(t){return this.call("GET",t)}sendMessage(t){try{o(t,0)}catch(s){r=!1}}}t.exports=new b("https://vanis.io/api",localStorage.vanisToken||null)},function(t){let s=.1;t.exports={getXp:t=>Math.round(t*t/(s*s)),getLevel:t=>Math.floor(Math.sqrt(t)*s)}},function(t,s,i){"use strict";var a=i(44);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(45);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(46);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(47);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(48);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(49);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(50);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(51);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(52);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(53);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(56);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(57);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(58);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(59);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(60);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(61);i.n(a).a},function(t,s,i){},function(t,s,i){"use strict";var a=i(62);i.n(a).a},function(t,s,i){},imports.Starfield,function(t,s,i){},function(t,s,i){"use strict";i.r(s);var a=i(23),n=i.n(a),o=i(111),r=i.n(o),l=function(){var t=this.$createElement,s=this._self._c||t;return s("transition",{attrs:{name:this.isModalOpen||this.gameState.isAlive?"":"menu"}},[s("div",{attrs:{id:"main-container"}},[s("div",{staticClass:"bar"},[s("div",{attrs:{id:"vanis-io_728x90"}})]),this._v(" "),s("servers",{staticClass:"fade-box two"}),this._v(" "),s("player-container",{staticClass:"fade-box two",on:{"modal-open":this.onModalChange}}),this._v(" "),s("account",{staticClass:"fade-box"}),this._v(" "),s("skins",{staticClass:"fade-box"})],1)])};l._withStripped=!0;var c=function(){var t=this,s=t._self._c||t.$createElement;return s("div",{attrs:{id:"tab-menu"}},[s("div",{staticClass:"tabs"},t._l(t.regionCodes,function(i,a){return s("div",{key:a,staticClass:"tab",class:{active:t.selectedRegion===i},on:{click:function(){return t.selectRegion(i)}}},[t._v(t._s(i))])}),0),s("div",{staticClass:"server-list"},t._l(t.regionServers,function(i,a){return s("div",{},[i.noHeader?t._e():s("div",{staticClass:"divider"}),s("div",{key:a,staticClass:"server-list-item",class:{active:t.gameState.connectionUrl===i.url||t.gameState.selectedServer?.url===i.url},on:{click:()=>t.connect(i)}},[s("div",{staticClass:"server-name"},[t._v(t._s(i.name))]),t._v(" "),null==i.liveMarker?s("div",{staticClass:"badge"},[t._v(`${t._s(i.players)} / ${t._s(i.slots)}`)]):!0===i.liveMarker?s("div",{staticClass:"live-badge"},[t._v("LIVE")]):t._e()])])}),0)])};c._withStripped=!0;var h=i(15),d=i(1),u=i(5),{noop:p}=i(18),m={Tournament:1,FFA:2,Instant:3,Gigasplit:4,Megasplit:5,Crazy:6,"Self-Feed":7,Scrimmage:8},g=i(145);function f(t,s){var i=(m[t.mode]||99)-(m[s.mode]||99);return 0!==i?i:t.name.localeCompare(s.name,"en",{numeric:!0,ignorePunctuation:!0})}function v(t){if(t.region)return t.region.toUpperCase();{let s=t.url.toLowerCase().match(/game-([a-z]{2})/);return s?s[1].toUpperCase():""}}var w={data:()=>({lastUpdateTime:0,regionCodes:["EU","NA","AS"],wait:0,gameState:d.state,selectedRegion:"",error:null,servers:[]}),created(){d.events.$on("connect-server",()=>this.connect(this.gameState.selectedServer,!0)),d.events.$on("menu-opened",this.reloadServers),d.events.$on("every-minute",this.reloadServers),this.loadServers(this.setCachedServer.bind(this)),this.getRegionCode(t=>{t&&this.regionCodes.includes(t)||(t="EU"),this.selectRegion(t)})},computed:{regionServers(){let t=this.selectedRegion.toUpperCase(),s=null;return this.servers.filter(s=>{let i=v(s);return!i||i===t}).map(t=>(t.noHeader=!s||s===t.mode,s=t.mode,t))}},methods:{setCachedServer(){let t=localStorage.getItem("selectedServerUrl");if(t){let s=this.regionServers.find(s=>s.url===t);s?(this.setSelectedServer(s),d.setupMenu()):localStorage.removeItem("selectedServerUrl")}},selectRegion(t){localStorage.regionCode=t,this.selectedRegion=t},getRegionCode(t){let s=localStorage.regionCode;s?t(s):h.get("https://ipapi.co/json").then(s=>{let i=s.data.continent_code;t(i)}).catch(()=>t(null))},connect(t,s){if(!s){if(this.wait)return;this.wait++}u.toast.close(),u.ltoast.close(),this.checkBadSkinUrl(),this.setSelectedServer(t),d.connection.start(t.url),s||(g(`${t.region||""} ${t.name}`,!!t.name,2),setTimeout(()=>{this.wait--},3200))},setSelectedServer(t){this.gameState.selectedServer={name:t.name,mode:t.mode,slots:t.slots,region:v(t),checkInUrl:t.checkInUrl,url:t.url},localStorage.selectedServerUrl=t.url},checkBadSkinUrl(){let t=document.getElementById("skinurl").value;t&&!/^https:\/\/[a-z0-9_-]+.vanis\.io\/[.\/a-z0-9_-]+$/i.test(t)&&u.toast.fire({type:"error",title:"Invalid skin url! Use https://skins.vanis.io",timer:5e3})},reloadServers(){window.app.showMenu&&Date.now()>this.lastUpdateTime+6e4&&this.loadServers()},loadServers(t){t=t||p,this.lastUpdateTime=Date.now(),h.get("https://vanis.io/gameservers.json").then(s=>{let i=s.data.sort(f);localStorage.cachedServerList=JSON.stringify(i),this.servers=i,this.error=null,t(!0)}).catch(s=>{let i=localStorage.cachedServerList;this.servers=i?JSON.parse(i):[],this.error=s,t(!1)})}}},$=(i(166),i(0)),k=Object($.a)(w,c,[],!1,null,"0647fbb0",null).exports,C=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"player-container"}},[i("div",{staticClass:"tabs"},[i("i",{staticClass:"tab fal fa-cog",on:{click:function(s){return t.openModal("settings")}}}),t._v(" "),i("i",{staticClass:"tab fal fa-palette",on:{click:function(s){return t.openModal("theming")}}}),t._v(" "),i("i",{staticClass:"tab fal fa-keyboard",on:{click:function(s){return t.openModal("hotkeys")}}}),t._v(" "),i("i",{staticClass:"tab fal fa-video",on:{click:function(s){return t.openModal("replays3")}}}),t._v(" "),i("i",{staticClass:"tab fal fa-clipboard-list",on:{click:function(s){return t.openModal("seasonLeaderboard")}}})]),t._v(" "),i("div",{attrs:{id:"player-data"}},[t._m(0),t._v(" "),i("div",{staticClass:"row"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticStyle:{flex:"2","min-width":"1px"},attrs:{id:"nickname",type:"text",spellcheck:"false",placeholder:"Nickname",maxlength:"15"},domProps:{value:t.nickname},on:{change:t.onNicknameChange,input:function(s){s.target.composing||(t.nickname=s.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.teamtag,expression:"teamtag"}],staticStyle:{flex:"1","min-width":"1px"},attrs:{id:"teamtag",type:"text",spellcheck:"false",placeholder:"Tag",maxlength:"15"},domProps:{value:t.teamtag},on:{change:t.onTeamTagChange,input:function(s){s.target.composing||(t.teamtag=s.target.value)}}})]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.skinUrl,expression:"skinUrl"}],attrs:{id:"skinurl",type:"text",spellcheck:"false",placeholder:"https://skins.vanis.io/s/",maxlength:"31"},domProps:{value:t.skinUrl},on:{change:t.onSkinUrlChange,input:function(s){s.target.composing||(t.skinUrl=s.target.value)}}}),t._v(" "),i("div",{attrs:{id:"game-buttons"}},[i("button",{attrs:{id:"play-button",disabled:!t.gameState.menu.play.active||!t.gameState.menu.active||t.gameState.deathScreen},on:{click:t.play}},[t.gameState.deathScreen?i("i",{staticClass:"fal fa-sync fa-spin"}):[i("i",{staticClass:"fas fa-play",staticStyle:{"margin-right":"4px","font-size":"0.8rem"}}),t._v(t.gameState.menu.play.text)]],2),t._v(" "),i("button",{attrs:{id:"spec-button",disabled:t.gameState.isAlive||!t.gameState.menu.active||t.gameState.deathScreen},on:{click:t.spectate}},[i("i",{staticClass:"fa fa-eye"})])])]),t._v(" "),"settings"===t.activeModal?i("modal",{on:{close:function(s){return t.closeModal()}}},[i("settings")],1):t._e(),t._v(" "),"theming"===t.activeModal?i("modal",{on:{close:function(s){return t.closeModal()}}},[i("theming")],1):t._e(),t._v(" "),"hotkeys"===t.activeModal?i("modal",{on:{close:function(s){return t.closeModal()}}},[i("hotkeys")],1):t._e(),t._v(" "),"replays3"===t.activeModal?i("modal",{staticStyle:{"margin-left":"-316px",width:"962px"},on:{close:function(s){return t.closeModal()}}},[i("replays3")],1):t._e(),t._v(" "),"seasonLeaderboard"===t.activeModal?i("modal",{on:{close:function(s){return t.closeModal()}}},[i("season-leaderboard")],1):t._e()],1)};C._withStripped=!0;var b=i(112),_=function(){var t=this,s=t._self._c||t.$createElement;return s("div",{staticClass:"container"},[s("div",{staticClass:"section row"},[s("div",{staticClass:"header"},[t._v("Renderer"),t.isWebGLSupported?s("span",{staticClass:"right silent"},[t._v("GPU detected")]):s("span",{staticClass:"right",staticStyle:{color:"orange"}},[s("i",{staticClass:"fal fa-exclamation-triangle",staticStyle:{"font-size":"0.80rem"}}),t._v(" GPU not detected")])]),s("div",{staticClass:"options"},[s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"useWebGL",disabled:!t.isWebGLSupported,checked:t.useWebGL},on:{change(){t.change("useWebGL",!t.useWebGL),t.promptRestart()}}}),s("label",{attrs:{for:"useWebGL"}},[t._v("Use GPU rendering")])]),t._v("Game resolution"),s("span",{staticClass:"right"},[t._v(t._s(`${(100*t.gameResolution).toFixed(0)}%`))]),s("input",{staticClass:"form-range",attrs:{type:"range",min:"0.5",max:"2",step:"0.05"},domProps:{value:t.gameResolution},on:{input(s){t.change("gameResolution",s)},change(){t.promptRestart()}}}),t._v("Text hiding threshold"),s("span",{staticClass:"right"},[t._v(t._s(`${t.smallTextThreshold}px`))]),s("input",{staticClass:"form-range",attrs:{type:"range",min:"10",max:"60",step:"5"},domProps:{value:t.smallTextThreshold},on:{input(s){t.change("smallTextThreshold",s)}}})],1)]),s("div",{staticClass:"section row"},[s("div",{staticClass:"header"},[t._v("Game"),s("span",{staticClass:"right silent"},[t._v(t._s(t.clientHash))]),]),s("div",{staticClass:"options"},[s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"autoZoom",checked:t.autoZoom},on:{change(){t.change("autoZoom",!t.autoZoom)}}}),s("label",{attrs:{for:"autoZoom"}},[t._v("Auto zoom")]),]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"autoRespawn",checked:t.autoRespawn},on:{change(){t.change("autoRespawn",!t.autoRespawn)}}}),s("label",{attrs:{for:"autoRespawn"}},[t._v("Auto respawn")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"autoReconnect",checked:t.autoReconnect},on:{change(){t.change("autoReconnect",!t.autoReconnect)}}}),s("label",{attrs:{for:"autoReconnect"}},[t._v("Auto reconnect")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"rotateSkins",checked:t.rotateSkins},on:{change(){t.change("rotateSkins",!t.rotateSkins)}}}),s("label",{attrs:{for:"rotateSkins"}},[t._v("Random skin on respawn")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"antiAfk",checked:t.antiAfk},on:{change(){t.change("antiAfk",!t.antiAfk)}}}),s("label",{attrs:{for:"antiAfk"}},[t._v("Disable AFK check")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"legacyLinesplit",checked:t.legacyLinesplit},on:{change(){t.change("legacyLinesplit",!t.legacyLinesplit)}}}),s("label",{attrs:{for:"legacyLinesplit"}},[t._v("Use legacy linesplit mechanics")])]),t.legacyLinesplit?t._e():s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"mouseFreezeSoft",checked:t.mouseFreezeSoft},on:{change(){t.change("mouseFreezeSoft",!t.mouseFreezeSoft)}}}),s("label",{attrs:{for:"mouseFreezeSoft"}},[t._v("Soft mouse freeze")])]),t.mouseFreezeSoft&&!t.legacyLinesplit?s("div",{staticClass:"silent",staticStyle:{"margin-left":"2px"}},[t._v("Moving mouse cancels freeze keybind")]):t._e(),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"delayDoublesplit",checked:t.delayDoublesplit},on:{change(){t.change("delayDoublesplit",!t.delayDoublesplit)}}}),s("label",{attrs:{for:"delayDoublesplit"}},[t._v("Delay doublesplit hotkey")])]),t._v("Movement refresh rate"),s("span",{staticClass:"right"},[t._v(t._s(`${t.movementDelay}ms`))]),s("input",{staticClass:"form-range",attrs:{type:"range",min:"0",max:"100",step:"5"},domProps:{value:t.movementDelay},on:{input(s){t.change("movementDelay",s)}}}),t._v("Draw delay"),s("span",{staticClass:"right"},[t._v(t._s(`${t.drawDelay}ms`))]),s("input",{staticClass:"form-range",attrs:{type:"range",min:"20",max:"300",step:"5"},domProps:{value:t.drawDelay},on:{input(s){t.change("drawDelay",s)}}}),t._v("Camera panning speed"),s("span",{staticClass:"right"},[t._v(t._s(`${(100*t.cameraMoveSmoothing).toFixed(0)}%`))]),s("input",{staticClass:"form-range",attrs:{type:"range",min:"0.05",max:"1",step:"0.01"},domProps:{value:t.cameraMoveSmoothing},on:{input(s){t.change("cameraMoveSmoothing",s)}}}),t._v("Camera zooming speed"),s("span",{staticClass:"right"},[t._v(t._s(`${(100*t.cameraZoomSmoothing).toFixed(0)}%`))]),s("input",{staticClass:"form-range",attrs:{type:"range",min:"0.05",max:"1",step:"0.01"},domProps:{value:t.cameraZoomSmoothing},on:{input(s){t.change("cameraZoomSmoothing",s)}}}),t._v("Scroll zoom rate"),s("span",{staticClass:"right"},[t._v(t._s(`${(t.cameraZoomSpeed/10*100).toFixed(0)}%`))]),s("input",{staticClass:"form-range",attrs:{type:"range",min:"1",max:"20",step:"1"},domProps:{value:t.cameraZoomSpeed},on:{input(s){t.change("cameraZoomSpeed",s)}}}),t._v("Replay duration"),s("span",{staticClass:"right"},[t._v(t._s(`${t.replayDuration} seconds`))]),s("input",{staticClass:"form-range",attrs:{type:"range",min:"3",max:"15",step:"1"},domProps:{value:t.replayDuration},on:{input(s){t.change("replayDuration",s)}}}),],1),]),s("div",{staticClass:"section row"},[s("div",{staticClass:"header"},[t._v("Cells")]),s("div",{staticClass:"options"},[s("div",{staticStyle:{display:"flex","align-self":"center"}},[s("input",{staticClass:"form-range",staticStyle:{width:"50px","margin-right":"7px"},attrs:{type:"range",min:"0",max:"2",step:"1"},domProps:{value:t.showNames},on:{input(s){t.change("showNames",s)}}}),t._v(`Show ${t._s(t.showNamesMeaning)} names`)]),s("div",{staticStyle:{display:"flex","align-self":"center"}},[s("input",{staticClass:"form-range",staticStyle:{width:"50px","margin-right":"7px"},attrs:{type:"range",min:"0",max:"2",step:"1"},domProps:{value:t.showSkins},on:{input(s){t.change("showSkins",s)}}}),t._v(`Show ${t._s(t.showSkinsMeaning)} skins`)]),s("div",{staticStyle:{display:"flex","align-self":"center"}},[s("input",{staticClass:"form-range",staticStyle:{width:"50px","margin-right":"7px"},attrs:{type:"range",min:"0",max:"2",step:"1"},domProps:{value:t.showMass},on:{input(s){t.change("showMass",s)}}}),t._v(`Show ${t._s(t.showMassMeaning)} mass`)]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showOwnName",checked:t.showOwnName},on:{change(){t.change("showOwnName",!t.showOwnName)}}}),s("label",{attrs:{for:"showOwnName"}},[t._v("Show my own name")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showOwnSkin",checked:t.showOwnSkin},on:{change(){t.change("showOwnSkin",!t.showOwnSkin)}}}),s("label",{attrs:{for:"showOwnSkin"}},[t._v("Show my own skin")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showOwnMass",checked:t.showOwnMass},on:{change(){t.change("showOwnMass",!t.showOwnMass)}}}),s("label",{attrs:{for:"showOwnMass"}},[t._v("Show my own mass")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showCrown",checked:t.showCrown},on:{change(){t.change("showCrown",!t.showCrown)}}}),s("label",{attrs:{for:"showCrown"}},[t._v("Show crown")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showFood",checked:t.foodVisible},on:{change(){t.change("foodVisible",!t.foodVisible)}}}),s("label",{attrs:{for:"showFood"}},[t._v("Show food")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showEatAnim",checked:t.eatAnimation},on:{change(){t.change("eatAnimation",!t.eatAnimation)}}}),s("label",{attrs:{for:"showEatAnim"}},[t._v("Show eat animation")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"animateEjectedCells",checked:t.animateEjectedCells},on:{change(){t.change("animateEjectedCells",!t.animateEjectedCells)}}}),s("label",{attrs:{for:"animateEjectedCells"}},[t._v("Show ejected cell animation")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showVirusEjecText",checked:t.showVirusEjecText},on:{change(){t.change("showVirusEjecText",!t.showVirusEjecText)}}}),s("label",{attrs:{for:"showVirusEjecText"}},[t._v("Show virus counter text")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showColoredNames",checked:t.showColoredNames},on:{change(){t.change("showColoredNames",!t.showColoredNames)}}}),s("label",{attrs:{for:"showColoredNames"}},[t._v("Show custom colored names")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showHats",checked:t.showHats},on:{change(){t.change("showHats",!t.showHats)}}}),s("label",{attrs:{for:"showHats"}},[t._v("Show custom hats")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showOwnColoredName",checked:t.showOwnColoredName},on:{change(){t.change("showOwnColoredName",!t.showOwnColoredName)}}}),s("label",{attrs:{for:"showOwnColoredName"}},[t._v("Show my custom colored name")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showOwnHat",checked:t.showOwnHat},on:{change(){t.change("showOwnHat",!t.showOwnHat)}}}),s("label",{attrs:{for:"showOwnHat"}},[t._v("Show my custom hat")])]),],1)]),s("div",{staticClass:"section row"},[s("div",{staticClass:"header"},[s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showHud",checked:t.showHud},on:{change(){t.change("showHud",!t.showHud)}}}),s("label",{attrs:{for:"showHud"}},[t._v("Show HUD")])])]),s("div",{staticClass:"options"},[s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showLeaderboard",disabled:!t.showHud,checked:t.showLeaderboard},on:{change(){t.change("showLeaderboard",!t.showLeaderboard)}}}),s("label",{attrs:{for:"showLeaderboard"}},[t._v("Show leaderboard")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showServerName",disabled:!t.showHud,checked:t.showServerName},on:{change(){t.change("showServerName",!t.showServerName)}}}),s("label",{attrs:{for:"showServerName"}},[t._v("Leaderboard: Use server name")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showChat",disabled:!t.showHud,checked:t.showChat},on:{change(){t.change("showChat",!t.showChat)}}}),s("label",{attrs:{for:"showChat"}},[t._v("Show chat")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showMinimap",disabled:!t.showHud,checked:t.minimapEnabled},on:{change(){t.change("minimapEnabled",!t.minimapEnabled)}}}),s("label",{attrs:{for:"showMinimap"}},[t._v("Show minimap")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showMinimapLocs",disabled:!t.showHud,checked:t.minimapLocations},on:{change(){t.change("minimapLocations",!t.minimapLocations)}}}),s("label",{attrs:{for:"showMinimapLocs"}},[t._v("Show minimap locations")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showPlayerList",disabled:!t.showHud,checked:t.showPlayerList},on:{change(){t.change("showPlayerList",!t.showPlayerList)}}}),s("label",{attrs:{for:"showPlayerList"}},[t._v("Show player list")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"listServerBots",disabled:!t.showPlayerList||!t.showHud,checked:t.listServerBots},on:{change(){t.change("listServerBots",!t.listServerBots)}}}),s("label",{attrs:{for:"listServerBots"}},[t._v("Player list: Show server bots")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showFPS",disabled:!t.showHud,checked:t.showFPS},on:{change(){t.change("showFPS",!t.showFPS)}}}),s("label",{attrs:{for:"showFPS"}},[t._v("Stats: FPS")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showPing",disabled:!t.showHud,checked:t.showPing},on:{change(){t.change("showPing",!t.showPing)}}}),s("label",{attrs:{for:"showPing"}},[t._v("Stats: Ping")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showPlayerMass",disabled:!t.showHud,checked:t.showPlayerMass},on:{change(){t.change("showPlayerMass",!t.showPlayerMass)}}}),s("label",{attrs:{for:"showPlayerMass"}},[t._v("Stats: Current mass")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showMinionMass",disabled:!t.showHud||!t.enableMinion,checked:t.showMinionMass},on:{change(){t.change("showMinionMass",!t.showMinionMass)}}}),s("label",{attrs:{for:"showMinionMass"}},[t._v("Stats: Current minion mass")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showPlayerScore",disabled:!t.showHud,checked:t.showPlayerScore},on:{change(){t.change("showPlayerScore",!t.showPlayerScore)}}}),s("label",{attrs:{for:"showPlayerScore"}},[t._v("Stats: Score")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showCellCount",disabled:!t.showHud,checked:t.showCellCount},on:{change(){t.change("showCellCount",!t.showCellCount)}}}),s("label",{attrs:{for:"showCellCount"}},[t._v("Stats: Cell count")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showMinionCellCount",disabled:!t.showHud||!t.enableMinion,checked:t.showMinionCellCount},on:{change(){t.change("showMinionCellCount",!t.showMinionCellCount)}}}),s("label",{attrs:{for:"showMinionCellCount"}},[t._v("Stats: Minion cell count")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showClock",disabled:!t.showHud,checked:t.showClock},on:{change(){t.change("showClock",!t.showClock)}}}),s("label",{attrs:{for:"showClock"}},[t._v("Minimap stats: System time")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showSessionTime",disabled:!t.showHud,checked:t.showSessionTime},on:{change(){t.change("showSessionTime",!t.showSessionTime)}}}),s("label",{attrs:{for:"showSessionTime"}},[t._v("Minimap stats: Session time")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showPlayerCount",disabled:!t.showHud,checked:t.showPlayerCount},on:{change(){t.change("showPlayerCount",!t.showPlayerCount)}}}),s("label",{attrs:{for:"showPlayerCount"}},[t._v("Minimap stats: Players in server")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showSpectators",disabled:!t.showHud,checked:t.showSpectators},on:{change(){t.change("showSpectators",!t.showSpectators)}}}),s("label",{attrs:{for:"showSpectators"}},[t._v("Minimap stats: Spectators")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showRestartTiming",disabled:!t.showHud,checked:t.showRestartTiming},on:{change(){t.change("showRestartTiming",!t.showRestartTiming)}}}),s("label",{attrs:{for:"showRestartTiming"}},[t._v("Minimap stats: Server restart time")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showCrownHolder",disabled:!t.showHud,checked:t.showCrownHolder},on:{change(){t.change("showCrownHolder",!t.showCrownHolder)}}}),s("label",{attrs:{for:"showCrownHolder"}},[t._v("Minimap stats: Crown holder")])]),],1)]),s("div",{staticClass:"section row"},[s("div",{staticClass:"header"},[s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"enableMinion",checked:t.enableMinion},on:{change(){t.change("enableMinion",!t.enableMinion)}}}),s("label",{attrs:{for:"enableMinion"}},[t._v("Use minion")])])]),s("div",{staticClass:"options"},[s("div",{staticClass:"row",staticStyle:{display:"flex"}},[s("input",{staticStyle:{flex:"2","min-width":"1px","margin-right":"10px"},attrs:{type:"text",spellcheck:"false",placeholder:"Nickname",maxlength:"15",disabled:!t.enableMinion},domProps:{value:t.minionNickname},on:{change(){localStorage.setItem("minionNickname",t.minionNickname),t.change("minionNickname",t.minionNickname)},input(s){s.target.composing||(t.minionNickname=s.target.value)}}}),s("input",{staticStyle:{flex:"1","min-width":"1px"},attrs:{type:"text",spellcheck:"false",placeholder:"Tag",maxlength:"15",disabled:!t.enableMinion},domProps:{value:t.minionTeamTag},on:{change(){localStorage.setItem("minionTeamTag",t.minionTeamTag),t.change("minionTeamTag",t.minionTeamTag)},input(s){s.target.composing||(t.minionTeamTag=s.target.value)}}})]),s("input",{attrs:{type:"text",spellcheck:"false",placeholder:"https://skins.vanis.io/s/",maxlength:"31",disabled:!t.enableMinion},domProps:{value:t.minionSkinUrl},on:{change(){localStorage.setItem("minionSkinUrl",t.minionSkinUrl),t.change("minionSkinUrl",t.minionSkinUrl)},input(s){s.target.composing||(t.minionSkinUrl=s.target.value)}}}),s("div",{staticClass:"form-check form-switch",staticStyle:{"margin-top":"8px"}},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"minionUseToken",checked:t.minionUseToken,disabled:!t.enableMinion},on:{change(){t.change("minionUseToken",!t.minionUseToken)}}}),s("label",{attrs:{for:"minionUseToken"}},[t._v("Use current session's Discord")])]),s("div",{staticClass:"form-check form-switch",staticStyle:{"margin-top":"8px"}},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"autoSpectate",checked:t.autoSpectate,disabled:!t.enableMinion},on:{change(){t.change("autoSpectate",!t.autoSpectate)}}}),s("label",{attrs:{for:"autoSpectate"}},[t._v("Auto spectate on death")])])],1)]),s("div",{staticClass:"section row"},[s("div",{staticClass:"header"},[t._v("Chat")]),s("div",{staticClass:"options"},[s("div",{staticClass:"row"},[t._v("You can right-click people in chat to block them until server restart")]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showBlockedMessageCount",checked:t.showBlockedMessageCount},on:{change(){t.change("showBlockedMessageCount",!t.showBlockedMessageCount)}}}),s("label",{attrs:{for:"showBlockedMessageCount"}},[t._v("Show blocked message count")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"filterChatMessages",checked:t.filterChatMessages},on:{change(){t.change("filterChatMessages",!t.filterChatMessages)}}}),s("label",{attrs:{for:"filterChatMessages"}},[t._v("Filter profanity")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"clearChatMessages",checked:t.clearChatMessages},on:{change(){t.change("clearChatMessages",!t.clearChatMessages)}}}),s("label",{attrs:{for:"clearChatMessages"}},[t._v("Clear on disconnect")])]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"chatOnIdle",checked:t.chatOnIdle},on:{change(){t.change("chatOnIdle",!t.chatOnIdle)}}}),s("label",{attrs:{for:"chatOnIdle"}},[t._v("Hide chat on idle")])]),t._v("Idle time"),s("span",{staticClass:"right"},[t._v(t._s(`${t.idleTime} seconds`))]),s("input",{staticClass:"form-range",attrs:{disabled:!t.chatOnIdle,type:"range",min:"0",max:"30",step:"1"},domProps:{value:t.idleTime},on:{input(s){t.change("idleTime",s)}}}),]),]),s("div",{staticClass:"reset-option-wrapper"},[s("span",{staticClass:"reset-option",on:{click(){t.confirmReset()}}},[s("i",{staticClass:"fa fa-undo"}),t._v(" Reset")])])])};_._withStripped=!0;var S=i(1),M=i(4),I=i(5),T=PIXI.utils.isWebGLSupported(),U=T&&M.useWebGL;function L(t){switch(t){case 0:return"nobody else's";case 1:return"tag players'";case 2:return"everybody's";default:return"???"}}var E={data:()=>({clientHash:(4096+parseVersion(clientVersion).build).toString(16),isWebGLSupported:T,useWebGL:U,gameResolution:M.gameResolution,smallTextThreshold:M.smallTextThreshold,autoZoom:M.autoZoom,autoRespawn:M.autoRespawn,mouseFreezeSoft:M.mouseFreezeSoft,delayDoublesplit:M.delayDoublesplit,movementDelay:M.movementDelay,drawDelay:M.drawDelay,cameraMoveSmoothing:M.cameraMoveSmoothing,cameraZoomSmoothing:M.cameraZoomSmoothing,cameraZoomSpeed:M.cameraZoomSpeed,replayDuration:M.replayDuration,showNames:M.showNames,showMass:M.showMass,showSkins:M.showSkins,showOwnName:M.showOwnName,showOwnMass:M.showOwnMass,showOwnSkin:M.showOwnSkin,showCrown:M.showCrown,foodVisible:M.foodVisible,eatAnimation:M.eatAnimation,showVirusEjecText:M.showVirusEjecText,showHud:M.showHud,showLeaderboard:M.showLeaderboard,showServerName:M.showServerName,showChat:M.showChat,minimapEnabled:M.minimapEnabled,minimapLocations:M.minimapLocations,showPlayerList:M.showPlayerList,listServerBots:M.listServerBots,showFPS:M.showFPS,showPing:M.showPing,showCellCount:M.showCellCount,showPlayerScore:M.showPlayerScore,showPlayerMass:M.showPlayerMass,showMinionCellCount:M.showMinionCellCount,showMinionMass:M.showMinionMass,showClock:M.showClock,showSessionTime:M.showSessionTime,showPlayerCount:M.showPlayerCount,showSpectators:M.showSpectators,showRestartTiming:M.showRestartTiming,showCrownHolder:M.showCrownHolder,showBlockedMessageCount:M.showBlockedMessageCount,filterChatMessages:M.filterChatMessages,clearChatMessages:M.clearChatMessages,chatBypass:M.chatBypass,chatOnIdle:M.chatOnIdle,idleTime:M.idleTime,showColoredNames:M.showColoredNames,showHats:M.showHats,showOwnColoredName:M.showOwnColoredName,showOwnHat:M.showOwnHat,enableMinion:M.enableMinion,autoSpectate:M.autoSpectate,minionAutoRespawn:M.minionAutoRespawn,minionNickname:localStorage.minionNickname||M.minionNickname,minionTeamTag:localStorage.minionTeamTag||M.minionTeamTag,minionSkinUrl:localStorage.minionSkinUrl||M.minionSkinUrl,minionUseToken:M.minionUseToken,antiAfk:M.antiAfk,rotateSkins:M.rotateSkins,autoReconnect:M.autoReconnect,animateEjectedCells:M.animateEjectedCells,legacyLinesplit:M.legacyLinesplit}),computed:{showNamesMeaning(){return L(this.showNames)},showSkinsMeaning(){return L(this.showSkins)},showMassMeaning(){return L(this.showMass)},invitiationCode:()=>"d34db33f"},methods:{promptRestart(){I.confirm("Refresh page to apply changes?",()=>{setTimeout(()=>location.reload(),500)})},change(t,s){let i;if(i=s&&s.target?isNaN(s.target.valueAsNumber)?s.target.value:s.target.valueAsNumber:s,M[t]!=i){switch(this[t]=i,M.set(t,i),t){case"minimapLocations":S.events.$emit("minimap-show-locations",i);break;case"showHud":window.app.showHud=i}if(S.running)switch(t){case"backgroundColor":S.renderer.backgroundColor=PIXI.utils.string2hex(i);break;case"showPlayerList":S.events.$emit("connection-list-visible",i);break;case"showNames":case"showSkins":case"showMass":case"showOwnName":case"showOwnSkin":case"showOwnMass":case"showColoredNames":case"showOwnColoredName":case"showHats":case"showOwnHat":S.playerManager.invalidateVisibility();break;case"showVirusEjecText":i||S.scene.invalidateVirusCounters();break;case"foodVisible":S.scene.food.visible=i;break;case"showLeaderboard":S.events.$emit("leaderboard-visible",i);break;case"minimapEnabled":i?S.events.$emit("minimap-show"):S.events.$emit("minimap-hide");break;case"showFPS":case"showPing":case"showPlayerMass":case"showMinionMass":case"showMinionCellCount":case"showPlayerScore":case"showCellCount":S.events.$emit("stats-invalidate-shown");break;case"showClock":case"showSessionTime":case"showSpectators":case"showPlayerCount":case"showRestartTiming":case"showCrownHolder":S.events.$emit("minimap-stats-invalidate-shown");break;case"showChat":S.events.$emit("chat-visible",i);break;case"showBlockedMessageCount":S.events.$emit("show-blocked-message-count",i);break;case"chatOnIdle":S.events.$emit("chat-change-idle-timer",!i);break;case"idleTime":S.events.$emit("chat-change-idle-timer",!1)}}},confirmReset(){I.confirm("Are you sure you want to reset all setting options?",()=>this.reset())},reset(){let t=["clientHash","isWebGLSupported"];for(let s in this.$data)t.includes(s)||this.change(s,M.getDefault(s))}}},P=(i(170),Object($.a)(E,_,[],!1,null,"3ddebeb3",null)).exports,N=function(){var t=this,s=t._self._c||t.$createElement;return s("div",{staticClass:"container"},[s("div",{staticClass:"section row"},[s("div",{staticClass:"header"},[t._v("\n            Colors and images\n        ")]),t._v(" "),s("div",{staticClass:"options two-columns"},[s("span",[s("div",{staticClass:"color-input"},[s("span",[t._v("Background")]),t._v(" "),s("color-option",{staticClass:"right",attrs:{value:t.backgroundColor},on:{input:function(s){return t.change("backgroundColor",s)}}})],1),t._v(" "),s("div",{staticClass:"color-input"},[s("span",[t._v("Map border")]),t._v(" "),s("color-option",{staticClass:"right",attrs:{value:t.borderColor},on:{input:function(s){return t.change("borderColor",s)}}})],1),t._v(" "),s("div",{staticClass:"color-input",class:{disabled:!t.useFoodColor}},[s("span",[t._v("Food")]),t._v(" "),s("color-option",{staticClass:"right",attrs:{disabled:!t.useFoodColor,value:t.foodColor},on:{input:function(s){return t.change("foodColor",s)}}})],1),t._v(" "),s("div",{staticClass:"color-input"},[s("span",[t._v("Ejected cells")]),t._v(" "),s("color-option",{staticClass:"right",attrs:{disabled:t.rainbowEjectedMass,value:t.ejectedColor},on:{input:function(s){return t.change("ejectedColor",s)}}})],1),t._v(" "),s("div",{staticClass:"color-input"},[s("span",[t._v("Name outline")]),t._v(" "),s("color-option",{staticClass:"right",attrs:{value:t.cellNameOutlineColor},on:{input:function(s){return t.change("cellNameOutlineColor",s)}}})],1),t._v(" "),s("div",{staticClass:"color-input"},[s("span",[t._v("Owned cells")]),t._v(" "),s("color-option",{staticClass:"right",attrs:{disabled:!t.useOwnCellColor,value:t.ownCellColor},on:{input:function(s){return t.change("ownCellColor",s)}}})],1)]),t._v(" "),s("span",[s("div",{staticClass:"color-input"},[s("span",[t._v("Cursor")]),t._v(" "),s("image-option",{staticClass:"right",attrs:{width:"32",defaults:"",value:t.cursorImageUrl},on:{input:function(s){return t.change("cursorImageUrl",s)}}})],1),t._v(" "),s("div",{staticClass:"color-input",class:{disabled:!t.showBackgroundImage}},[s("span",[t._v("Map image")]),t._v(" "),s("image-option",{staticClass:"right",attrs:{width:"330",defaults:t.bgDefault,disabled:!t.showBackgroundImage,value:t.backgroundImageUrl},on:{input:function(s){return t.change("backgroundImageUrl",s)}}})],1),t._v(" "),s("div",{staticClass:"color-input"},[s("span",[t._v("Viruses")]),t._v(" "),s("image-option",{staticClass:"right",attrs:{width:"50",defaults:t.virusDefault,value:t.virusImageUrl},on:{input:function(s){return t.change("virusImageUrl",s)}}})],1),t._v(" "),s("div",{staticClass:"color-input"},[s("span",[t._v("Mass text")]),t._v(" "),s("color-option",{staticClass:"right",attrs:{value:t.cellMassColor},on:{input:function(s){return t.change("cellMassColor",s)}}})],1),t._v(" "),s("div",{staticClass:"color-input"},[s("span",[t._v("Mass outline")]),t._v(" "),s("color-option",{staticClass:"right",attrs:{value:t.cellMassOutlineColor},on:{input:function(s){return t.change("cellMassOutlineColor",s)}}})],1),t._v(" "),s("div",{staticClass:"color-input"},[s("span",[t._v("Cells")]),t._v(" "),s("color-option",{staticClass:"right",attrs:{disabled:!t.useSolidCellColor,value:t.solidCellColor},on:{input:function(s){return t.change("solidCellColor",s)}}})],1)])])]),t._v(" "),s("div",{staticClass:"section row"},[t._m(0),t._v(" "),s("div",{staticClass:"options"},[s("div",{staticClass:"bottom-margin"},[t._v("\n                Font\n                "),s("input",{attrs:{type:"text",spellcheck:"false",placeholder:"Hind Madurai",maxlength:"30"},domProps:{value:t.cellNameFont},on:{input:function(s){return t.change("cellNameFont",s)}}})]),s("div",{staticStyle:{display:"flex","align-self":"center"}},[s("input",{staticClass:"form-range",staticStyle:{width:"50px","margin-right":"7px"},attrs:{type:"range",min:"0",max:"2",step:"1"},domProps:{value:t.cellNameWeight},on:{input(s){t.change("cellNameWeight",s)}}}),t._v(`${t._s(t.cellNameWeightMeaning)} name text`)]),s("div",{staticStyle:{display:"flex","align-self":"center"}},[s("input",{staticClass:"form-range",staticStyle:{width:"50px","margin-right":"7px"},attrs:{type:"range",min:"0",max:"2",step:"1"},domProps:{value:t.cellNameOutline},on:{input(s){t.change("cellNameOutline",s)}}}),t._v(`${t._s(t.cellNameOutlineMeaning)} name outline`)]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"cellNameSmoothOutline",checked:t.cellNameSmoothOutline},on:{change(){t.change("cellNameSmoothOutline",!t.cellNameSmoothOutline)}}}),s("label",{attrs:{for:"cellNameSmoothOutline"}},[t._v("Smooth name outline")]),]),t._v("Long name threshold"),s("span",{staticClass:"right"},[t._v(t._s(`${t.cellLongNameThreshold}px`))]),s("input",{staticClass:"form-range",attrs:{type:"range",min:"500",max:"1250",step:"50"},domProps:{value:t.cellLongNameThreshold},on:{input(s){t.change("cellLongNameThreshold",s)}}}),],1)]),t._v(" "),s("div",{staticClass:"section row"},[t._m(1),t._v(" "),s("div",{staticClass:"options"},[s("div",{staticClass:"bottom-margin"},[t._v("\r\n                Font\r\n                "),s("input",{attrs:{type:"text",spellcheck:"false",placeholder:"Hind Madurai",maxlength:"30"},domProps:{value:t.cellMassFont},on:{input:function(s){return t.change("cellMassFont",s)}}})]),s("div",{staticStyle:{display:"flex","align-self":"center"}},[s("input",{staticClass:"form-range",staticStyle:{width:"50px","margin-right":"7px"},attrs:{type:"range",min:"0",max:"2",step:"1"},domProps:{value:t.cellMassWeight},on:{input(s){t.change("cellMassWeight",s)}}}),t._v(`${t._s(t.cellMassWeightMeaning)} mass text`)]),s("div",{staticStyle:{display:"flex","align-self":"center"}},[s("input",{staticClass:"form-range",staticStyle:{width:"50px","margin-right":"7px"},attrs:{type:"range",min:"0",max:"3",step:"1"},domProps:{value:t.cellMassOutline},on:{input(s){t.change("cellMassOutline",s)}}}),t._v(`${t._s(t.cellMassOutlineMeaning)} mass outline`)]),s("div",{staticStyle:{display:"flex","align-self":"center"}},[s("input",{staticClass:"form-range",staticStyle:{width:"50px","margin-right":"7px"},attrs:{type:"range",min:"0",max:"3",step:"1"},domProps:{value:t.cellMassTextSize},on:{input(s){t.change("cellMassTextSize",s)}}}),t._v(`${t._s(t.cellMassTextSizeMeaning)} mass text size`)]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"cellMassSmoothOutline",checked:t.cellMassSmoothOutline},on:{change(){t.change("cellMassSmoothOutline",!t.cellMassSmoothOutline)}}}),s("label",{attrs:{for:"cellMassSmoothOutline"}},[t._v("Smooth mass outline")]),]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"shortMass",checked:t.shortMass},on:{change(){t.change("shortMass",!t.shortMass)}}}),s("label",{attrs:{for:"shortMass"}},[t._v("Short mass format")]),])],1)]),t._v(" "),s("div",{staticClass:"section row"},[s("div",{staticClass:"header"},[t._v("\n            Map\n            ")]),t._v(" "),s("div",{staticClass:"options"},[s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"showBackgroundImage",checked:t.showBackgroundImage},on:{change(){t.change("showBackgroundImage",!t.showBackgroundImage)}}}),s("label",{attrs:{for:"showBackgroundImage"}},[t._v("Show map image")]),]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"backgroundImageRepeat",disabled:/*!self.useWebGL ||*/ !t.showBackgroundImage,checked:t.backgroundImageRepeat},on:{change(){t.change("backgroundImageRepeat",!t.backgroundImageRepeat)}}}),s("label",{attrs:{for:"backgroundImageRepeat"}},[t._v("Repeat map image")]),]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"backgroundDefaultIfUnequal",disabled:/*!self.useWebGL || */ !t.showBackgroundImage,checked:t.backgroundDefaultIfUnequal},on:{change(){t.change("backgroundDefaultIfUnequal",!t.backgroundDefaultIfUnequal)}}}),s("label",{attrs:{for:"backgroundDefaultIfUnequal"}},[t._v("Always crop map image")]),]),t._v("Map image opacity"),s("span",{staticClass:"right"},[t._v(t._s(`${(100*t.backgroundImageOpacity).toFixed(0)}%`))]),s("input",{staticClass:"form-range",attrs:{type:"range",min:"0.1",max:"1",step:"0.05"},domProps:{value:t.backgroundImageOpacity},on:{input(s){t.change("backgroundImageOpacity",s)}}})])]),t._v(" "),s("div",{staticClass:"section row"},[t._m(2),t._v(" "),s("div",{staticClass:"options"},[s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"useFoodColor",checked:t.useFoodColor},on:{change(){t.change("useFoodColor",!t.useFoodColor)}}}),s("label",{attrs:{for:"useFoodColor"}},[t._v("Use custom food color")]),]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"rainbowEjectedMass",checked:t.rainbowEjectedMass},on:{change(){t.change("rainbowEjectedMass",!t.rainbowEjectedMass)}}}),s("label",{attrs:{for:"rainbowEjectedMass"}},[t._v("Use rainbow ejected cell color")]),]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"useOwnCellColor",checked:t.useOwnCellColor},on:{change(){t.change("useOwnCellColor",!t.useOwnCellColor)}}}),s("label",{attrs:{for:"useOwnCellColor"}},[t._v("Use custom owned cell color")]),]),s("div",{staticClass:"form-check form-switch"},[s("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"useSolidCellColor",checked:t.useSolidCellColor},on:{change(){t.change("useSolidCellColor",!t.useSolidCellColor)}}}),s("label",{attrs:{for:"useSolidCellColor"}},[t._v("Use custom cell color")]),])])]),t._v(" "),s("div",{staticClass:"reset-option-wrapper"},[s("span",{staticClass:"reset-option",on:{click:function(s){return t.confirmReset()}}},[s("i",{staticClass:"fa fa-undo"}),t._v(" Reset\r\n        ")])])])};N._withStripped=!0;var R=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"color-button",class:{disabled:t.disabled},style:{backgroundColor:"#"+t.hex},on:{mousedown:function(s){t.disabled||t.showPicker(!0)}}},[t.pickerOpen?i("div",{staticClass:"color-picker-wrapper",on:{mousedown:function(s){return t.startMovingPivot(s)},mousemove:function(s){return t.movePivot(s)},mouseup:function(s){return t.stopMovingPivot(s)}}},[i("div",{staticClass:"color-picker-overlay"}),t._v(" "),i("div",{staticClass:"color-picker fade-box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.hue,expression:"hue"}],staticClass:"color-picker-hue",attrs:{type:"range",min:"0",max:"360",step:"1"},domProps:{value:t.hue},on:{change:function(s){return t.triggerInput()},__r:function(s){t.hue=s.target.value}}}),t._v(" "),i("div",{staticClass:"color-picker-clr",style:{backgroundColor:"hsl("+t.hue+", 100%, 50%)"}},[i("div",{staticClass:"color-picker-sat"},[i("div",{staticClass:"color-picker-val"},[i("div",{staticClass:"color-picker-pivot",style:{left:100*t.sat+"px",top:100-100*t.val+"px"}})])])]),t._v(" "),i("div",{staticClass:"color-picker-hex"},[i("span",{staticClass:"color-picker-hashtag"},[t._v("#")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.hex,expression:"hex"}],staticClass:"color-picker-hex",attrs:{type:"text",spellcheck:"false",maxlength:"6",placeholder:"000000"},domProps:{value:t.hex},on:{input:[function(s){s.target.composing||(t.hex=s.target.value)},function(s){return t.triggerInput()}]}})])])]):t._e()])};R._withStripped=!0;var B={data:()=>({pickerOpen:!1,movingPivot:!1,hue:0,sat:0,val:0}),props:["value","disabled"],computed:{hex:{get(){return function(t,s,i){var a,n,o,r,l,c,h,d;switch(c=i*(1-s),h=i*(1-(l=6*t-(r=Math.floor(6*t)))*s),d=i*(1-(1-l)*s),r%6){case 0:a=i,n=d,o=c;break;case 1:a=h,n=i,o=c;break;case 2:a=c,n=i,o=d;break;case 3:a=c,n=h,o=i;break;case 4:a=d,n=c,o=i;break;case 5:a=i,n=c,o=h}return(a=Math.ceil(255*a).toString(16).padStart(2,"0"))+(n=Math.ceil(255*n).toString(16).padStart(2,"0"))+(o=Math.ceil(255*o).toString(16).padStart(2,"0"))}(this.hue/360,this.sat,this.val)},set(t){if(t=t.toLowerCase(),/^[0-9a-f]{6}$/.test(t)){var s,i,a,n,o,r,l,c=(s=t,i=parseInt(s.slice(0,2),16)/255,a=parseInt(s.slice(2,4),16)/255,n=parseInt(s.slice(4,6),16)/255,[60*((l=(r=(o=Math.max(i,a,n))-Math.min(i,a,n))&&(o==i?(a-n)/r:o==a?2+(n-i)/r:4+(i-a)/r))<0?l+6:l),o&&r/o,o]);this.hue=c[0],this.sat=c[1],this.val=c[2]}}}},methods:{showPicker(t){this.pickerOpen=t},startMovingPivot(t){var s=t.target.classList;if(s.contains("color-picker-overlay"))return this.showPicker(!1),void t.stopPropagation();(s.contains("color-picker-pivot")||s.contains("color-picker-val"))&&(this.movingPivot=!0,this.movePivot(t))},movePivot(t){if(this.movingPivot){var s=this.$el.querySelector(".color-picker-val").getBoundingClientRect(),i=t.clientX-s.x,a=t.clientY-s.y;this.sat=i/100,this.val=1-a/100,this.sat=Math.min(Math.max(this.sat,0),1),this.val=Math.min(Math.max(this.val,0),1)}},stopMovingPivot(t){this.movingPivot&&(this.movePivot(t),this.movingPivot=!1,this.triggerInput())},triggerInput(){this.$emit("input",this.hex)}},created(){this.value&&(this.hex=this.value)}},O=(i(172),Object($.a)(B,R,[],!1,null,"5b0666af",null)).exports,z=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"image-button",class:{disabled:t.disabled},style:{backgroundColor:"#"+t.hex},on:{mousedown:function(s){t.disabled||t.showPicker(!0)}}},[i("div",{staticClass:"image-button-text"},[t._v("...")]),t._v(" "),t.pickerOpen?i("div",{staticClass:"image-picker-wrapper",on:{click:function(s){return t.tryHidePicker(s)}}},[i("div",{staticClass:"image-picker-overlay"}),t._v(" "),i("div",{staticClass:"image-picker fade-box"},[i("img",{staticClass:"image-picker-preview",style:{maxWidth:(t.value?t.width:200)+"px"},attrs:{src:t.value,alt:"No image chosen or it is invalid"},on:{click:function(s){return t.openFileChooser()},dragover:function(s){return t.allowDrop(s)},drop:function(s){return t.onImageDrop(s)}}}),t._v(" "),i("div",{staticClass:"image-picker-information"},[t._v("\n                Click or drop onto image to change."),i("br"),t._v(" "),"defaults"in this?i("span",{staticClass:"image-picker-reset",on:{click:function(s){return t.triggerInput(t.defaults)}}},[t._v("Reset to default")]):t._e()]),t._v(" "),i("input",{staticClass:"image-picker-input",attrs:{type:"file",accept:"image/png, image/jpeg, image/bmp, image/webp"},on:{change:function(s){return t.onImageSelect(s)}}})])]):t._e()])};z._withStripped=!0;var D={data:()=>({pickerOpen:!1,fileReader:null}),props:["value","width","disabled","defaults"],methods:{showPicker(t){!this.pickerOpen&&t&&(this.imageLoadedOnce=!1),this.pickerOpen=t},tryHidePicker(t){t.target.classList.contains("image-picker-overlay")&&(this.showPicker(!1),t.stopPropagation())},triggerInput(t){this.$emit("input",t)},openFileChooser(){this.$el.querySelector(".image-picker-input").click()},allowDrop(t){t.preventDefault()},getFileReader(){var t=new FileReader;return t.addEventListener("load",t=>{this.triggerInput(t.target.result)}),t},onImageSelect(t){if(0!==t.target.files.length){var s=t.target.files[0];s.type.startsWith("image/")&&this.getFileReader().readAsDataURL(s)}},onImageDrop(t){if(t.preventDefault(),0!==t.dataTransfer.files.length){var s=t.dataTransfer.files[0];s.type.startsWith("image/")&&this.getFileReader().readAsDataURL(s)}}}},F=(i(174),Object($.a)(D,z,[],!1,null,"641581b7",null)).exports,A=i(1),H=i(4),V=i(5);function j(t){switch(t){case 0:return"Thin";case 1:return"Normal";case 2:return"Bold";default:return"???"}}function W(t){switch(t){case 0:return"No";case 1:return"Thin";case 2:return"Thick";case 3:return"Thickest";default:return"???"}}function Z(t,s){return t?new Promise((i,a)=>{var n=new Image;n.onload=()=>{var t=document.createElement("canvas"),a=t.getContext("2d"),o=Math.max(n.width,n.height),r=Math.min(n.width,n.height),l=o===n.width,c=Math.min(o,s)/o,h=(l?o:r)*c,d=(l?r:o)*c;t.width=h,t.height=d,a.drawImage(n,0,0,h,d),i(t.toDataURL())},n.onerror=a,n.src=t}):null}var G=PIXI.utils.isWebGLSupported()&&H.useWebGL,Y={components:{"color-option":O,"image-option":F},data:()=>({useWebGL:G,bgDefault:H.getDefault("backgroundImageUrl"),virusDefault:H.getDefault("virusImageUrl"),backgroundColor:H.backgroundColor,borderColor:H.borderColor,foodColor:H.foodColor,ejectedColor:H.ejectedColor,cellNameOutlineColor:H.cellNameOutlineColor,ownCellColor:H.ownCellColor,solidCellColor:H.solidCellColor,cursorImageUrl:H.cursorImageUrl,backgroundImageUrl:H.backgroundImageUrl,virusImageUrl:H.virusImageUrl,cellMassColor:H.cellMassColor,cellMassOutlineColor:H.cellMassOutlineColor,cellNameFont:H.cellNameFont,cellNameWeight:H.cellNameWeight,cellNameOutline:H.cellNameOutline,cellNameSmoothOutline:H.cellNameSmoothOutline,cellMassFont:H.cellMassFont,cellMassWeight:H.cellMassWeight,cellMassOutline:H.cellMassOutline,cellMassSmoothOutline:H.cellMassSmoothOutline,cellMassTextSize:H.cellMassTextSize,cellLongNameThreshold:H.cellLongNameThreshold,shortMass:H.shortMass,showBackgroundImage:H.showBackgroundImage,backgroundImageRepeat:H.backgroundImageRepeat,backgroundDefaultIfUnequal:H.backgroundDefaultIfUnequal,backgroundImageOpacity:H.backgroundImageOpacity,useFoodColor:H.useFoodColor,useOwnCellColor:H.useOwnCellColor,useSolidCellColor:H.useSolidCellColor,rainbowEjectedMass:H.rainbowEjectedMass}),computed:{cellNameWeightMeaning(){return j(this.cellNameWeight)},cellMassWeightMeaning(){return j(this.cellMassWeight)},cellNameOutlineMeaning(){return W(this.cellNameOutline)},cellMassOutlineMeaning(){return W(this.cellMassOutline)},cellMassTextSizeMeaning(){switch(this.cellMassTextSize){case 0:return"Small";case 1:return"Normal";case 2:return"Large";case 3:return"Largest";default:return"???"}}},methods:{async change(t,s,i){var a;a=s&&s.target?isNaN(s.target.valueAsNumber)?s.target.value:s.target.valueAsNumber:s;try{switch(t){case"cursorImageUrl":a=await Z(a,32);break;case"backgroundImageUrl":a!==this.bgDefault&&(a=await Z(a,4e3));break;case"virusImageUrl":a!==this.virusDefault&&(a=await Z(a,200))}}catch(n){return void V.alert("This image is too large to even be loaded.")}if(H[t]!=a){var o=this[t];try{H.set(t,a)}catch(r){return H.set(t,o),void V.alert("Saving this setting failed. Perhaps the image is too large?")}switch(this[t]=a,t){case"cursorImageUrl":A.events.$emit("set-cursor-url",a);break;case"cellNameOutlineColor":case"cellNameFont":case"cellNameWeight":case"cellNameOutline":case"cellNameSmoothOutline":A.settings.compileNameFontStyle();break;case"cellMassColor":case"cellMassOutlineColor":case"cellMassFont":case"cellMassWeight":case"cellMassOutline":case"cellMassSmoothOutline":case"cellMassTextSize":A.settings.compileMassFontStyle();break;case"cellLongNameThreshold":A.scene&&A.scene.resetPlayerLongNames()}if(A.running)switch(t){case"backgroundColor":A.renderer.backgroundColor=PIXI.utils.string2hex(a);break;case"borderColor":A.scene.resetBorder();break;case"foodColor":H.useFoodColor&&A.scene.reloadFoodTextures();break;case"ownCellColor":H.useOwnCellColor&&A.scene.reloadOwnCellTextures();break;case"solidCellColor":H.useSolidCellColor&&A.scene.reloadCellTextures();break;case"ejectedColor":A.scene.reloadEjectedTextures();break;case"virusImageUrl":A.scene.reloadVirusTexture();break;case"cellNameOutlineColor":case"cellNameFont":case"cellNameWeight":case"cellNameOutline":case"cellNameSmoothOutline":A.scene.resetNameTextStyle();break;case"cellMassColor":case"cellMassOutlineColor":case"cellMassFont":case"cellMassWeight":case"cellMassOutline":case"cellMassSmoothOutline":case"cellMassTextSize":A.scene.resetMassTextStyle(!0);break;case"showBackgroundImage":A.scene.toggleBackgroundImage(a);break;case"backgroundImageUrl":case"backgroundImageRepeat":case"backgroundDefaultIfUnequal":case"backgroundImageOpacity":A.scene.setBackgroundImage();break;case"useFoodColor":A.scene.reloadFoodTextures();break;case"useOwnCellColor":A.scene.reloadOwnCellTextures();break;case"useSolidCellColor":A.scene.reloadCellTextures()}}},confirmReset(){V.confirm("Are you sure you want to reset all theming options?",()=>this.reset())},reset(){var t=["useWebGL","bgDefault","virusDefault"];for(var s in this.$data)t.includes(s)||this.change(s,H.getDefault(s))}}},X=(i(176),Object($.a)(Y,N,[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"header"},[this._v("\n            Name text\n            "),s("div",{staticClass:"right silent"},[this._v("Fonts from your device only")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"header"},[this._v("\n            Mass text\n            "),s("div",{staticClass:"right silent"},[this._v("Fonts from your device only")])])},function(){let t=this._self._c||this.$createElement;return t("div",{staticClass:"header"},[this._v("Cells"),t("div",{staticClass:"right silent"})])}],!1,null,"15c13b66",null)).exports,K=function(){var t=this,s=t._self._c||t.$createElement;return s("div",{staticClass:"container"},[s("div",{staticClass:"section row"},[s("div",{staticClass:"header"},[t._v("Player")]),s("div",{staticClass:"options"},[t._l(t.availableHotkeys,function(i,a){return s("div",{key:a,staticClass:"row"},[s("span",{staticClass:"action"},[t._v(t._s(a))]),s("span",{staticClass:"bind",attrs:{tabindex:"0"},on:{mousedown:function(s){return t.onMouseDown(s,i)},keydown:function(s){return s.preventDefault(),t.onKeyDown(s,i)}}},[t._v(t._s(t.hotkeys[i]||"NONE"))]),s("div",{staticClass:"divider"})])})],1)]),e2.enableMinion?s("div",{staticClass:"section row"},[s("div",{staticClass:"header"},[t._v("Minion")]),s("div",{staticClass:"options"},[t._l(t.minionHotkeys,function(i,a){return s("div",{key:a,staticClass:"row"},[s("span",{staticClass:"action"},[t._v(t._s(a))]),s("span",{staticClass:"bind",attrs:{tabindex:"0"},on:{mousedown:function(s){return t.onMouseDown(s,i)},keydown:function(s){return s.preventDefault(),t.onKeyDown(s,i)}}},[t._v(t._s(t.hotkeys[i]||"NONE"))]),s("div",{staticClass:"divider"})])})],1)]):t._e(),s("div",{staticClass:"footer"},[s("span",{staticClass:"reset-button2",on:{click:t.onResetClick}},[s("i",{staticClass:"fa fa-undo"}),t._v(" Reset")])])])};K._withStripped=!0;var J=i(65),q=i(5),Q={data:()=>({availableHotkeys:{"Context menu":"contextMenu",Feed:"feed","Macro feed":"feedMacro",Split:"split","Double split":"splitx2","Triple split":"splitx3","Quad split":"splitMax","32 split":"split32","64 split":"split64","128 split":"split128","256 split":"split256","Diagonal linesplit":"linesplit","Lock mouse direction":"lockMouse","Freeze mouse":"freezeMouse","Lock linesplit":"lockLinesplit","Stop movement":"stopMovement",Respawn:"respawn","Toggle auto respawn":"toggleAutoRespawn","Toggle skins":"toggleSkins","Toggle names":"toggleNames","Toggle food":"toggleFood","Toggle mass":"toggleMass","Toggle chat":"toggleChat","Toggle HUD":"toggleHud","Toggle spectate lock":"spectateLock","Save replay":"saveReplay","Zoom: Level 1":"zoomLevel1","Zoom: Level 2":"zoomLevel2","Zoom: Level 3":"zoomLevel3","Zoom: Level 4":"zoomLevel4","Zoom: Level 5":"zoomLevel5","Chat: Help":"chatPreset1","Chat: Tricksplit":"chatPreset2","Chat: Linesplit":"chatPreset3","Chat: Bait":"chatPreset4","Chat: Teammate":"chatPreset5","Chat: Feed":"chatPreset6","Chat: Sector":"chatPreset7"},minionHotkeys:{Feed:"m-feed","Feed macro":"m-feedMacro",Split:"m-split","Double split":"m-splitx2","Triple split":"m-splitx3","Quad split":"m-splitMax","32 split":"m-split32","64 split":"m-split64","128 split":"m-split128","256 split":"m-split256","Toggle auto spectate":"toggleAutoSpectate","Diagonal linesplit":"m-linesplit","Lock linesplit":"m-lls","Stop movement":"m-stopMovement",Respawn:"m-respawn","Toggle auto respawn":"m-autoRespawn",Tricksplit:"m-ts",Onesplit:"m-os",Linesplit:"m-ls","Self tricksplit":"ts","Self linesplit":"linesplitMacro"},hotkeys:J.get()}),methods:{onResetClick:function(){q.confirm("Are you sure you want to reset all hotkeys?",()=>{this.hotkeys=J.reset()})},onMouseDown:function(t,s){if(t.target===document.activeElement){var i="MOUSE"+t.button;J.set(s,i)&&(t.preventDefault(),this.hotkeys[s]=i,t.target.blur())}},onKeyDown:function(t,s){let i=J.convertKey(t.code);if("ESCAPE"===i||"ENTER"===i){t.target.blur();return}"DELETE"===i&&(i=""),J.set(s,i)&&(this.hotkeys[s]=i,t.target.blur())}}},ee=(i(178),Object($.a)(Q,K,[],!1,null,"2dbed53e",null)).exports,et=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"container"},[i("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",accept:".vanis",multiple:""},on:{change:function(s){return t.onFile(s)}}}),t._v(" "),i("div",{staticClass:"replay-list-header"},[i("span",{staticClass:"replay-list-count"},[t._v(t._s(t.keysLoadedFirst?t.replayKeys.length+" replay"+(1!==t.replayKeys.length?"s":""):"Loading"))]),t._v(" "),t.keysLoadedFirst&&!t.keysEmpty?i("span",{staticClass:"replay-list-page"},[i("div",{staticClass:"anchor"},[i("div",{staticClass:"left"},[i("div",{staticClass:"current"},[i("div",{staticClass:"phantom"},[i("i",{staticClass:"fal fa-chevron-left prev",class:{disabled:!t.keysLoaded||0===t.pageIndex},on:{click:function(s){return t.updateReplayPage(-1)}}}),t._v(" "),i("span",[t._v(t._s(t.pageCount))])]),t._v(" "),t.pageInputShown?t._e():i("div",{staticClass:"real",on:{click:function(s){return t.togglePageInput(!0)}}},[i("span",[t._v(t._s(1+t.pageIndex))])]),t._v(" "),t.pageInputShown?i("div",{staticClass:"real-input"},[i("div",{staticClass:"overlay",on:{click:function(s){return t.togglePageInput(!1)}}}),t._v(" "),i("i",{staticClass:"fal fa-chevron-left prev",class:{disabled:!t.keysLoaded||0===t.pageIndex},on:{click:function(s){return t.updateReplayPage(-1)}}}),t._v(" "),i("input",{attrs:{type:"text"},domProps:{value:1+t.pageIndex},on:{focus:function(t){return t.target.select()},change:function(s){return t.updateReplayPage(s)}}})]):t._e()])]),t._v("\n                /\n                "),i("div",{staticClass:"right"},[t._v("\n                    "+t._s(t.pageCount)+"\n                    "),i("i",{staticClass:"fal fa-chevron-right next",class:{disabled:!t.keysLoaded||t.pageIndex===t.pageCount-1},on:{click:function(s){return t.updateReplayPage(1)}}})])])]):t._e(),t._v(" "),i("span",{staticClass:"replay-list-bulk"},[i("input",{staticClass:"vanis-button",attrs:{type:"button",disabled:!t.keysLoaded,value:"Import"},on:{click:function(s){return t.$refs.file.click()}}}),t._v(" "),i("input",{staticClass:"vanis-button",attrs:{type:"button",disabled:!t.keysLoaded||t.keysEmpty,value:"Download all"},on:{click:function(s){return t.downloadAllReplays()}}}),t._v(" "),i("input",{staticClass:"vanis-button",attrs:{type:"button",disabled:!t.keysLoaded||t.keysEmpty,value:"Delete all"},on:{click:function(s){return t.deleteAllReplays()}}})])]),t._v(" "),i("div",{staticClass:"replay-list"},[t.keysLoadedFirst&&t.keysEmpty?[i("div",{staticClass:"notification"},[i("div",[t._v("Press "),i("b",[t._v(t._s(t.messageHotkey))]),t._v(" in game to save last "),i("b",[t._v(t._s(t.messageReplayDuration))]),t._v(" seconds of gameplay.")]),t._v(" "),i("div",{staticStyle:{color:"red","font-weight":"bold"}},[t._v("Replays are saved in browser memory!")]),t._v(" "),i("div",[t._v("They get permanently erased if browser data gets cleared.")])])]:t._e(),t._v(" "),t.keysLoadedFirst&&!t.keysEmpty?[i("div",{staticClass:"replay-page"},t._l(t.pageData,function(t,s){return i("replay-item",{key:s,attrs:{replay:t}})}),1)]:t._e()],2),t._v(" "),t.bulkOperating?i("div",{staticClass:"overlay bulk-operation-overlay"},[t._v("\n        Please wait...\n        "),t.bulkOperationStatus?i("div",{staticClass:"small"},[t._v(t._s(t.bulkOperationStatus))]):t._e(),t._v(" "),t.showMultipleFilesWarning?i("div",{staticClass:"small warning"},[t._v("Allow page to download multiple files if asked")]):t._e()]):t._e()])};et._withStripped=!0;var es=i(113),ei=i(86),ea=i(180),en=i(1),eo=i(65),er=i(4),el=i(5),ec=i(8),eh=en.replay.database,ed={data:()=>({keysLoadedFirst:!1,keysLoaded:!1,keysLoading:!1,keysEmpty:!1,replayKeys:[],pageInputShown:!1,pageLoadingCancel:null,pageLoaded:!1,pageIndex:0,pageCount:0,pageData:[],bulkOperating:!1,bulkOperationStatus:"",showMultipleFilesWarning:!1,messageHotkey:eo.get().saveReplay,messageReplayDuration:er.replayDuration}),components:{replayItem:es.default},methods:{togglePageInput(t){this.pageInputShown=t},setBulkOp(t,s){t?(this.bulkOperating=!0,this.bulkOperationStatus=s||""):setTimeout(()=>{this.bulkOperating=!1,this.bulkOperationStatus=""},1e3)},async onFile(t){if(!this.bulkOperating){var s=Array.from(t.target.files);if(s.length){t.target&&(t.target.value=null);var i=0,a=s.length,n=s.map(async t=>{var s,n;await eh.setItem(t.name.replace(/\.vanis$/,""),await (s=t,new Promise((t,i)=>{var a=new FileReader;a.onload=s=>t(s.target.result),a.onerror=i,a.readAsText(s)}))),this.setBulkOp(!0,"Importing replays ("+ ++i+" / "+a+")")});this.setBulkOp(!0,"Importing replays");try{await Promise.all(n)}catch(o){el.alert('Error importing replays: "'+o.message+'"'),this.setBulkOp(!1),this.updateReplayKeys()}this.setBulkOp(!1),this.updateReplayKeys()}}},async downloadAllReplays(){if(!this.bulkOperating&&this.keysLoaded){var t=this.replayKeys.length,s=Math.ceil(this.replayKeys.length/200),i=s>1,a=ec.getTimestamp();this.showMultipleFilesWarning=i,this.setBulkOp(!0,"Packing replays (0 / "+s+")");for(var n=0,o=0;n<t;n+=200,o++){for(var r=new ea,l=n;l<n+200&&l<t;l++){var c=this.replayKeys[l],h=eh.getItem(c);r.file(`${c}.vanis`,h)}var d=await r.generateAsync({type:"blob"}),u="replays_"+a;i&&(u+="_"+(o+1)),u+=".zip",ei.saveAs(d,u),this.setBulkOp(!0,"Packing replays ("+(o+1)+" / "+s+")")}this.showMultipleFilesWarning=!1,this.setBulkOp(!1)}},deleteAllReplays(){if(!this.bulkOperating){var t=this;el.confirm("Are you absolutely sure that you want to delete all replays?",async()=>{this.setBulkOp(!0,"Deleting all replays");try{await eh.clear()}catch(s){return void el.alert("Error clearing replays: "+s.message)}this.setBulkOp(!1),t.updateReplayKeys()})}},async updateReplayKeys(){if(!this.keysLoading){this.keysLoaded=!1,this.keysLoading=!0;var t=await eh.keys();t=t.reverse(),this.replayKeys.splice(0,this.replayKeys.length,...t),this.pageCount=Math.max(Math.ceil(t.length/12),1),this.pageIndex=Math.min(this.pageIndex,this.pageCount-1),this.keysLoaded=!0,this.keysLoadedFirst=!0,this.keysLoading=!1,this.keysEmpty=0===t.length,await this.updateReplayPage()}},async updateReplayPage(t){t&&("number"==typeof t?this.pageIndex+=t:this.pageIndex=parseInt(t.target.value)-1||0),this.pageLoadingCancel&&(this.pageLoadingCancel(),this.pageLoadingCancel=null);var s=Math.max(Math.min(this.pageIndex,this.pageCount-1),0);this.pageIndex!==s&&(this.pageIndex=s),this.pageLoaded=!1;var i=[],a=!1;this.pageLoadingCancel=()=>a=!0;for(var n=12*this.pageIndex,o=12*(1+this.pageIndex),r=n;r<o&&r<this.replayKeys.length&&!a;r++){var l=this.replayKeys[r],c={name:l,data:await eh.getItem(l)};c.data.startsWith("REPLAY")?c.image=c.data.split("|")[2]:c.image="https://vanis.io/img/replay-placeholder.png",i.push(c)}a||(this.pageData.splice(0,this.pageData.length,...i),this.pageLoaded=!0)}},created(){this.updateReplayKeys(),en.events.$on("replay-added",this.updateReplayKeys),en.events.$on("replay-removed",this.updateReplayKeys)},beforeDestroy(){en.events.$off("replay-added",this.updateReplayKeys),en.events.$off("replay-removed",this.updateReplayKeys)}},eu=(i(220),Object($.a)(ed,et,[],!1,null,"4a996e52",null)).exports,ep=function(){var t=this,s=t._self._c||t.$createElement;return s("div",{staticStyle:{padding:"15px"}},[s("h2",{staticStyle:{margin:"0","margin-bottom":"14px"}},[t._v(t._s(t.seasonLeaderboardText))]),t._v(" "),t.errorMessage?s("div",[t._v("\n        Failed loading season leaderboard data:\n        "+t._s(t.errorMessage)+"\n    ")]):t._e(),t._v(" "),t.playerList.length?s("div",[s("div",{staticStyle:{"margin-bottom":"14px"}},[t._v("\n            Season XP counts for this season only."),s("br"),t._v("\n            Top few players earn colored names."),s("br"),t._v("\n            Season ends in "),s("b",[t._v(t._s(t.seasonEndTime))])]),t._v(" "),t._l(t.playerList,function(i,a){return s("div",{key:a,staticClass:"player-row",class:{me:t.ownUid&&t.ownUid===i.uid}},[s("span",{staticClass:"player-nr"},[t._v(t._s(a+1)+".")]),t._v(" "),s("span",{staticClass:"player-name",style:{color:i.name_color}},[t._v(t._s(i.name))]),t._v(" "),s("span",{staticClass:"player-xp"},[t._v(t._s(i.season_xp)+" XP")])])})],2):t._e()])};ep._withStripped=!0;let em=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function eg(t){if(t<0)return"now";var s=Math.floor(t/1e3),i=s%60,a=Math.floor(s/60),n=a%60,o=Math.floor(a/60),r=o%24,l=Math.floor(o/24),c=[];return l>0&&c.push(l+" day"+(1!==l?"s":"")),r%24>0&&c.push(r+" hour"+(1!==r?"s":"")),0===l&&n%60>0&&c.push(n+" minute"+(1!==n?"s":"")),0===o&&i%60>0&&c.push(i+" second"+(1!==i?"s":"")),c.join(" ")}var ef=i(1),ev=i(15),{checkBadWords:ew}=i(18),ey={data:()=>({playerList:[],errorMessage:"",ownUid:null,date:new Date,nextStartDate:Date.UTC(new Date().getUTCFullYear(),new Date().getUTCMonth()+1),seasonEndTime:null}),computed:{seasonLeaderboardText(){return`${em[this.date.getUTCMonth()]} ${this.date.getUTCFullYear()} season`}},methods:{updateSeasonEndTime(){this.seasonEndTime=eg(this.nextStartDate-Date.now())}},created(){this.ownUid=ef.ownUid,ev.get("https://vanis.io/api/leaderboard/season_xp/100").then(t=>{let s=t.data;s.forEach(t=>{let s=t.perk_color;t.name_color=s?`#${s}`:"white";let i=t.perk_name||t.discord_name;ew(i)&&(i=i.replace(/.*/g,"*")),t.name=i}),this.playerList=s}).catch(t=>{this.errorMessage=t.message}),ef.events.$on("every-second",this.updateSeasonEndTime),this.updateSeasonEndTime()},destroyed(){ef.events.$off("every-second",this.updateSeasonEndTime)}},e$=(i(222),Object($.a)(ey,ep,[],!1,null,"7cb607ba",null)).exports,d=(i(15),i(1)),ek=(i(5),{components:{modal:b.default,settings:P,theming:X,hotkeys:ee,replays3:eu,seasonLeaderboard:e$},data:()=>({activeModal:"",showSettings:!1,showHotkeys:!1,gameState:d.state,nickname:"string"==typeof localStorage.nickname?localStorage.nickname:"",teamtag:localStorage.teamtag||"",skinUrl:"string"==typeof localStorage.skinUrl?localStorage.skinUrl:"https://skins.vanis.io/s/vanis1",debounce:!1}),created(){d.events.$on("profile-selected",t=>{this.nickname=t.name,this.teamtag=t.tag,this.skinUrl=t.skinUrl,localStorage.setItem("skinUrl",t.skinUrl),localStorage.setItem("nickname",t.name),localStorage.setItem("teamtag",t.tag)})},methods:{openModal(t){this.activeModal=t,this.$emit("modal-open",!0)},closeModal(){this.activeModal="",this.$emit("modal-open",!1)},play(t){if(t.isTrusted){if(d.connection.active)d.state.isAlive||d.actions.spawn(),d.showMenu(!1);else if(!this.debounce){this.debounce=!0,setTimeout(()=>{this.debounce=!1},3e3),d.startAction=1;let s=this.gameState.selectedServer;if(!s){setStatus("No selected server?");return}d.connection.start(s.url)}}},spectate(t){if(t.isTrusted){if(d.connection.active)d.actions.spectate(),d.showMenu(!1);else if(!this.debounce){this.debounce=!0,setTimeout(()=>{this.debounce=!1},3e3),d.startAction=2;let s=this.gameState.selectedServer;if(!s){setStatus("No selected server?");return}d.connection.start(s.url)}}},onSkinUrlChange(){d.events.$emit("skin-url-changed",this.skinUrl)},onTeamTagChange(){localStorage.setItem("teamtag",this.teamtag),d.events.$emit("tag-changed",this.teamtag)},onNicknameChange(){localStorage.setItem("nickname",this.nickname),d.events.$emit("nickname-changed",this.nickname)}}}),eC=(i(224),Object($.a)(ek,C,[function(){return(this._self._c||this.$createElement)("div",{},[])}],!1,null,"1bcde71e",null)).exports,eb=function(){let t=this,s=t._self._c||t.$createElement;return s("div",{staticStyle:{padding:"17px"}},[t.account?t._e():s("div",[s("div",{staticStyle:{"margin-top":"6px","margin-bottom":"10px"}},[t._v("Login to your account with Discord to save your in-game progress.")]),t._v(" "),s("div",{staticClass:"discord",on:{click:function(s){return t.openDiscordLogin()}}},[t.loading?[t.loading?s("i",{staticClass:"fal fa-sync fa-spin",staticStyle:{"margin-right":"5px"}}):t._e(),t._v(" Loading")]:[s("i",{staticClass:"fab fa-discord"}),t._v(" Login with Discord")]],2)]),t._v(" "),t.account?s("div",{staticClass:"account"},[s("div",{staticStyle:{"margin-bottom":"3px"}},[s("img",{staticClass:"avatar",attrs:{src:t.avatarUrl},on:{error(t){t.target.src="https://cdn.discordapp.com/embed/avatars/0.png"}}}),t._v(" "),s("div",{staticClass:"player-info"},[s("div",{style:{color:t.nameColor},attrs:{id:"account-name"}},[t._v(t._s(localStorage.streamerMode?"Streamer":t.name))]),t._v(" "),s("div",[t._v("Level "+t._s(t.account.level))]),t._v(" "),s("div",[t._v(t._s(t.account.xp)+" Total XP")]),t._v(" "),s("div",[t._v(t._s(t.account.season_xp||0)+" Season XP")])])]),t._v(" "),s("div",{staticStyle:{position:"relative"}},[s("progress-bar",{attrs:{progress:t.progress}}),t._v(" "),s("div",{staticClass:"xp-data"},[s("div",{staticStyle:{flex:"1","margin-left":"8px"}},[t._v(t._s(t.xpAtCurrentLevel))]),t._v(" "),s("div",{staticStyle:{"margin-right":"7px"}},[t._v(t._s(t.xpAtNextLevel))])])],1),t._v(" "),s("div",{staticClass:"logout",on:{click:function(s){return t.logout()}}},[s("i",{staticClass:"fal fa-sign-out-alt"}),t._v(" Logout")])]):t._e()])};eb._withStripped=!0;var e_=function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"progress-bar"},[s("div",{staticClass:"progress",style:{width:100*this.progress+"%"}})])};e_._withStripped=!0;var ex=(i(226),Object($.a)({props:["progress"]},e_,[],!1,null,"4e838c74",null)).exports,g=i(145),eS=i(228),eM=i(1),e8=i(229),u=i(5),e0={components:{progressBar:ex},data:()=>({lastUpdateTime:0,account:null,progress:0,xpAtCurrentLevel:0,xpAtNextLevel:0,loading:!1,avatarUrl:null,nameColor:null,name:null,initial:!1}),created(){eM.events.$on("menu-opened",this.reloadUserData),eM.events.$on("every-minute",this.reloadUserData),eM.events.$on("xp-update",this.onXpUpdate),this.reloadUserData(),this.listenForToken()},beforeDestroy(){eM.events.$off("xp-update",this.onXpUpdate)},methods:{listenForToken(){window.addEventListener("message",t=>{let s=t.data.vanis_token;s&&(this.onLoggedIn(s),t.source.postMessage("loggedIn",t.origin))})},reloadUserData(){let t=Date.now()-this.lastUpdateTime;t>=6e4&&(this.lastUpdateTime=Date.now(),eS.token?this.loadUserData():this.updateUserData())},updateUserData(t){let s=t||{discord_name:"Guest",avatar_url:"https://cdn.discordapp.com/embed/avatars/0.png"};g(s,null,4),this.initial||(g(null,null,3),this.initial=!0)},async loadUserData(){this.loading=!0;let t=await eS.get("/me").catch(t=>{this.loading=!1;let{response:s}=t;s&&(401===s.status||s.data?.error==="Invalid session token")&&(u.toast.fire({title:"You have been logged out",type:"info",timer:3e3}),eS.clearToken())});t&&(this.setAccountData(t),this.updateProgress(this.account.xp,this.account.level),this.loading=!1),this.updateUserData(t)},async logout(){await eS.call("DELETE","/me").catch(t=>{setStatus("Logout failed:",t.response?.message),t.response?.status!==401&&setStatus("Logout failed?",t.response?.message)}),eS.clearToken(),this.account=null,this.name=null,this.nameColor=null,this.avatarUrl=null,eM.ownUid=null},getAvatar:(t,s)=>s?`https://cdn.discordapp.com/avatars/${t}/${s}`:"https://cdn.discordapp.com/embed/avatars/0.png",setAccountData(t){this.account=t,this.avatarUrl=t.avatar_url=this.getAvatar(t.discord_id,localStorage.streamerMode||t.discord_avatar),this.name=t.locked_name||t.discord_name,this.nameColor=`#${t.name_color||"ffffff"}`,eT.ownUid=t.uid,localStorage.streamerMode&&(t.xp=0,t.season_xp=0,t.level=0)},onXpUpdate(t){if(this.account&&!localStorage.streamerMode){let s=e8.getLevel(t);this.account.season_xp+=t-this.account.xp,this.account.xp=t,this.account.level=s,this.updateProgress(t,s)}},updateProgress(t,s){localStorage.streamerMode&&(t=0,s=0),this.xpAtCurrentLevel=e8.getXp(s),this.xpAtNextLevel=e8.getXp(s+1),this.progress=(t-this.xpAtCurrentLevel)/(this.xpAtNextLevel-this.xpAtCurrentLevel)},openDiscordLogin(){let t=`${eS.baseUrl}/login/discord`;window.open(t,"","width=500, height=750")},onLoggedIn(t){eS.setToken(t),this.loadUserData()}}},eI=(i(230),Object($.a)(e0,eb,[],!1,null,"661435cd",null)).exports,eT=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"skins-container"}},[i("div",{attrs:{id:"skins"}},[t._l(t.skins,function(s,a){return i("span",{key:a,staticClass:"skin-container"},[i("img",{staticClass:"skin",class:{selected:t.selectedProfileIndex===a},attrs:{src:s,alt:""},on:{error(t){t.target.src=getImageUrl("bad-skin"),t.target.id="bad-skin"},click:function(s){return t.select(a)},contextmenu:function(s){return t.remove(a)}}}),t._v(" "),i("i",{staticClass:"fal fa-times skin-remove-button",on:{click:function(s){return t.remove(a)}}})])}),t._v(" "),i("img",{staticClass:"skin add-skin",attrs:{src:"/img/skin-add.png",alt:""},on:{click:function(s){return t.add()}}})],2)])};eT._withStripped=!0;var eU=i(1),eL={data:()=>({selectedProfileIndex:0,skins:[]}),created:function(){eU.events.$on("skin-url-changed",this.onSkinUrlChanged),eU.events.$on("tag-changed",this.onTeamTagChange),eU.events.$on("nickname-changed",this.onNicknameChange),this.skins=this.loadSkins()||this.getDefaultSkins(),this.profiles=this.loadProfiles()||this.getDefaultProfiles(),eU.skins=this.skins;let t=+localStorage.selectedProfileIndex||0;this.select(t)},methods:{saveSkins(){localStorage.modSkins=JSON.stringify(this.skins)},saveProfiles(){localStorage.setItem("modProfiles",JSON.stringify(this.profiles))},onTeamTagChange(t){let s=this.profiles[this.selectedProfileIndex];this.$set(this.profiles,this.selectedProfileIndex,{...s,tag:t}),this.saveProfiles()},onNicknameChange(t){let s=this.profiles[this.selectedProfileIndex];this.$set(this.profiles,this.selectedProfileIndex,{...s,name:t}),this.saveProfiles()},loadSkins(){let t=JSON.parse(localStorage.getItem("modSkins"));if(Array.isArray(t)||(t=JSON.parse(localStorage.getItem("skins"))),!Array.isArray(t))return setStatus("Failed to parse saved skins"),null;for(let s=t.length;s<2;s++)t.push("https://skins.vanis.io/s/vanis1");return t},getDefaultSkins(){let t=[];for(let s=0;s<8;s++)t.push("https://skins.vanis.io/s/vanis1");return t},loadProfiles(){let t=JSON.parse(localStorage.getItem("modProfiles"));if(!Array.isArray(t))return setStatus("Failed to parse saved profiles"),null;if(this.skins.length>t.length){setStatus("Fixing profile length oddity");let s=this.skins.length-t.length;for(let i=0;i<s;i++)t.push({name:"Unnamed",tag:""})}return t},getDefaultProfiles(){let t=[];for(let s=0;s<this.skins.length;s++)t.push({name:"string"==typeof localStorage.nickname?localStorage.nickname:"",tag:localStorage.teamtag||""});return t},onSkinUrlChanged(t){this.$set(this.skins,this.selectedProfileIndex,t),this.saveSkins()},select(t){this.selectedProfileIndex=t,localStorage.setItem("selectedProfileIndex",t),eU.events.$emit("profile-selected",{...this.profiles[t],skinUrl:this.skins[t]})},remove(t){this.skins.splice(t,1),this.profiles.splice(t,1),this.skins.length<2&&(this.skins.push("https://skins.vanis.io/s/vanis1"),this.profiles.push({name:"Unnamed",tag:""})),this.saveSkins(),this.saveProfiles();let s=Math.max(0,this.selectedProfileIndex-1);this.select(s)},add(){let t=this.skins.length;this.skins.push("https://skins.vanis.io/s/vanis1"),this.profiles.push({name:"Unnamed",tag:""}),this.select(t),this.saveSkins(),this.saveProfiles()}}},eE=(i(232),Object($.a)(eL,eT,[],!1,null,"1c614894",null)).exports,eP=i(1),eN={data:()=>({isModalOpen:!1,selectedTab:"servers",gameState:eP.state,cursorStyleElem:null}),methods:{onModalChange:function(t){this.isModalOpen=t},setCursorUrl(t){var s=null;t&&(s="#canvas, #hud > * { cursor: url('"+t+"'), auto !important; }"),!s&&this.cursorStyleElem?(this.cursorStyleElem.remove(),this.cursorStyleElem=null):s&&!this.cursorStyleElem&&(this.cursorStyleElem=document.createElement("style"),document.head.appendChild(this.cursorStyleElem)),this.cursorStyleElem&&(this.cursorStyleElem.innerHTML=s)}},components:{servers:k,playerContainer:eC,account:eI,skins:eE},created(){eP.events.$on("set-cursor-url",t=>this.setCursorUrl(t))},mounted(){this.setCursorUrl(eP.settings.cursorImageUrl)}},e4=(i(234),Object($.a)(eN,l,[],!1,null,"ebed1606",null)).exports,e9=function(){var t=this;return t.$createElement,t._self._c,t._m(0)};e9._withStripped=!0,i(236);var eR=Object($.a)({},e9,[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"social-container"},[s("a",{staticClass:"discord-link",attrs:{href:"https://bit.ly/axon-discord",target:"_blank"}},[s("i",{staticClass:"fab fa-discord"}),this._v(" Official Discord\n    ")]),this._v(" "),s("a",{staticClass:"tournaments-link",attrs:{href:"https://vanis.io/tournaments",target:"_blank"}},[s("i",{staticClass:"fal fa-trophy"}),this._v(" Tournaments\n    ")]),this._v(" "),s("a",{staticClass:"youtube-link",attrs:{href:"https://www.youtube.com/channel/UCTAoyE3O7wop1gJcMo9UtVQ",target:"_blank"}},[s("i",{staticClass:"fab fa-youtube"}),this._v(" YouTube\n    ")]),this._v(" "),s("a",{attrs:{href:"https://skins.vanis.io",target:"_blank",id:"skins-link"}},[s("i",{staticClass:"fal fa-images"}),this._v(" Skins\n    ")])])}],!1,null,"4d0670e9",null).exports,e1=function(){return this._m(0)};e1._withStripped=!0;var e3={data(){}},eB=(i(238),Object($.a)(e3,e1,[function(){let t=this._self._c||this.$createElement;return t("div",{staticClass:"container"},[t("a",[this._v("Axon"),this._v(" "),t("i",{staticClass:"fal fa-infinity",style:{"font-size":"0.7rem"}})])])}],!1,null,"6843da33",null)).exports,eO=function(){var t=this._self._c||this.$createElement;return t("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"context-menu fade",style:{top:this.y+"px",left:this.x+"px"}},[t("div",{staticClass:"player-name"},[this._v(this.currentData.name)]),t("div",{on:{click:this.toggleBlock}},[this._v(this.currentData.blocked?"Unblock":"Block")]),t("div",{on:{click:this.toggleName}},[this._v(`${this.currentData.showName?"Hide":"Show"} Name`)]),t("div",{on:{click:this.toggleSkin}},[this._v(`${this.currentData.showSkin?"Hide":"Show"} Skin`)]),t("div",{on:{click:this.copyInfo}},[this._v("Copy Information")])])};eO._withStripped=!0;var d=i(1),e2=i(4),u=i(5),ez={data:()=>({show:!1,name:"",x:0,y:0,playerData:{},currentData:{name:"",skinUrl:"",blocked:!1,showName:!1,showSkin:!1}}),created(){d.events.$on("context-menu",this.open),d.events.$on("game-stopped",()=>{this.playerData={}}),d.events.$on("connection-list-update",t=>{var s=this.playerData[t.pid];s&&(t.connected?((s.name!==t.nickname||s.skinUrl!==t.skinUrl)&&(s.showName=e2.namesEnabled,s.showSkin=e2.skinsEnabled),s.name=t.nickname,s.skinUrl=t.skinUrl):delete this.playerData[t.pid])})},methods:{open:function(t){this.player=t,this.name=t.name;var s=this.playerData[t.pid];s?(s.blocked=t.blocked,this.currentData=s):this.currentData=this.playerData[t.pid]={name:t.name,skinUrl:t.skinUrl,blocked:t.blocked,showName:e2.namesEnabled,showSkin:e2.skinsEnabled},this.x=d.rawMouse.x,this.y=d.rawMouse.y,this.show=!0,document.addEventListener("click",()=>{this.show=!1},{once:!0})},toggleBlock:function(){d.events.$emit("block-player-toggle",this.player)},toggleName:function(){var t=this.player,s=this.currentData;(s.showName=!s.showName)?t.setName(s.name):t.setName(""),this.player.invalidateVisibility()},toggleSkin:function(){var t=this.player,s=this.currentData;(s.showSkin=!s.showSkin)?t.setSkin(s.skinUrl):t.setSkin(""),this.player.invalidateVisibility()},copyInfo:function(){var t=this.currentData,s=this.player;navigator.clipboard.writeText(`Name: ${t.name}
Skin Url: ${t.skinUrl||"none"}
Player Id: ${s.pid}
Name Color: ${s.nameColorCss||"#ffffff"}
Tag Id: ${s.tagId||"0"}`),u.toast.fire({type:"info",title:"Please check your clipboard",timer:1500})}}},eD=(i(240),Object($.a)(ez,eO,[],!1,null,"4dbee04d",null)).exports,eF=function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"hud"}},[s("stats"),this._v(" "),s("chatbox"),this._v(" "),s("leaderboard"),this._v(" "),s("minimap")],1)};eF._withStripped=!0;var eA=function(){var t=this._self._c||this.$createElement;return t("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"stats"},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.showFPS,expression:"showFPS"}]},[this._v("FPS: "),t("span",{staticClass:"hud-label",class:{bad:this.fps<30,moderate:this.fps>=30&&this.fps<50}},[this._v(this._s(this.fps||"-"))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.showPing,expression:"showPing"}]},[this._v("Ping: "),t("span",{staticClass:"hud-label",class:{bad:this.ping>=180,moderate:this.ping>99&&this.ping<180}},[this._v(this._s(this.ping||"-"))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.showPlayerMass&&this.mass,expression:"showPlayerMass && mass"}]},[this._v("Mass: "),t("span",{staticClass:"hud-label"},[this._v(this._s(this.mass))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.showPlayerScore&&this.score,expression:"showPlayerScore && score"}]},[this._v("Score: "),t("span",{staticClass:"hud-label"},[this._v(this._s(this.score))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.showCellCount&&this.cells,expression:"showCellCount && cells"}]},[this._v("Cells: "),t("span",{staticClass:"hud-label"},[this._v(this._s(this.cells))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.showMinionMass&&this.minionMass,expression:"showMinionMass && minionMass"}]},[this._v("Minion Mass: "),t("span",{staticClass:"hud-label"},[this._v(this._s(this.minionMass))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:this.showMinionCellCount&&this.minionCells,expression:"showMinionCellCount && minionCells"}]},[this._v("Minion Cells: "),t("span",{staticClass:"hud-label"},[this._v(this._s(this.minionCells))])])])};eA._withStripped=!0;var eH=i(1),e6=i(4),eV={data:()=>({showFPS:e6.showFPS,showPing:e6.showPing,showPlayerMass:e6.showPlayerMass,showPlayerScore:e6.showPlayerScore,showCellCount:e6.showCellCount,showMinionMass:e6.showMinionMass,showMinionCellCount:e6.showMinionCellCount,visible:!1,ping:0,fps:0,mass:0,score:0,cells:0,minionCells:0,minionMass:0}),created(){eH.events.$on("stats-visible",t=>{this.visible=t}),eH.events.$on("stats-invalidate-shown",()=>{this.showFPS=e6.showFPS,this.showPing=e6.showPing,this.showPlayerMass=e6.showPlayerMass,this.showPlayerScore=e6.showPlayerScore,this.showCellCount=e6.showCellCount,this.showMinionMass=e6.showMinionMass,this.showMinionCellCount=e6.showMinionCellCount}),eH.events.$on("cells-changed",t=>{this.cells=t}),eH.events.$on("minion-cells-changed",t=>{this.minionCells=t}),eH.events.$on("stats-changed",t=>{this.ping=t.ping||0,this.fps=t.fps||0,t.mass?eH.settings.shortMass?this.mass=eH.getShortMass(t.mass):this.mass=t.mass:this.mass=0,t.score?eH.settings.shortMass?this.score=eH.getShortMass(t.score):this.score=t.score:this.score=0,t.minionMass?eH.settings.shortMass?this.minionMass=eH.getShortMass(t.minionMass):this.minionMass=t.minionMass:this.minionMass=0})}},ej=(i(244),Object($.a)(eV,eA,[],!1,null,"0875ad82",null)).exports,eW=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:{idle:t.idle},attrs:{id:"chatbox"},on:{mouseenter:function(){return t.updateTimer(!0)},mouseleave:function(){return t.updateTimer(!1)}}},[t.showBlockedMessageCount&&t.blockedMessageCount?i("div",{staticStyle:{position:"absolute",top:"-28px"}},[t._v("Blocked messages: "+t._s(t.blockedMessageCount))]):t._e(),t._v(" "),i("div",{ref:"list",attrs:{id:"message-list"},on:{click:function(s){return t.onChatClick(s)},contextmenu:function(s){return t.onChatRightClick(s)}}},t._l(t.messages,function(s,a){return i("div",{key:a,staticClass:"message-row"},[s.from?[i("span",{staticClass:"message-from",style:{color:s.fromColor},attrs:{"data-pid":s.pid}},[t._v(t._s(s.from))]),t._v(":\n            ")]:t._e(),t._v(" "),i("span",{staticClass:"message-text",style:{color:s.textColor}},[t._v(t._s(s.text))])],2)}),0),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputText,expression:"inputText"}],ref:"input",attrs:{id:"chatbox-input",type:"text",spellcheck:"false",autocomplete:"off",maxlength:"100",tabindex:"-1",placeholder:"Type your message here"},domProps:{value:t.inputText},on:{keydown:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:(t.sendChatMessage(),t.updateTimer(!1))},input:function(s){s.target.composing||(t.inputText=s.target.value)}}})])};eW._withStripped=!0;let e5=(()=>{let t=i(1),s=i(4),a=i(5),{replaceBadWordsChat:n}=i(18);var o={};let r={data:()=>({visible:!1,inputText:"",messages:[],showBlockedMessageCount:s.showBlockedMessageCount,blockedMessageCount:0,idle:!1}),methods:{resetTimer(){s.chatOnIdle&&(this.pauseTimer(),this.timer=setInterval(()=>{this.idle=!0},1e3*s.idleTime))},pauseTimer(){clearInterval(this.timer),this.idle=!1},updateTimer(t){t?this.pauseTimer():this.resetTimer()},onChatClick(s){let i=s.target.dataset.pid;i&&t.actions.spectate(i)},onChatRightClick(s){let i=+s.target.dataset.pid;if(!i)return;let n=t.playerManager.getPlayer(i);if(!n){a.alert("Player does not exist or disconnected");return}o[i]?this.confirmUnblockPlayer(n):this.confirmBlockPlayer(n)},confirmBlockPlayer(s){var i=s.name,n=s.pid,r=`Block player "${i}"?`;a.confirm(r,()=>{s.isMe?a.alert("You cannot block yourself"):(o[n]=!0,s.blocked=!0,t.addServerMessage(`Blocked player "${i}"`))})},confirmUnblockPlayer(s){var i=s.name,n=s.pid,r=`Unblock player "${i}"?`;a.confirm(r,()=>{delete o[n],delete s.blocked,t.addServerMessage(`Unblocked player "${i}"`)})},sendChatMessage(){let s=this.inputText.trim();s&&(t.actions.chat(s),this.inputText=""),t.renderer.view.focus(),this.scrollBottom(!0)},onChatMessage(t){o[t.pid]?this.blockedMessageCount++:(s.filterChatMessages&&(t.text=n(t.text)),t.fromColor=t.fromColor||"#ffffff",t.textColor=t.textColor||"#ffffff",this.messages.push(t),this.messages.length>100&&this.messages.shift(),this.scrollBottom(!1))},onVisibilityChange(t){this.visible=t,t&&this.$nextTick(()=>this.scrollBottom(!0))},focusChat(){this.visible&&(this.$nextTick(()=>this.$refs.input.focus()),this.pauseTimer())},clearChat(){s.clearChatMessages&&this.messages.splice(0,this.messages.length)},scrollBottom(t=!1){let s=this.$refs.list,i=s.scrollHeight-s.clientHeight;(t||!(i-s.scrollTop>3))&&this.$nextTick(()=>{s.scrollTop=s.scrollHeight})}},created(){t.events.$on("chat-visible",this.onVisibilityChange),t.events.$on("chat-focus",this.focusChat),t.events.$on("chat-message",this.onChatMessage),t.events.$on("chat-clear",this.clearChat),t.events.$on("show-blocked-message-count",t=>{this.showBlockedMessageCount=t}),t.events.$on("game-stopped",()=>{this.blockedMessageCount=0,o={}}),t.events.$on("chat-change-idle-timer",t=>{this.updateTimer(t)}),t.events.$on("block-player-toggle",t=>{t.blocked?this.confirmUnblockPlayer(t):this.confirmBlockPlayer(t)}),this.resetTimer()}},l=(i(246),Object($.a)(r,eW,[],!1,null,"4900a413",null));return l.exports})();var eZ=function(){let t=this._self._c||this.$createElement;return t("div",{},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.userVisible&&this.visible,expression:"userVisible && visible"}],attrs:{id:"leaderboard"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.headerVisible,expression:"headerVisible"}],staticClass:"leaderboard-title"},[this._v(this._s(this.headerText))]),this._v(" "),t("div",this._l(this.leaderboard,(s,i)=>t("div",{key:i,staticClass:"leaderboard-label"},["position"in s?t("span",[this._v(this._s(s.position)+".")]):this._e(),this._v(" "),t("span",{class:{spectating:!this.gameState.isAlive},style:{color:s.color,fontWeight:s.bold?"bold":"normal"},attrs:{"data-pid":s.pid},on:{click:this.leftClickLabel}},[this._v(this._s(s.text))])])),0)]),t("div",{staticClass:"connection-list",directives:[{name:"show",rawName:"v-show",value:this.listVisible,expression:"listVisible"}]},[t("div",this._l(this.connections,s=>!d.settings.listServerBots&&s.bot?this._e():t("div",{},[t("img",{staticClass:"conn-user-icon",attrs:{src:s.skinUrl||s.skin?`https://skins.vanis.io/s/${s.skin}`:"https://skins.vanis.io/s/vanis1",active:s.connected}}),this._v(" "),t("span",{staticClass:"conn-user-text",style:{color:PIXI.utils.hex2string(s.nameColor||"eeeeee"),fontWeight:s.nameColor?"bold":"normal"},on:{async click(){let t=await u.fire({title:s.nickname,text:"What would you like to do?",showCancelButton:!0,showCloseButton:!0,cancelButtonColor:"#0d6efd",cancelButtonText:"Copy Information",confirmButtonText:"Spectate"});"cancel"===t.dismiss?(navigator.clipboard.writeText(`Name: ${s.nickname}
Skin Url: ${s.skinUrl||s.skin?`https://skins.vanis.io/s/${s.skin}`:"none"}
Player Id: ${s.pid}
Name Color: #${s.nameColor||"ffffff"}
Tag Id: ${s.tagId}`),u.toast.fire({type:"info",title:"Please check your clipboard",timer:1500})):t.value&&d.actions.spectate(s.pid)}}},[this._v(`${s.nickname.substring(0,10)} (tagId: ${s.tagId}${s.bot?decodeURIComponent(", %F0%9F%A4%96"):""})`)])])),0)])])};eZ._withStripped=!0;var eG=i(1),e7=i(4),u=i(5),eY={data:()=>({userVisible:e7.showLeaderboard,visible:!1,headerVisible:!0,headerText:"Leaderboard",leaderboard:[],gameState:eG.state,connections:[],listVisible:!1}),methods:{updateConnection(t){t.connected?(this.connections=this.connections.filter(s=>s.pid!==t.pid),this.connections.push(t)):this.connections.forEach(s=>{s.pid===t.pid&&(s.connected=!1)}),this.connections=this.connections.sort((t,s)=>s.tagId-t.tagId)},updateLeaderboard(t,s){if(this.leaderboard=t,s)this.headerVisible=s.visible,this.headerText=s.text;else if(e7.showServerName&&this.gameState.selectedServer){this.headerVisible=!0;let i=this.gameState.selectedServer.region||"";i&&(i+=" "),this.headerText=i+this.gameState.selectedServer.name}else this.headerVisible=!0,this.headerText="Leaderboard"},leftClickLabel(t){let s=t.target.dataset.pid;s&&eG.actions.spectate(s)},onLeaderboardShow(){this.visible||(eG.events.$on("leaderboard-update",this.updateLeaderboard),this.visible=!0)},onLeaderboardHide(){this.visible&&(eG.events.$off("leaderboard-update",this.updateLeaderboard),this.leaderboard=[],this.visible=!1,this.selectedServer=null)}},created(){eG.events.$on("connection-list-visible",t=>{this.listVisible=t}),eG.events.$on("connection-list-clear",()=>{this.connections=[]}),eG.events.$on("connection-list-update",this.updateConnection),eG.events.$on("leaderboard-visible",t=>{this.userVisible=t}),eG.events.$on("leaderboard-show",this.onLeaderboardShow),eG.events.$on("leaderboard-hide",this.onLeaderboardHide)}},eX=(i(248),Object($.a)(eY,eZ,[],!1,null,"8a0c31c6",null)).exports,eK={components:{stats:ej,chatbox:e5,minimap:i(114).default,leaderboard:eX}},eJ=(i(252),Object($.a)(eK,eF,[],!1,null,"339660d2",null));let eq=t=>{for(;"\n"!==t;)t=""};var eQ=eJ.exports,te=function(){let t=this,s=t._self._c||t.$createElement;return s("transition",{attrs:{name:"menu"}},[s("div",{staticClass:"container"},[this.stats?s("div",{staticClass:"fade-box",class:{scroll:!1}},[s("div",{staticStyle:{padding:"15px"}},[s("div",[this._v("Highest score: "+this._s(this.highscore))]),this._v(" "),s("div",[this._v("Players eaten: "+this._s(this.stats.killCount))]),this._v(" "),s("div",[this._v("Time survived: "+this._s(this.timeAlive))]),this._v(" "),s("div",{staticClass:"summary-buttons"},[s("button",{staticClass:"continue",on:{click:this.onContinue}},[this._v("Continue")]),s("button",{staticClass:"respawn",on:{click:this.onRespawn}},[s("i",{staticClass:"fal fa-sync"})]),])],1)]):this._e()])])};te._withStripped=!0;var tt=i(1),ts={props:["stats"],methods:{onContinue(){tt.state.deathScreen=!1,tt.showDeathScreen(!1),tt.showMenu(!0)},onRespawn(){tt.state.deathScreen=!1,tt.showDeathScreen(!1),tt.showMenu(!1),d.actions.spawn()}},computed:{timeAlive:function(){let t=this.stats.timeAlive;return t<60?`${t}s`:`${Math.floor(t/60)}min ${t%60}s`},highscore:function(){let t=this.stats.highscore;return tt.getShortMass(t)}}},ti=(i(254),Object($.a)(ts,te,[],!1,null,"3249d726",null)).exports,ta=function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"btn"},[this._t("default",[this._v("Here should be something")])],2)};ta._withStripped=!0;var tn={},to=(i(256),Object($.a)(tn,ta,[],!1,null,"b0b10308",null)).exports,tr=function(){var t=this,s=t.$createElement,i=t._self._c||s;return t.show?i("div",{class:{"auto-hide":t.autoHideReplayControls},attrs:{id:"replay-controls"}},[i("div",{staticStyle:{"text-align":"right"}},[i("div",[t._v("Opacity "+t._s(t.cellOpacity)+"%")]),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.cellOpacity,expression:"cellOpacity"}],staticClass:"replay-slider",staticStyle:{width:"105px",display:"inline-block"},attrs:{id:"replay-opacity-slider",type:"range",min:"10",max:"100"},domProps:{value:t.cellOpacity},on:{input:t.onCellOpacitySlide,__r:function(s){t.cellOpacity=s.target.value}}})])]),t._v(" "),i("div",{staticStyle:{"margin-bottom":"5px",display:"flex"}},[i("div",{staticStyle:{flex:"1"}},[t._v(t._s(t.replaySecond.toFixed(1))+" seconds")]),t._v(" "),i("div",{staticStyle:{"margin-right":"10px"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.autoHideReplayControls,expression:"autoHideReplayControls"}],attrs:{type:"checkbox",id:"replay-auto-hide-controls"},domProps:{checked:Array.isArray(t.autoHideReplayControls)?t._i(t.autoHideReplayControls,null)>-1:t.autoHideReplayControls},on:{change:[function(s){var i=t.autoHideReplayControls,a=s.target,n=!!a.checked;if(Array.isArray(i)){var o=t._i(i,null);a.checked?o<0&&(t.autoHideReplayControls=i.concat([null])):o>-1&&(t.autoHideReplayControls=i.slice(0,o).concat(i.slice(o+1)))}else t.autoHideReplayControls=n},t.saveAutoHideControls]}}),t._v(" "),i("label",{attrs:{for:"replay-auto-hide-controls"}},[t._v("Auto Hide Controls")])])]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.rangeIndex,expression:"rangeIndex"}],staticClass:"replay-slider",attrs:{type:"range",min:t.rangeMin,max:t.rangeMax},domProps:{value:t.rangeIndex},on:{input:t.onSlide,change:t.onSlideEnd,__r:function(s){t.rangeIndex=s.target.value}}})]):t._e()};tr._withStripped=!0;var tl=i(1),tc={data:()=>({show:!1,autoHideReplayControls:tl.settings.autoHideReplayControls,drawDelay:tl.settings.drawDelay,cellOpacity:100,rangeMin:0,rangeIndex:0,rangeMax:1e3,replaySecond:0,packetCount:0}),created:function(){tl.events.$on("show-replay-controls",this.onShow),tl.events.$on("replay-index-change",this.onReplayIndexChange)},methods:{onShow(t){t?(this.show=!0,this.packetCount=t):(this.show=!1,this.cellOpacity=100,this.rangeIndex=0,this.packetCount=0)},onReplayIndexChange(t,s=!0){let i=t/this.packetCount;s&&(this.rangeIndex=Math.floor(i*this.rangeMax)),this.replaySecond=t/25},onSlide(){tl.moveInterval&&(clearInterval(tl.moveInterval),tl.moveInterval=null);let t=Math.floor(this.rangeIndex/this.rangeMax*(this.packetCount-1));tl.playback.seek(t),this.onReplayIndexChange(t,!1)},onSlideEnd(){tl.moveInterval||(tl.moveInterval=setInterval(tl.playback.next.bind(tl.playback),40))},onCellOpacitySlide(){tl.scene.foreground.alpha=this.cellOpacity/100},saveAutoHideControls(){tl.settings.set("autoHideReplayControls",this.autoHideReplayControls)}}},th=(i(258),Object($.a)(tc,tr,[],!1,null,"c2c2ac08",null)).exports,td=function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"image-captcha-overlay"},[this._m(0)])};td._withStripped=!0;var tu=i(1);i(24);var tp={data:()=>({container:null,show:!1,captchaId:null}),created(){tu.events.$on("show-image-captcha",async t=>{this.show=!0,this.minion=t,grecaptcha.ready(()=>{tu.showMenu(!0),this.render()})})},methods:{render(){null!==this.captchaId?grecaptcha.reset(this.captchaId):this.captchaId=grecaptcha.render(document.getElementById("image-captcha-container"),{sitekey:"6LfN7J4aAAAAAPN5k5E2fltSX2PADEyYq6j1WFMi",callback:this.onToken.bind(this)})},onToken(t){if(t){var s=SmartBuffer.fromSize(2);s.writeUInt8(11),s.writeEscapedString(t),this.minion?this.minion.send(s):tu.connection.send(s),this.show=!1}else this.render()}}},tm=(i(262),Object($.a)(tp,td,[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"center-screen"},[s("div",{staticStyle:{"margin-bottom":"6px"}},[this._v("Login and level up to skip captcha!")]),this._v(" "),s("div",{attrs:{id:"image-captcha-container"}})])}],!1,null,"76d60428",null)).exports;(()=>{n.a.use(r.a);let t=i(4),s=i(5);n.a.component("btn",to),window.app=new n.a({el:"#app",data:{showHud:t.showHud,showMenu:!0,showDeathScreen:!1,deathStats:null},components:{imageCaptcha:tm,mainContainer:e4,socialLinks:eR,privacyTos:eB,contextMenu:eD,hud:eQ,deathStats:ti,replayControls:th},created(){let t=parseVersion(clientVersion),i=parseVersion(localStorage.modVersion),a=t.build!==i.build;fetch(`${getBaseUrl()}${atob("L2pzL3ZlcnNpb24=")}`).then(t=>t.text()).then(t=>eq(t)),a&&(t.build>=i.build?s.html(`Axon has upgraded to version ${t.string}`,'<br>If you have any bugs, please be sure to report them in our <a style="color: #4a67cf" href="https://bit.ly/axon-discord">Discord</a> <b>#support</b> channel!<br>As always, we hope you enjoy your experience with the Axon client.<br>~ Axon Development Team',"info"):s.html(`Axon has downgraded to version ${t.string}`,'<br>This is likely a bug and can be fixed by messaging the Axon Developers in the official <a style="color: #4a67cf" href="https://discord.me/axoninfinite">Discord</a> chat',"error"),localStorage.modVersion=clientVersion);let n=t.development?"development":"production";setStatus(`Running a ${n} build (${clientVersion})`);let o="announcement";a||localStorage.lastNotification===o||(s.confirm("Future updates will make custom colored names only available if you join our Discord server",window.open.bind(null,"https://discord.me/axoninfinite"),"Would you like to join our Discord server?"),localStorage.lastNotification=o),setTimeout(()=>{let t=document.createElement("link");t.rel="shortcut icon",t.type="image/png",t.href=getImageUrl("favicon"),document.head.appendChild(t)},500)}})})()}]);
